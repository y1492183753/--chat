{"remainingRequest":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\im-ui\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\im-ui\\src\\store\\chatStore.js","dependencies":[{"path":"D:\\im-ui\\src\\store\\chatStore.js","mtime":1703809564000},{"path":"D:\\im-ui\\babel.config.js","mtime":1703809560000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1710142166000},{"path":"D:\\im-ui\\node_modules\\eslint-loader\\index.js","mtime":1710142168000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IE1FU1NBR0VfVFlQRSwgTUVTU0FHRV9TVEFUVVMgfSBmcm9tICIuLi9hcGkvZW51bXMuanMiOwppbXBvcnQgdXNlclN0b3JlIGZyb20gJy4vdXNlclN0b3JlJzsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiB7CiAgICBhY3RpdmVDaGF0OiBudWxsLAogICAgcHJpdmF0ZU1zZ01heElkOiAwLAogICAgZ3JvdXBNc2dNYXhJZDogMCwKICAgIGxvYWRpbmdQcml2YXRlTXNnOiBmYWxzZSwKICAgIGxvYWRpbmdHcm91cE1zZzogZmFsc2UsCiAgICBjaGF0czogW10KICB9LAogIG11dGF0aW9uczogewogICAgaW5pdENoYXRzKHN0YXRlLCBjaGF0c0RhdGEpIHsKICAgICAgc3RhdGUuY2hhdHMgPSBjaGF0c0RhdGEuY2hhdHMgfHwgW107CiAgICAgIHN0YXRlLnByaXZhdGVNc2dNYXhJZCA9IGNoYXRzRGF0YS5wcml2YXRlTXNnTWF4SWQgfHwgMDsKICAgICAgc3RhdGUuZ3JvdXBNc2dNYXhJZCA9IGNoYXRzRGF0YS5ncm91cE1zZ01heElkIHx8IDA7CiAgICAgIC8vIOmYsuatouWbvueJh+S4gOebtOWkhOWcqOWKoOi9veS4reeKtuaAgQogICAgICBzdGF0ZS5jaGF0cy5mb3JFYWNoKGNoYXQgPT4gewogICAgICAgIGNoYXQubWVzc2FnZXMuZm9yRWFjaChtc2cgPT4gewogICAgICAgICAgaWYgKG1zZy5sb2FkU3RhdHVzID09ICJsb2FkaW5nIikgewogICAgICAgICAgICBtc2cubG9hZFN0YXR1cyA9ICJmYWlsIjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgb3BlbkNoYXQoc3RhdGUsIGNoYXRJbmZvKSB7CiAgICAgIGxldCBjaGF0ID0gbnVsbDsKICAgICAgZm9yIChsZXQgaWR4IGluIHN0YXRlLmNoYXRzKSB7CiAgICAgICAgaWYgKHN0YXRlLmNoYXRzW2lkeF0udHlwZSA9PSBjaGF0SW5mby50eXBlICYmIHN0YXRlLmNoYXRzW2lkeF0udGFyZ2V0SWQgPT09IGNoYXRJbmZvLnRhcmdldElkKSB7CiAgICAgICAgICBjaGF0ID0gc3RhdGUuY2hhdHNbaWR4XTsKICAgICAgICAgIC8vIOaUvue9ruWktOmDqAogICAgICAgICAgdGhpcy5jb21taXQoIm1vdmVUb3AiLCBpZHgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIOWIm+W7uuS8muivnQogICAgICBpZiAoY2hhdCA9PSBudWxsKSB7CiAgICAgICAgY2hhdCA9IHsKICAgICAgICAgIHRhcmdldElkOiBjaGF0SW5mby50YXJnZXRJZCwKICAgICAgICAgIHR5cGU6IGNoYXRJbmZvLnR5cGUsCiAgICAgICAgICBzaG93TmFtZTogY2hhdEluZm8uc2hvd05hbWUsCiAgICAgICAgICBoZWFkSW1hZ2U6IGNoYXRJbmZvLmhlYWRJbWFnZSwKICAgICAgICAgIGxhc3RDb250ZW50OiAiIiwKICAgICAgICAgIGxhc3RTZW5kVGltZTogbmV3IERhdGUoKS5nZXRUaW1lKCksCiAgICAgICAgICB1bnJlYWRDb3VudDogMCwKICAgICAgICAgIG1lc3NhZ2VzOiBbXSwKICAgICAgICAgIGF0TWU6IGZhbHNlLAogICAgICAgICAgYXRBbGw6IGZhbHNlCiAgICAgICAgfTsKICAgICAgICBzdGF0ZS5jaGF0cy51bnNoaWZ0KGNoYXQpOwogICAgICB9CiAgICB9LAogICAgYWN0aXZlQ2hhdChzdGF0ZSwgaWR4KSB7CiAgICAgIHN0YXRlLmFjdGl2ZUNoYXQgPSBzdGF0ZS5jaGF0c1tpZHhdOwogICAgfSwKICAgIHJlc2V0VW5yZWFkQ291bnQoc3RhdGUsIGNoYXRJbmZvKSB7CiAgICAgIGZvciAobGV0IGlkeCBpbiBzdGF0ZS5jaGF0cykgewogICAgICAgIGlmIChzdGF0ZS5jaGF0c1tpZHhdLnR5cGUgPT0gY2hhdEluZm8udHlwZSAmJiBzdGF0ZS5jaGF0c1tpZHhdLnRhcmdldElkID09IGNoYXRJbmZvLnRhcmdldElkKSB7CiAgICAgICAgICBzdGF0ZS5jaGF0c1tpZHhdLnVucmVhZENvdW50ID0gMDsKICAgICAgICAgIHN0YXRlLmNoYXRzW2lkeF0uYXRNZSA9IGZhbHNlOwogICAgICAgICAgc3RhdGUuY2hhdHNbaWR4XS5hdEFsbCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmNvbW1pdCgic2F2ZVRvU3RvcmFnZSIpOwogICAgfSwKICAgIHJlYWRlZE1lc3NhZ2Uoc3RhdGUsIHBvcykgewogICAgICBmb3IgKGxldCBpZHggaW4gc3RhdGUuY2hhdHMpIHsKICAgICAgICBpZiAoc3RhdGUuY2hhdHNbaWR4XS50eXBlID09ICdQUklWQVRFJyAmJiBzdGF0ZS5jaGF0c1tpZHhdLnRhcmdldElkID09IHBvcy5mcmllbmRJZCkgewogICAgICAgICAgc3RhdGUuY2hhdHNbaWR4XS5tZXNzYWdlcy5mb3JFYWNoKG0gPT4gewogICAgICAgICAgICBpZiAobS5zZWxmU2VuZCAmJiBtLnN0YXR1cyAhPSBNRVNTQUdFX1NUQVRVUy5SRUNBTEwpIHsKICAgICAgICAgICAgICAvLyBwb3MubWF4SWTkuLrnqbrooajnpLrmlbTkuKrkvJror53lt7Lor7sKICAgICAgICAgICAgICBpZiAoIXBvcy5tYXhJZCB8fCBtLmlkIDw9IHBvcy5tYXhJZCkgewogICAgICAgICAgICAgICAgbS5zdGF0dXMgPSBNRVNTQUdFX1NUQVRVUy5SRUFERUQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5jb21taXQoInNhdmVUb1N0b3JhZ2UiKTsKICAgIH0sCiAgICByZW1vdmVDaGF0KHN0YXRlLCBpZHgpIHsKICAgICAgaWYgKHN0YXRlLmNoYXRzW2lkeF0gPT0gc3RhdGUuYWN0aXZlQ2hhdCkgewogICAgICAgIHN0YXRlLmFjdGl2ZUNoYXQgPSBudWxsOwogICAgICB9CiAgICAgIHN0YXRlLmNoYXRzLnNwbGljZShpZHgsIDEpOwogICAgICB0aGlzLmNvbW1pdCgic2F2ZVRvU3RvcmFnZSIpOwogICAgfSwKICAgIG1vdmVUb3Aoc3RhdGUsIGlkeCkgewogICAgICAvLyDliqDovb3kuK3kuI3np7vliqjvvIzlvojogJfmgKfog70KICAgICAgaWYgKHN0YXRlLmxvYWRpbmdQcml2YXRlTXNnIHx8IHN0YXRlLmxvYWRpbmdHcm91cE1zZykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoaWR4ID4gMCkgewogICAgICAgIGxldCBjaGF0ID0gc3RhdGUuY2hhdHNbaWR4XTsKICAgICAgICBzdGF0ZS5jaGF0cy5zcGxpY2UoaWR4LCAxKTsKICAgICAgICBzdGF0ZS5jaGF0cy51bnNoaWZ0KGNoYXQpOwogICAgICAgIHRoaXMuY29tbWl0KCJzYXZlVG9TdG9yYWdlIik7CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmVHcm91cENoYXQoc3RhdGUsIGdyb3VwSWQpIHsKICAgICAgZm9yIChsZXQgaWR4IGluIHN0YXRlLmNoYXRzKSB7CiAgICAgICAgaWYgKHN0YXRlLmNoYXRzW2lkeF0udHlwZSA9PSAnR1JPVVAnICYmIHN0YXRlLmNoYXRzW2lkeF0udGFyZ2V0SWQgPT0gZ3JvdXBJZCkgewogICAgICAgICAgdGhpcy5jb21taXQoInJlbW92ZUNoYXQiLCBpZHgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHJlbW92ZVByaXZhdGVDaGF0KHN0YXRlLCBmcmllbmRJZCkgewogICAgICBmb3IgKGxldCBpZHggaW4gc3RhdGUuY2hhdHMpIHsKICAgICAgICBpZiAoc3RhdGUuY2hhdHNbaWR4XS50eXBlID09ICdQUklWQVRFJyAmJiBzdGF0ZS5jaGF0c1tpZHhdLnRhcmdldElkID09IGZyaWVuZElkKSB7CiAgICAgICAgICB0aGlzLmNvbW1pdCgicmVtb3ZlQ2hhdCIsIGlkeCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaW5zZXJ0TWVzc2FnZShzdGF0ZSwgbXNnSW5mbykgewogICAgICAvLyDojrflj5blr7nmlrlpZOaIlue+pGlkCiAgICAgIGxldCB0eXBlID0gbXNnSW5mby5ncm91cElkID8gJ0dST1VQJyA6ICdQUklWQVRFJzsKICAgICAgbGV0IHRhcmdldElkID0gbXNnSW5mby5ncm91cElkID8gbXNnSW5mby5ncm91cElkIDogbXNnSW5mby5zZWxmU2VuZCA/IG1zZ0luZm8ucmVjdklkIDogbXNnSW5mby5zZW5kSWQ7CiAgICAgIGxldCBjaGF0ID0gbnVsbDsKICAgICAgZm9yIChsZXQgaWR4IGluIHN0YXRlLmNoYXRzKSB7CiAgICAgICAgaWYgKHN0YXRlLmNoYXRzW2lkeF0udHlwZSA9PSB0eXBlICYmIHN0YXRlLmNoYXRzW2lkeF0udGFyZ2V0SWQgPT09IHRhcmdldElkKSB7CiAgICAgICAgICBjaGF0ID0gc3RhdGUuY2hhdHNbaWR4XTsKICAgICAgICAgIHRoaXMuY29tbWl0KCJtb3ZlVG9wIiwgaWR4KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyDmj5LlhaXmlrDnmoTmlbDmja4KICAgICAgaWYgKG1zZ0luZm8udHlwZSA9PSBNRVNTQUdFX1RZUEUuSU1BR0UpIHsKICAgICAgICBjaGF0Lmxhc3RDb250ZW50ID0gIlvlm77niYddIjsKICAgICAgfSBlbHNlIGlmIChtc2dJbmZvLnR5cGUgPT0gTUVTU0FHRV9UWVBFLkZJTEUpIHsKICAgICAgICBjaGF0Lmxhc3RDb250ZW50ID0gIlvmlofku7ZdIjsKICAgICAgfSBlbHNlIGlmIChtc2dJbmZvLnR5cGUgPT0gTUVTU0FHRV9UWVBFLkFVRElPKSB7CiAgICAgICAgY2hhdC5sYXN0Q29udGVudCA9ICJb6K+t6Z+zXSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2hhdC5sYXN0Q29udGVudCA9IG1zZ0luZm8uY29udGVudDsKICAgICAgfQogICAgICBjaGF0Lmxhc3RTZW5kVGltZSA9IG1zZ0luZm8uc2VuZFRpbWU7CiAgICAgIGNoYXQuc2VuZE5pY2tOYW1lID0gbXNnSW5mby5zZW5kTmlja05hbWU7CiAgICAgIC8vIOacquivu+WKoDEKICAgICAgaWYgKCFtc2dJbmZvLnNlbGZTZW5kICYmIG1zZ0luZm8uc3RhdHVzICE9IE1FU1NBR0VfU1RBVFVTLlJFQURFRCkgewogICAgICAgIGNoYXQudW5yZWFkQ291bnQrKzsKICAgICAgfQogICAgICAvLyDmmK/lkKbmnInkurpA5oiRCiAgICAgIGlmICghbXNnSW5mby5zZWxmU2VuZCAmJiBjaGF0LnR5cGUgPT0gIkdST1VQIiAmJiBtc2dJbmZvLmF0VXNlcklkcyAmJiBtc2dJbmZvLnN0YXR1cyAhPSBNRVNTQUdFX1NUQVRVUy5SRUFERUQpIHsKICAgICAgICBsZXQgdXNlcklkID0gdXNlclN0b3JlLnN0YXRlLnVzZXJJbmZvLmlkOwogICAgICAgIGlmIChtc2dJbmZvLmF0VXNlcklkcy5pbmRleE9mKHVzZXJJZCkgPj0gMCkgewogICAgICAgICAgY2hhdC5hdE1lID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKG1zZ0luZm8uYXRVc2VySWRzLmluZGV4T2YoLTEpID49IDApIHsKICAgICAgICAgIGNoYXQuYXRBbGwgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyDorrDlvZXmtojmga/nmoTmnIDlpKdpZAogICAgICBpZiAobXNnSW5mby5pZCAmJiB0eXBlID09ICJQUklWQVRFIiAmJiBtc2dJbmZvLmlkID4gc3RhdGUucHJpdmF0ZU1zZ01heElkKSB7CiAgICAgICAgc3RhdGUucHJpdmF0ZU1zZ01heElkID0gbXNnSW5mby5pZDsKICAgICAgfQogICAgICBpZiAobXNnSW5mby5pZCAmJiB0eXBlID09ICJHUk9VUCIgJiYgbXNnSW5mby5pZCA+IHN0YXRlLmdyb3VwTXNnTWF4SWQpIHsKICAgICAgICBzdGF0ZS5ncm91cE1zZ01heElkID0gbXNnSW5mby5pZDsKICAgICAgfQogICAgICAvLyDlpoLmnpzmmK/lt7LlrZjlnKjmtojmga/vvIzliJnopobnm5bml6fnmoTmtojmga/mlbDmja4KICAgICAgZm9yIChsZXQgaWR4IGluIGNoYXQubWVzc2FnZXMpIHsKICAgICAgICBpZiAobXNnSW5mby5pZCAmJiBjaGF0Lm1lc3NhZ2VzW2lkeF0uaWQgPT0gbXNnSW5mby5pZCkgewogICAgICAgICAgT2JqZWN0LmFzc2lnbihjaGF0Lm1lc3NhZ2VzW2lkeF0sIG1zZ0luZm8pOwogICAgICAgICAgdGhpcy5jb21taXQoInNhdmVUb1N0b3JhZ2UiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8g5q2j5Zyo5Y+R6YCB5Lit55qE5raI5oGv5Y+v6IO95rKh5pyJaWQs6YCa6L+H5Y+R6YCB5pe26Ze05Yik5patCiAgICAgICAgaWYgKG1zZ0luZm8uc2VsZlNlbmQgJiYgY2hhdC5tZXNzYWdlc1tpZHhdLnNlbGZTZW5kICYmIGNoYXQubWVzc2FnZXNbaWR4XS5zZW5kVGltZSA9PSBtc2dJbmZvLnNlbmRUaW1lKSB7CiAgICAgICAgICBPYmplY3QuYXNzaWduKGNoYXQubWVzc2FnZXNbaWR4XSwgbXNnSW5mbyk7CiAgICAgICAgICB0aGlzLmNvbW1pdCgic2F2ZVRvU3RvcmFnZSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyDpl7TpmpTlpKfkuo4xMOWIhumSn+aPkuWFpeaXtumXtOaYvuekugogICAgICBpZiAoIWNoYXQubGFzdFRpbWVUaXAgfHwgY2hhdC5sYXN0VGltZVRpcCA8IG1zZ0luZm8uc2VuZFRpbWUgLSA2MDAgKiAxMDAwKSB7CiAgICAgICAgY2hhdC5tZXNzYWdlcy5wdXNoKHsKICAgICAgICAgIHNlbmRUaW1lOiBtc2dJbmZvLnNlbmRUaW1lLAogICAgICAgICAgdHlwZTogTUVTU0FHRV9UWVBFLlRJUF9USU1FCiAgICAgICAgfSk7CiAgICAgICAgY2hhdC5sYXN0VGltZVRpcCA9IG1zZ0luZm8uc2VuZFRpbWU7CiAgICAgIH0KICAgICAgLy8g5paw55qE5raI5oGvCiAgICAgIGNoYXQubWVzc2FnZXMucHVzaChtc2dJbmZvKTsKICAgICAgdGhpcy5jb21taXQoInNhdmVUb1N0b3JhZ2UiKTsKICAgIH0sCiAgICBkZWxldGVNZXNzYWdlKHN0YXRlLCBtc2dJbmZvKSB7CiAgICAgIC8vIOiOt+WPluWvueaWuWlk5oiW576kaWQKICAgICAgbGV0IHR5cGUgPSBtc2dJbmZvLmdyb3VwSWQgPyAnR1JPVVAnIDogJ1BSSVZBVEUnOwogICAgICBsZXQgdGFyZ2V0SWQgPSBtc2dJbmZvLmdyb3VwSWQgPyBtc2dJbmZvLmdyb3VwSWQgOiBtc2dJbmZvLnNlbGZTZW5kID8gbXNnSW5mby5yZWN2SWQgOiBtc2dJbmZvLnNlbmRJZDsKICAgICAgbGV0IGNoYXQgPSBudWxsOwogICAgICBmb3IgKGxldCBpZHggaW4gc3RhdGUuY2hhdHMpIHsKICAgICAgICBpZiAoc3RhdGUuY2hhdHNbaWR4XS50eXBlID09IHR5cGUgJiYgc3RhdGUuY2hhdHNbaWR4XS50YXJnZXRJZCA9PT0gdGFyZ2V0SWQpIHsKICAgICAgICAgIGNoYXQgPSBzdGF0ZS5jaGF0c1tpZHhdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZvciAobGV0IGlkeCBpbiBjaGF0Lm1lc3NhZ2VzKSB7CiAgICAgICAgLy8g5bey57uP5Y+R6YCB5oiQ5Yqf55qE77yM5qC55o2uaWTliKDpmaQKICAgICAgICBpZiAoY2hhdC5tZXNzYWdlc1tpZHhdLmlkICYmIGNoYXQubWVzc2FnZXNbaWR4XS5pZCA9PSBtc2dJbmZvLmlkKSB7CiAgICAgICAgICBjaGF0Lm1lc3NhZ2VzLnNwbGljZShpZHgsIDEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIC8vIOato+WcqOWPkemAgeS4reeahOa2iOaBr+WPr+iDveayoeaciWlk77yM5qC55o2u5Y+R6YCB5pe26Ze05Yig6ZmkCiAgICAgICAgaWYgKG1zZ0luZm8uc2VsZlNlbmQgJiYgY2hhdC5tZXNzYWdlc1tpZHhdLnNlbGZTZW5kICYmIGNoYXQubWVzc2FnZXNbaWR4XS5zZW5kVGltZSA9PSBtc2dJbmZvLnNlbmRUaW1lKSB7CiAgICAgICAgICBjaGF0Lm1lc3NhZ2VzLnNwbGljZShpZHgsIDEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuY29tbWl0KCJzYXZlVG9TdG9yYWdlIik7CiAgICB9LAogICAgdXBkYXRlQ2hhdEZyb21GcmllbmQoc3RhdGUsIGZyaWVuZCkgewogICAgICBmb3IgKGxldCBpIGluIHN0YXRlLmNoYXRzKSB7CiAgICAgICAgbGV0IGNoYXQgPSBzdGF0ZS5jaGF0c1tpXTsKICAgICAgICBpZiAoY2hhdC50eXBlID09ICdQUklWQVRFJyAmJiBjaGF0LnRhcmdldElkID09IGZyaWVuZC5pZCkgewogICAgICAgICAgY2hhdC5oZWFkSW1hZ2UgPSBmcmllbmQuaGVhZEltYWdlVGh1bWI7CiAgICAgICAgICBjaGF0LnNob3dOYW1lID0gZnJpZW5kLm5pY2tOYW1lOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuY29tbWl0KCJzYXZlVG9TdG9yYWdlIik7CiAgICB9LAogICAgdXBkYXRlQ2hhdEZyb21Hcm91cChzdGF0ZSwgZ3JvdXApIHsKICAgICAgZm9yIChsZXQgaSBpbiBzdGF0ZS5jaGF0cykgewogICAgICAgIGxldCBjaGF0ID0gc3RhdGUuY2hhdHNbaV07CiAgICAgICAgaWYgKGNoYXQudHlwZSA9PSAnR1JPVVAnICYmIGNoYXQudGFyZ2V0SWQgPT0gZ3JvdXAuaWQpIHsKICAgICAgICAgIGNoYXQuaGVhZEltYWdlID0gZ3JvdXAuaGVhZEltYWdlVGh1bWI7CiAgICAgICAgICBjaGF0LnNob3dOYW1lID0gZ3JvdXAucmVtYXJrOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuY29tbWl0KCJzYXZlVG9TdG9yYWdlIik7CiAgICB9LAogICAgbG9hZGluZ1ByaXZhdGVNc2coc3RhdGUsIGxvYWRkaW5nKSB7CiAgICAgIHN0YXRlLmxvYWRpbmdQcml2YXRlTXNnID0gbG9hZGRpbmc7CiAgICAgIGlmICghc3RhdGUubG9hZGluZ1ByaXZhdGVNc2cgJiYgIXN0YXRlLmxvYWRpbmdHcm91cE1zZykgewogICAgICAgIHRoaXMuY29tbWl0KCJzb3J0Iik7CiAgICAgIH0KICAgIH0sCiAgICBsb2FkaW5nR3JvdXBNc2coc3RhdGUsIGxvYWRkaW5nKSB7CiAgICAgIHN0YXRlLmxvYWRpbmdHcm91cE1zZyA9IGxvYWRkaW5nOwogICAgICBpZiAoIXN0YXRlLmxvYWRpbmdQcml2YXRlTXNnICYmICFzdGF0ZS5sb2FkaW5nR3JvdXBNc2cpIHsKICAgICAgICB0aGlzLmNvbW1pdCgic29ydCIpOwogICAgICB9CiAgICB9LAogICAgc29ydChzdGF0ZSkgewogICAgICBzdGF0ZS5jaGF0cy5zb3J0KChjMSwgYzIpID0+IGMyLmxhc3RTZW5kVGltZSAtIGMxLmxhc3RTZW5kVGltZSk7CiAgICB9LAogICAgc2F2ZVRvU3RvcmFnZShzdGF0ZSkgewogICAgICBsZXQgdXNlcklkID0gdXNlclN0b3JlLnN0YXRlLnVzZXJJbmZvLmlkOwogICAgICBsZXQga2V5ID0gImNoYXRzLSIgKyB1c2VySWQ7CiAgICAgIGxldCBjaGF0c0RhdGEgPSB7CiAgICAgICAgcHJpdmF0ZU1zZ01heElkOiBzdGF0ZS5wcml2YXRlTXNnTWF4SWQsCiAgICAgICAgZ3JvdXBNc2dNYXhJZDogc3RhdGUuZ3JvdXBNc2dNYXhJZCwKICAgICAgICBjaGF0czogc3RhdGUuY2hhdHMKICAgICAgfTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShjaGF0c0RhdGEpKTsKICAgIH0sCiAgICBjbGVhcihzdGF0ZSkgewogICAgICBzdGF0ZS5hY3RpdmVDaGF0ID0gbnVsbDsKICAgICAgc3RhdGUuY2hhdHMgPSBbXTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGxvYWRDaGF0KGNvbnRleHQpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBsZXQgdXNlcklkID0gdXNlclN0b3JlLnN0YXRlLnVzZXJJbmZvLmlkOwogICAgICAgIGxldCBrZXkgPSAiY2hhdHMtIiArIHVzZXJJZDsKICAgICAgICBsZXQgaXRlbSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7CiAgICAgICAgaWYgKGl0ZW0pIHsKICAgICAgICAgIGxldCBjaGF0c0RhdGEgPSBKU09OLnBhcnNlKGl0ZW0pOwogICAgICAgICAgY29udGV4dC5jb21taXQoImluaXRDaGF0cyIsIGNoYXRzRGF0YSk7CiAgICAgICAgfQogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["MESSAGE_TYPE","MESSAGE_STATUS","userStore","state","activeChat","privateMsgMaxId","groupMsgMaxId","loadingPrivateMsg","loadingGroupMsg","chats","mutations","initChats","chatsData","forEach","chat","messages","msg","loadStatus","openChat","chatInfo","idx","type","targetId","commit","showName","headImage","lastContent","lastSendTime","Date","getTime","unreadCount","atMe","atAll","unshift","resetUnreadCount","readedMessage","pos","friendId","m","selfSend","status","RECALL","maxId","id","READED","removeChat","splice","moveTop","removeGroupChat","groupId","removePrivateChat","insertMessage","msgInfo","recvId","sendId","IMAGE","FILE","AUDIO","content","sendTime","sendNickName","atUserIds","userId","userInfo","indexOf","Object","assign","lastTimeTip","push","TIP_TIME","deleteMessage","updateChatFromFriend","friend","i","headImageThumb","nickName","updateChatFromGroup","group","remark","loadding","sort","c1","c2","saveToStorage","key","localStorage","setItem","JSON","stringify","clear","actions","loadChat","context","Promise","resolve","reject","item","getItem","parse"],"sources":["D:/im-ui/src/store/chatStore.js"],"sourcesContent":["import {\r\n\tMESSAGE_TYPE,\r\n\tMESSAGE_STATUS\r\n} from \"../api/enums.js\"\r\nimport userStore from './userStore';\r\nexport default {\r\n\r\n\tstate: {\r\n\t\tactiveChat: null,\r\n\t\tprivateMsgMaxId: 0,\r\n\t\tgroupMsgMaxId: 0,\r\n\t\tloadingPrivateMsg: false,\r\n\t\tloadingGroupMsg: false,\r\n\t\tchats: []\r\n\t},\r\n\r\n\tmutations: {\r\n\t\tinitChats(state, chatsData) {\r\n\t\t\tstate.chats = chatsData.chats || [];\r\n\t\t\tstate.privateMsgMaxId = chatsData.privateMsgMaxId || 0;\r\n\t\t\tstate.groupMsgMaxId = chatsData.groupMsgMaxId || 0;\r\n\t\t\t// 防止图片一直处在加载中状态\r\n\t\t\tstate.chats.forEach((chat) => {\r\n\t\t\t\tchat.messages.forEach((msg) => {\r\n\t\t\t\t\tif (msg.loadStatus == \"loading\") {\r\n\t\t\t\t\t\tmsg.loadStatus = \"fail\"\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\topenChat(state, chatInfo) {\r\n\t\t\tlet chat = null;\r\n\t\t\tfor (let idx in state.chats) {\r\n\t\t\t\tif (state.chats[idx].type == chatInfo.type &&\r\n\t\t\t\t\tstate.chats[idx].targetId === chatInfo.targetId) {\r\n\t\t\t\t\tchat = state.chats[idx];\r\n\t\t\t\t\t// 放置头部\r\n\t\t\t\t\tthis.commit(\"moveTop\", idx)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 创建会话\r\n\t\t\tif (chat == null) {\r\n\t\t\t\tchat = {\r\n\t\t\t\t\ttargetId: chatInfo.targetId,\r\n\t\t\t\t\ttype: chatInfo.type,\r\n\t\t\t\t\tshowName: chatInfo.showName,\r\n\t\t\t\t\theadImage: chatInfo.headImage,\r\n\t\t\t\t\tlastContent: \"\",\r\n\t\t\t\t\tlastSendTime: new Date().getTime(),\r\n\t\t\t\t\tunreadCount: 0,\r\n\t\t\t\t\tmessages: [],\r\n\t\t\t\t\tatMe: false,\r\n\t\t\t\t\tatAll: false\r\n\t\t\t\t};\r\n\t\t\t\tstate.chats.unshift(chat);\r\n\t\t\t}\r\n\t\t},\r\n\t\tactiveChat(state, idx) {\r\n\t\t\tstate.activeChat = state.chats[idx];\r\n\t\t},\r\n\t\tresetUnreadCount(state, chatInfo) {\r\n\t\t\tfor (let idx in state.chats) {\r\n\t\t\t\tif (state.chats[idx].type == chatInfo.type &&\r\n\t\t\t\t\tstate.chats[idx].targetId == chatInfo.targetId) {\r\n\t\t\t\t\tstate.chats[idx].unreadCount = 0;\r\n\t\t\t\t\tstate.chats[idx].atMe = false;\r\n\t\t\t\t\tstate.chats[idx].atAll = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.commit(\"saveToStorage\");\r\n\t\t},\r\n\t\treadedMessage(state, pos) {\r\n\t\t\tfor (let idx in state.chats) {\r\n\t\t\t\tif (state.chats[idx].type == 'PRIVATE' &&\r\n\t\t\t\t\tstate.chats[idx].targetId == pos.friendId) {\r\n\t\t\t\t\tstate.chats[idx].messages.forEach((m) => {\r\n\t\t\t\t\t\tif (m.selfSend && m.status != MESSAGE_STATUS.RECALL) {\r\n\t\t\t\t\t\t\t// pos.maxId为空表示整个会话已读\r\n\t\t\t\t\t\t\tif(!pos.maxId || m.id <= pos.maxId){\r\n\t\t\t\t\t\t\t\tm.status = MESSAGE_STATUS.READED\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.commit(\"saveToStorage\");\r\n\t\t},\r\n\t\tremoveChat(state, idx) {\r\n\t\t\tif (state.chats[idx] == state.activeChat) {\r\n\t\t\t\tstate.activeChat = null;\r\n\t\t\t}\r\n\t\t\tstate.chats.splice(idx, 1);\r\n\t\t\tthis.commit(\"saveToStorage\");\r\n\t\t},\r\n\t\tmoveTop(state, idx) {\r\n\t\t\t// 加载中不移动，很耗性能\r\n\t\t\tif(state.loadingPrivateMsg || state.loadingGroupMsg){\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\tif (idx > 0) {\r\n\t\t\t\tlet chat = state.chats[idx];\r\n\t\t\t\tstate.chats.splice(idx, 1);\r\n\t\t\t\tstate.chats.unshift(chat);\r\n\t\t\t\tthis.commit(\"saveToStorage\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveGroupChat(state, groupId) {\r\n\t\t\tfor (let idx in state.chats) {\r\n\t\t\t\tif (state.chats[idx].type == 'GROUP' &&\r\n\t\t\t\t\tstate.chats[idx].targetId == groupId) {\r\n\t\t\t\t\tthis.commit(\"removeChat\", idx);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tremovePrivateChat(state, friendId) {\r\n\t\t\tfor (let idx in state.chats) {\r\n\t\t\t\tif (state.chats[idx].type == 'PRIVATE' &&\r\n\t\t\t\t\tstate.chats[idx].targetId == friendId) {\r\n\t\t\t\t\tthis.commit(\"removeChat\", idx);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tinsertMessage(state, msgInfo) {\r\n\t\t\t// 获取对方id或群id\r\n\t\t\tlet type = msgInfo.groupId ? 'GROUP' : 'PRIVATE';\r\n\t\t\tlet targetId = msgInfo.groupId ? msgInfo.groupId : msgInfo.selfSend ? msgInfo.recvId : msgInfo.sendId;\r\n\t\t\tlet chat = null;\r\n\t\t\tfor (let idx in state.chats) {\r\n\t\t\t\tif (state.chats[idx].type == type &&\r\n\t\t\t\t\tstate.chats[idx].targetId === targetId) {\r\n\t\t\t\t\tchat = state.chats[idx];\r\n\t\t\t\t\tthis.commit(\"moveTop\", idx)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 插入新的数据\r\n\t\t\tif (msgInfo.type == MESSAGE_TYPE.IMAGE) {\r\n\t\t\t\tchat.lastContent = \"[图片]\";\r\n\t\t\t} else if (msgInfo.type == MESSAGE_TYPE.FILE) {\r\n\t\t\t\tchat.lastContent = \"[文件]\";\r\n\t\t\t} else if (msgInfo.type == MESSAGE_TYPE.AUDIO) {\r\n\t\t\t\tchat.lastContent = \"[语音]\";\r\n\t\t\t} else {\r\n\t\t\t\tchat.lastContent = msgInfo.content;\r\n\t\t\t}\r\n\t\t\tchat.lastSendTime = msgInfo.sendTime;\r\n\t\t\tchat.sendNickName = msgInfo.sendNickName;\r\n\t\t\t// 未读加1\r\n\t\t\tif (!msgInfo.selfSend && msgInfo.status != MESSAGE_STATUS.READED) {\r\n\t\t\t\tchat.unreadCount++;\r\n\t\t\t}\r\n\t\t\t// 是否有人@我\r\n\t\t\tif (!msgInfo.selfSend && chat.type == \"GROUP\" && msgInfo.atUserIds &&\r\n\t\t\t\tmsgInfo.status != MESSAGE_STATUS.READED) {\r\n\t\t\t\tlet userId = userStore.state.userInfo.id;\r\n\t\t\t\tif (msgInfo.atUserIds.indexOf(userId) >= 0) {\r\n\t\t\t\t\tchat.atMe = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (msgInfo.atUserIds.indexOf(-1) >= 0) {\r\n\t\t\t\t\tchat.atAll = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 记录消息的最大id\r\n\t\t\tif (msgInfo.id && type == \"PRIVATE\" && msgInfo.id > state.privateMsgMaxId) {\r\n\t\t\t\tstate.privateMsgMaxId = msgInfo.id;\r\n\t\t\t}\r\n\t\t\tif (msgInfo.id && type == \"GROUP\" && msgInfo.id > state.groupMsgMaxId) {\r\n\t\t\t\tstate.groupMsgMaxId = msgInfo.id;\r\n\t\t\t}\r\n\t\t\t// 如果是已存在消息，则覆盖旧的消息数据\r\n\t\t\tfor (let idx in chat.messages) {\r\n\t\t\t\tif (msgInfo.id && chat.messages[idx].id == msgInfo.id) {\r\n\t\t\t\t\tObject.assign(chat.messages[idx], msgInfo);\r\n\t\t\t\t\tthis.commit(\"saveToStorage\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 正在发送中的消息可能没有id,通过发送时间判断\r\n\t\t\t\tif (msgInfo.selfSend && chat.messages[idx].selfSend &&\r\n\t\t\t\t\tchat.messages[idx].sendTime == msgInfo.sendTime) {\r\n\t\t\t\t\tObject.assign(chat.messages[idx], msgInfo);\r\n\t\t\t\t\tthis.commit(\"saveToStorage\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 间隔大于10分钟插入时间显示\r\n\t\t\tif (!chat.lastTimeTip || (chat.lastTimeTip < msgInfo.sendTime - 600 * 1000)) {\r\n\t\t\t\tchat.messages.push({\r\n\t\t\t\t\tsendTime: msgInfo.sendTime,\r\n\t\t\t\t\ttype: MESSAGE_TYPE.TIP_TIME,\r\n\t\t\t\t});\r\n\t\t\t\tchat.lastTimeTip = msgInfo.sendTime;\r\n\t\t\t}\r\n\t\t\t// 新的消息\r\n\t\t\tchat.messages.push(msgInfo);\r\n\t\t\tthis.commit(\"saveToStorage\");\r\n\t\t},\r\n\t\tdeleteMessage(state, msgInfo) {\r\n\t\t\t// 获取对方id或群id\r\n\t\t\tlet type = msgInfo.groupId ? 'GROUP' : 'PRIVATE';\r\n\t\t\tlet targetId = msgInfo.groupId ? msgInfo.groupId : msgInfo.selfSend ? msgInfo.recvId : msgInfo.sendId;\r\n\t\t\tlet chat = null;\r\n\t\t\tfor (let idx in state.chats) {\r\n\t\t\t\tif (state.chats[idx].type == type &&\r\n\t\t\t\t\tstate.chats[idx].targetId === targetId) {\r\n\t\t\t\t\tchat = state.chats[idx];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (let idx in chat.messages) {\r\n\t\t\t\t// 已经发送成功的，根据id删除\r\n\t\t\t\tif (chat.messages[idx].id && chat.messages[idx].id == msgInfo.id) {\r\n\t\t\t\t\tchat.messages.splice(idx, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t// 正在发送中的消息可能没有id，根据发送时间删除\r\n\t\t\t\tif (msgInfo.selfSend && chat.messages[idx].selfSend &&\r\n\t\t\t\t\tchat.messages[idx].sendTime == msgInfo.sendTime) {\r\n\t\t\t\t\tchat.messages.splice(idx, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.commit(\"saveToStorage\");\r\n\t\t},\r\n\t\tupdateChatFromFriend(state, friend) {\r\n\t\t\tfor (let i in state.chats) {\r\n\t\t\t\tlet chat = state.chats[i];\r\n\t\t\t\tif (chat.type == 'PRIVATE' && chat.targetId == friend.id) {\r\n\t\t\t\t\tchat.headImage = friend.headImageThumb;\r\n\t\t\t\t\tchat.showName = friend.nickName;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.commit(\"saveToStorage\");\r\n\t\t},\r\n\t\tupdateChatFromGroup(state, group) {\r\n\t\t\tfor (let i in state.chats) {\r\n\t\t\t\tlet chat = state.chats[i];\r\n\t\t\t\tif (chat.type == 'GROUP' && chat.targetId == group.id) {\r\n\t\t\t\t\tchat.headImage = group.headImageThumb;\r\n\t\t\t\t\tchat.showName = group.remark;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.commit(\"saveToStorage\");\r\n\t\t},\r\n\r\n\t\tloadingPrivateMsg(state, loadding) {\r\n\t\t\tstate.loadingPrivateMsg = loadding;\r\n\t\t\tif(!state.loadingPrivateMsg && !state.loadingGroupMsg){\r\n\t\t\t\tthis.commit(\"sort\")\r\n\t\t\t}\r\n\t\t},\r\n\t\tloadingGroupMsg(state, loadding) {\r\n\t\t\tstate.loadingGroupMsg = loadding;\r\n\t\t\tif(!state.loadingPrivateMsg && !state.loadingGroupMsg){\r\n\t\t\t\tthis.commit(\"sort\")\r\n\t\t\t}\r\n\t\t},\r\n\t\tsort(state){\r\n\t\t\tstate.chats.sort((c1,c2)=>c2.lastSendTime-c1.lastSendTime);\r\n\t\t},\r\n\t\tsaveToStorage(state) {\r\n\t\t\tlet userId = userStore.state.userInfo.id;\r\n\t\t\tlet key = \"chats-\" + userId;\r\n\t\t\tlet chatsData = {\r\n\t\t\t\tprivateMsgMaxId: state.privateMsgMaxId,\r\n\t\t\t\tgroupMsgMaxId: state.groupMsgMaxId,\r\n\t\t\t\tchats: state.chats\r\n\t\t\t}\r\n\t\t\tlocalStorage.setItem(key, JSON.stringify(chatsData));\r\n\t\t},\r\n\t\tclear(state) {\r\n\t\t\tstate.activeChat = null;\r\n\t\t\tstate.chats = [];\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tloadChat(context) {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tlet userId = userStore.state.userInfo.id;\r\n\t\t\t\tlet key = \"chats-\" + userId;\r\n\t\t\t\tlet item = localStorage.getItem(key)\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\tlet chatsData = JSON.parse(item);\r\n\t\t\t\t\tcontext.commit(\"initChats\", chatsData);\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}"],"mappings":"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","ignoreList":[]}]}