{"remainingRequest":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\im-ui\\src\\components\\chat\\ChatBox.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\im-ui\\src\\components\\chat\\ChatBox.vue","mtime":1711256613938},{"path":"D:\\im-ui\\babel.config.js","mtime":1703809560000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1710142166000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1710142168000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5kZWxldGUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuaGFzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLnNpemUuanMiOwppbXBvcnQgQ2hhdEdyb3VwU2lkZSBmcm9tICIuL0NoYXRHcm91cFNpZGUudnVlIjsKaW1wb3J0IENoYXRNZXNzYWdlSXRlbSBmcm9tICIuL0NoYXRNZXNzYWdlSXRlbS52dWUiOwppbXBvcnQgRmlsZVVwbG9hZCBmcm9tICIuLi9jb21tb24vRmlsZVVwbG9hZC52dWUiOwppbXBvcnQgRW1vdGlvbiBmcm9tICIuLi9jb21tb24vRW1vdGlvbi52dWUiOwppbXBvcnQgQ2hhdFZvaWNlIGZyb20gIi4vQ2hhdFZvaWNlLnZ1ZSI7CmltcG9ydCBDaGF0SGlzdG9yeSBmcm9tICIuL0NoYXRIaXN0b3J5LnZ1ZSI7CmltcG9ydCBDaGF0QXRCb3ggZnJvbSAiLi9DaGF0QXRCb3gudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJjaGF0UHJpdmF0ZSIsCiAgY29tcG9uZW50czogewogICAgQ2hhdE1lc3NhZ2VJdGVtLAogICAgRmlsZVVwbG9hZCwKICAgIENoYXRHcm91cFNpZGUsCiAgICBFbW90aW9uLAogICAgQ2hhdFZvaWNlLAogICAgQ2hhdEhpc3RvcnksCiAgICBDaGF0QXRCb3gKICB9LAogIHByb3BzOiB7CiAgICBjaGF0OiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZyaWVuZDoge30sCiAgICAgIGdyb3VwOiB7fSwKICAgICAgZ3JvdXBNZW1iZXJzOiBbXSwKICAgICAgc2VuZEltYWdlVXJsOiAiIiwKICAgICAgc2VuZEltYWdlRmlsZTogIiIsCiAgICAgIHNob3dWb2ljZTogZmFsc2UsCiAgICAgIC8vIOaYr+WQpuaYvuekuuivremfs+W9leWItuW8ueeqlwogICAgICBzaG93U2lkZTogZmFsc2UsCiAgICAgIC8vIOaYr+WQpuaYvuekuue+pOiBiuS/oeaBr+agjwogICAgICBzaG93SGlzdG9yeTogZmFsc2UsCiAgICAgIC8vIOaYr+WQpuaYvuekuuWOhuWPsuiBiuWkqeiusOW9lQogICAgICBsb2NrTWVzc2FnZTogZmFsc2UsCiAgICAgIC8vIOaYr+WQpumUgeWumuWPkemAge+8jAogICAgICBzaG93TWluSWR4OiAwLAogICAgICAvLyDkuIvmoIfkvY7kuo5zaG93TWluSWR455qE5raI5oGv5LiN5pi+56S677yM5ZCm5YiZ6aG16Z2i5Lya5b6I5Y2hCiAgICAgIGF0U2VhcmNoVGV4dDogIiIsCiAgICAgIGZvY3VzTm9kZTogbnVsbCwKICAgICAgLy8g57yT5a2Y5YWJ5qCH5omA5Zyo6IqC54K5CiAgICAgIGZvY3VzT2Zmc2V0OiBudWxsLAogICAgICAvLyDnvJPlrZjlhYnmoIfmiYDlnKjoioLngrnkvY3nva4KICAgICAgemhMb2NrOiBmYWxzZSAvLyDop6PlhrPkuK3mlofovpPlhaXms5Xop6blj5Hoi7HmlofnmoTmg4XlhrUKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjbG9zZVJlZkJveCgpIHsKICAgICAgdGhpcy4kcmVmcy5lbW9Cb3guY2xvc2UoKTsKICAgICAgdGhpcy4kcmVmcy5hdEJveC5jbG9zZSgpOwogICAgfSwKICAgIG9uS2V5RG93bigpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuYXRCb3guc2hvdykgewogICAgICAgIHRoaXMuJHJlZnMuYXRCb3gubW92ZURvd24oKTsKICAgICAgfQogICAgfSwKICAgIG9uS2V5VXAoKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLmF0Qm94LnNob3cpIHsKICAgICAgICB0aGlzLiRyZWZzLmF0Qm94Lm1vdmVVcCgpOwogICAgICB9CiAgICB9LAogICAgb25LZXlFbnRlcigpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuYXRCb3guc2hvdykgewogICAgICAgIC8vIOmUruebmOaTjeS9nOS4jeS8muiHquWKqOS/ruato+eEpueCue+8jOmcgOimgeaJi+WKqOS/ruatoyzljp/lm6DkuI3or6YKICAgICAgICB0aGlzLmZvY3VzT2Zmc2V0ICs9IHRoaXMuYXRTZWFyY2hUZXh0Lmxlbmd0aDsKICAgICAgICB0aGlzLiRyZWZzLmF0Qm94LnNlbGVjdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoKTsKICAgICAgfQogICAgfSwKICAgIG9uRWRpdEJveEJsdXIoKSB7CiAgICAgIGxldCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7CiAgICAgIC8vIOiusOW9leWFieagh+S9jee9rijngrnlh7tlbW9qaeaXtikKICAgICAgdGhpcy5mb2N1c05vZGUgPSBzZWxlY3Rpb24uZm9jdXNOb2RlOwogICAgICB0aGlzLmZvY3VzT2Zmc2V0ID0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0OwogICAgfSwKICAgIG9uRWRpdG9ySW5wdXQoZSkgewogICAgICAvLyDlpoLmnpzop6blj5EgQAogICAgICBpZiAodGhpcy5jaGF0LnR5cGUgPT0gIkdST1VQIiAmJiAhdGhpcy56aExvY2spIHsKICAgICAgICBpZiAoZS5kYXRhID09ICdAJykgewogICAgICAgICAgLy8g5omT5byA6YCJ5oup5by556qXCiAgICAgICAgICB0aGlzLnNob3dBdEJveChlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGV0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsKICAgICAgICAgIGxldCByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApOwogICAgICAgICAgdGhpcy5mb2N1c05vZGUgPSBzZWxlY3Rpb24uZm9jdXNOb2RlOwogICAgICAgICAgLy8g5oiq5Y+WQOWQjumdoueahOWQjeensOS9nOS4uui/h+a7pOadoeS7tgogICAgICAgICAgbGV0IHN0SWR4ID0gdGhpcy5mb2N1c05vZGUudGV4dENvbnRlbnQubGFzdEluZGV4T2YoJ0AnKTsKICAgICAgICAgIHRoaXMuYXRTZWFyY2hUZXh0ID0gdGhpcy5mb2N1c05vZGUudGV4dENvbnRlbnQuc3Vic3RyaW5nKHN0SWR4ICsgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgb25FZGl0b3JDb21wb3NpdGlvblN0YXJ0KCkgewogICAgICB0aGlzLnpoTG9jayA9IHRydWU7CiAgICB9LAogICAgb25FZGl0b3JDb21wb3NpdGlvbkVuZChlKSB7CiAgICAgIHRoaXMuemhMb2NrID0gZmFsc2U7CiAgICAgIHRoaXMub25FZGl0b3JJbnB1dChlKTsKICAgIH0sCiAgICBzaG93QXRCb3goZSkgewogICAgICB0aGlzLmF0U2VhcmNoVGV4dCA9ICIiOwogICAgICBsZXQgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOwogICAgICBsZXQgcmFuZ2UgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKTsKICAgICAgLy8g6K6w5b2V5YWJ5qCH5omA5Zyo5L2N572uCiAgICAgIHRoaXMuZm9jdXNOb2RlID0gc2VsZWN0aW9uLmZvY3VzTm9kZTsKICAgICAgdGhpcy5mb2N1c09mZnNldCA9IHNlbGVjdGlvbi5mb2N1c09mZnNldDsKICAgICAgLy8g5YWJ5qCH5omA5Zyo5Z2Q5qCHCiAgICAgIGxldCBwb3MgPSByYW5nZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgdGhpcy4kcmVmcy5hdEJveC5vcGVuKHsKICAgICAgICB4OiBwb3MueCwKICAgICAgICB5OiBwb3MueQogICAgICB9KTsKICAgIH0sCiAgICBvbkF0U2VsZWN0KG1lbWJlcikgewogICAgICBsZXQgcmFuZ2UgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VBdCgwKTsKICAgICAgLy8g6YCJ5Lit6L6T5YWl55qEIEB4eCDnrKYKICAgICAgcmFuZ2Uuc2V0U3RhcnQodGhpcy5mb2N1c05vZGUsIHRoaXMuZm9jdXNPZmZzZXQgLSAxIC0gdGhpcy5hdFNlYXJjaFRleHQubGVuZ3RoKTsKICAgICAgcmFuZ2Uuc2V0RW5kKHRoaXMuZm9jdXNOb2RlLCB0aGlzLmZvY3VzT2Zmc2V0KTsKICAgICAgcmFuZ2UuZGVsZXRlQ29udGVudHMoKTsKICAgICAgLy8g5Yib5bu65YWD57Sg6IqC54K5CiAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnU1BBTicpOwogICAgICBlbGVtZW50LmNsYXNzTmFtZSA9ICJhdCI7CiAgICAgIGVsZW1lbnQuZGF0YXNldC5pZCA9IG1lbWJlci51c2VySWQ7CiAgICAgIGVsZW1lbnQuY29udGVudEVkaXRhYmxlID0gJ2ZhbHNlJzsKICAgICAgZWxlbWVudC5pbm5lclRleHQgPSBgQCR7bWVtYmVyLmFsaWFzTmFtZX1gOwogICAgICByYW5nZS5pbnNlcnROb2RlKGVsZW1lbnQpOwogICAgICAvLyDlhYnmoIfnp7vliqjliLDmnKvlsL4KICAgICAgcmFuZ2UuY29sbGFwc2UoKTsKICAgICAgLy8g5o+S5YWl56m65qC8CiAgICAgIGxldCB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdcdTAwQTAnKTsKICAgICAgcmFuZ2UuaW5zZXJ0Tm9kZSh0ZXh0Tm9kZSk7CiAgICAgIHJhbmdlLmNvbGxhcHNlKCk7CiAgICAgIHRoaXMuYXRTZWFyY2hUZXh0ID0gIiI7CiAgICAgIHRoaXMuJHJlZnMuZWRpdEJveC5mb2N1cygpOwogICAgfSwKICAgIGNyZWF0ZVNlbmRUZXh0KCkgewogICAgICBsZXQgc2VuZFRleHQgPSAiIjsKICAgICAgdGhpcy4kcmVmcy5lZGl0Qm94LmNoaWxkTm9kZXMuZm9yRWFjaChub2RlID0+IHsKICAgICAgICBpZiAobm9kZS5ub2RlTmFtZSA9PSAiI3RleHQiKSB7CiAgICAgICAgICBzZW5kVGV4dCArPSB0aGlzLmh0bWwyRXNjYXBlKG5vZGUudGV4dENvbnRlbnQpOwogICAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlTmFtZSA9PSAiU1BBTiIpIHsKICAgICAgICAgIHNlbmRUZXh0ICs9IG5vZGUuaW5uZXJUZXh0OwogICAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlTmFtZSA9PSAiSU1HIikgewogICAgICAgICAgc2VuZFRleHQgKz0gbm9kZS5kYXRhc2V0LmNvZGU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHNlbmRUZXh0OwogICAgfSwKICAgIGh0bWwyRXNjYXBlKHN0ckh0bWwpIHsKICAgICAgcmV0dXJuIHN0ckh0bWwucmVwbGFjZSgvWzw+JiJdL2csIGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICc8JzogJyZsdDsnLAogICAgICAgICAgJz4nOiAnJmd0OycsCiAgICAgICAgICAnJic6ICcmYW1wOycsCiAgICAgICAgICAnIic6ICcmcXVvdDsnCiAgICAgICAgfVtjXTsKICAgICAgfSk7CiAgICB9LAogICAgY3JlYXRlQXRVc2VySWRzKCkgewogICAgICBsZXQgaWRzID0gW107CiAgICAgIHRoaXMuJHJlZnMuZWRpdEJveC5jaGlsZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7CiAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gIlNQQU4iKSB7CiAgICAgICAgICBpZHMucHVzaChub2RlLmRhdGFzZXQuaWQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBpZHM7CiAgICB9LAogICAgb25FZGl0b3JQYXN0ZShlKSB7CiAgICAgIGxldCB0eHQgPSBldmVudC5jbGlwYm9hcmREYXRhLmdldERhdGEoJ1RleHQnKTsKICAgICAgaWYgKHR5cGVvZiB0eHQgPT0gJ3N0cmluZycpIHsKICAgICAgICBsZXQgcmFuZ2UgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VBdCgwKTsKICAgICAgICBsZXQgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0eHQpOwogICAgICAgIHJhbmdlLmluc2VydE5vZGUodGV4dE5vZGUpOwogICAgICAgIHJhbmdlLmNvbGxhcHNlKCk7CiAgICAgIH0KICAgICAgbGV0IGl0ZW1zID0gKGV2ZW50LmNsaXBib2FyZERhdGEgfHwgd2luZG93LmNsaXBib2FyZERhdGEpLml0ZW1zOwogICAgICBpZiAoaXRlbXMubGVuZ3RoKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKGl0ZW1zW2ldLnR5cGUuaW5kZXhPZignaW1hZ2UnKSAhPT0gLTEpIHsKICAgICAgICAgICAgbGV0IGZpbGUgPSBpdGVtc1tpXS5nZXRBc0ZpbGUoKTsKICAgICAgICAgICAgdGhpcy5zZW5kSW1hZ2VGaWxlID0gZmlsZTsKICAgICAgICAgICAgdGhpcy5zZW5kSW1hZ2VVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHJlbW92ZVNlbmRJbWFnZSgpIHsKICAgICAgdGhpcy5zZW5kSW1hZ2VVcmwgPSAiIjsKICAgICAgdGhpcy5zZW5kSW1hZ2VGaWxlID0gbnVsbDsKICAgIH0sCiAgICBvbkltYWdlU3VjY2VzcyhkYXRhLCBmaWxlKSB7CiAgICAgIGxldCBtc2dJbmZvID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmaWxlLm1zZ0luZm8pKTsKICAgICAgbXNnSW5mby5jb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7CiAgICAgIHRoaXMuJGh0dHAoewogICAgICAgIHVybDogdGhpcy5tZXNzYWdlQWN0aW9uLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGRhdGE6IG1zZ0luZm8KICAgICAgfSkudGhlbihpZCA9PiB7CiAgICAgICAgbXNnSW5mby5sb2FkU3RhdHVzID0gJ29rJzsKICAgICAgICBtc2dJbmZvLmlkID0gaWQ7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJpbnNlcnRNZXNzYWdlIiwgbXNnSW5mbyk7CiAgICAgIH0pOwogICAgfSwKICAgIG9uSW1hZ2VGYWlsKGUsIGZpbGUpIHsKICAgICAgbGV0IG1zZ0luZm8gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZpbGUubXNnSW5mbykpOwogICAgICBtc2dJbmZvLmxvYWRTdGF0dXMgPSAnZmFpbCc7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiaW5zZXJ0TWVzc2FnZSIsIG1zZ0luZm8pOwogICAgfSwKICAgIG9uSW1hZ2VCZWZvcmUoZmlsZSkgewogICAgICBsZXQgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTsKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgb3JpZ2luVXJsOiB1cmwsCiAgICAgICAgdGh1bWJVcmw6IHVybAogICAgICB9OwogICAgICBsZXQgbXNnSW5mbyA9IHsKICAgICAgICBpZDogMCwKICAgICAgICBmaWxlSWQ6IGZpbGUudWlkLAogICAgICAgIHNlbmRJZDogdGhpcy5taW5lLmlkLAogICAgICAgIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KGRhdGEpLAogICAgICAgIHNlbmRUaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgICAgICBzZWxmU2VuZDogdHJ1ZSwKICAgICAgICB0eXBlOiAxLAogICAgICAgIGxvYWRTdGF0dXM6ICJsb2FkaW5nIiwKICAgICAgICBzdGF0dXM6IHRoaXMuJGVudW1zLk1FU1NBR0VfU1RBVFVTLlVOU0VORAogICAgICB9OwogICAgICAvLyDloavlhYXlr7nmlrlpZAogICAgICB0aGlzLmZpbGxUYXJnZXRJZChtc2dJbmZvLCB0aGlzLmNoYXQudGFyZ2V0SWQpOwogICAgICAvLyDmj5LlhaXmtojmga8KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJpbnNlcnRNZXNzYWdlIiwgbXNnSW5mbyk7CiAgICAgIC8vIOa7muWKqOWIsOW6lemDqAogICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7CiAgICAgIC8vIOWAn+WKqWZpbGXlr7nosaHkv53lrZgKICAgICAgZmlsZS5tc2dJbmZvID0gbXNnSW5mbzsKICAgIH0sCiAgICBvbkZpbGVTdWNjZXNzKHVybCwgZmlsZSkgewogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBuYW1lOiBmaWxlLm5hbWUsCiAgICAgICAgc2l6ZTogZmlsZS5zaXplLAogICAgICAgIHVybDogdXJsCiAgICAgIH07CiAgICAgIGxldCBtc2dJbmZvID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmaWxlLm1zZ0luZm8pKTsKICAgICAgbXNnSW5mby5jb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7CiAgICAgIHRoaXMuJGh0dHAoewogICAgICAgIHVybDogdGhpcy5tZXNzYWdlQWN0aW9uLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGRhdGE6IG1zZ0luZm8KICAgICAgfSkudGhlbihpZCA9PiB7CiAgICAgICAgbXNnSW5mby5sb2FkU3RhdHVzID0gJ29rJzsKICAgICAgICBtc2dJbmZvLmlkID0gaWQ7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJpbnNlcnRNZXNzYWdlIiwgbXNnSW5mbyk7CiAgICAgIH0pOwogICAgfSwKICAgIG9uRmlsZUZhaWwoZSwgZmlsZSkgewogICAgICBsZXQgbXNnSW5mbyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmlsZS5tc2dJbmZvKSk7CiAgICAgIG1zZ0luZm8ubG9hZFN0YXR1cyA9ICdmYWlsJzsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJpbnNlcnRNZXNzYWdlIiwgbXNnSW5mbyk7CiAgICB9LAogICAgb25GaWxlQmVmb3JlKGZpbGUpIHsKICAgICAgbGV0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7CiAgICAgIGxldCBkYXRhID0gewogICAgICAgIG5hbWU6IGZpbGUubmFtZSwKICAgICAgICBzaXplOiBmaWxlLnNpemUsCiAgICAgICAgdXJsOiB1cmwKICAgICAgfTsKICAgICAgbGV0IG1zZ0luZm8gPSB7CiAgICAgICAgaWQ6IDAsCiAgICAgICAgc2VuZElkOiB0aGlzLm1pbmUuaWQsCiAgICAgICAgY29udGVudDogSlNPTi5zdHJpbmdpZnkoZGF0YSksCiAgICAgICAgc2VuZFRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgIHNlbGZTZW5kOiB0cnVlLAogICAgICAgIHR5cGU6IDIsCiAgICAgICAgbG9hZFN0YXR1czogImxvYWRpbmciLAogICAgICAgIHN0YXR1czogdGhpcy4kZW51bXMuTUVTU0FHRV9TVEFUVVMuVU5TRU5ECiAgICAgIH07CiAgICAgIC8vIOWhq+WFheWvueaWuWlkCiAgICAgIHRoaXMuZmlsbFRhcmdldElkKG1zZ0luZm8sIHRoaXMuY2hhdC50YXJnZXRJZCk7CiAgICAgIC8vIOaPkuWFpea2iOaBrwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoImluc2VydE1lc3NhZ2UiLCBtc2dJbmZvKTsKICAgICAgLy8g5rua5Yqo5Yiw5bqV6YOoCiAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTsKICAgICAgLy8g5YCf5YqpZmlsZeWvueixoemAj+S8oAogICAgICBmaWxlLm1zZ0luZm8gPSBtc2dJbmZvOwogICAgfSwKICAgIG9uQ2xvc2VTaWRlKCkgewogICAgICB0aGlzLnNob3dTaWRlID0gZmFsc2U7CiAgICB9LAogICAgb25TY3JvbGxUb1RvcCgpIHsKICAgICAgLy8g5aSa5bGV56S6MTDmnaHkv6Hmga8KICAgICAgdGhpcy5zaG93TWluSWR4ID0gdGhpcy5zaG93TWluSWR4ID4gMTAgPyB0aGlzLnNob3dNaW5JZHggLSAxMCA6IDA7CiAgICB9LAogICAgb25TY3JvbGwoZSkgewogICAgICBsZXQgc2Nyb2xsRWxlbWVudCA9IGUudGFyZ2V0OwogICAgICBsZXQgc2Nyb2xsVG9wID0gc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3A7CiAgICAgIGlmIChzY3JvbGxUb3AgPCAzMCkgewogICAgICAgIC8vIOWcqOmhtumDqCzkuI3mu5rliqjnmoTmg4XlhrUKICAgICAgICAvLyDlpJrlsZXnpLoyMOadoeS/oeaBrwogICAgICAgIHRoaXMuc2hvd01pbklkeCA9IHRoaXMuc2hvd01pbklkeCA+IDIwID8gdGhpcy5zaG93TWluSWR4IC0gMjAgOiAwOwogICAgICB9CiAgICB9LAogICAgc2hvd0Vtb3Rpb25Cb3goKSB7CiAgICAgIGxldCB3aWR0aCA9IHRoaXMuJHJlZnMuZW1vdGlvbi5vZmZzZXRXaWR0aDsKICAgICAgbGV0IGxlZnQgPSB0aGlzLiRlbG0uZml4TGVmdCh0aGlzLiRyZWZzLmVtb3Rpb24pOwogICAgICBsZXQgdG9wID0gdGhpcy4kZWxtLmZpeFRvcCh0aGlzLiRyZWZzLmVtb3Rpb24pOwogICAgICB0aGlzLiRyZWZzLmVtb0JveC5vcGVuKHsKICAgICAgICB4OiBsZWZ0ICsgd2lkdGggLyAyLAogICAgICAgIHk6IHRvcAogICAgICB9KTsKICAgIH0sCiAgICBvbkVtb3Rpb24oZW1vVGV4dCkgewogICAgICAvLyDkv53mjIHovpPlhaXmoYbnhKbngrkKICAgICAgdGhpcy4kcmVmcy5lZGl0Qm94LmZvY3VzKCk7CiAgICAgIGxldCByYW5nZSA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApOwogICAgICAvLyDmj5LlhaXlhYnmoIfmiYDlnKjkvY3nva4KICAgICAgcmFuZ2Uuc2V0U3RhcnQodGhpcy5mb2N1c05vZGUsIHRoaXMuZm9jdXNPZmZzZXQpOwogICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0lNRycpOwogICAgICBlbGVtZW50LmNsYXNzTmFtZSA9ICJlbW8iOwogICAgICBlbGVtZW50LmRhdGFzZXQuY29kZSA9IGVtb1RleHQ7CiAgICAgIGVsZW1lbnQuY29udGVudEVkaXRhYmxlID0gJ3RydWUnOwogICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgic3JjIiwgdGhpcy4kZW1vLnRleHRUb1VybChlbW9UZXh0KSk7CiAgICAgIC8vIOmAieS4reWFg+e0oOiKgueCuQogICAgICByYW5nZS5pbnNlcnROb2RlKGVsZW1lbnQpOwogICAgICAvLyDlhYnmoIfnp7vliqjliLDmnKvlsL4KICAgICAgcmFuZ2UuY29sbGFwc2UoKTsKICAgIH0sCiAgICBzaG93Vm9pY2VCb3goKSB7CiAgICAgIHRoaXMuc2hvd1ZvaWNlID0gdHJ1ZTsKICAgIH0sCiAgICBjbG9zZVZvaWNlQm94KCkgewogICAgICB0aGlzLnNob3dWb2ljZSA9IGZhbHNlOwogICAgfSwKICAgIHNob3dWaWRlb0JveCgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzaG93Q2hhdFByaXZhdGVWaWRlb0JveCIsIHsKICAgICAgICBmcmllbmQ6IHRoaXMuZnJpZW5kLAogICAgICAgIG1hc3RlcjogdHJ1ZQogICAgICB9KTsKICAgIH0sCiAgICBzaG93SGlzdG9yeUJveCgpIHsKICAgICAgdGhpcy5zaG93SGlzdG9yeSA9IHRydWU7CiAgICB9LAogICAgY2xvc2VIaXN0b3J5Qm94KCkgewogICAgICB0aGlzLnNob3dIaXN0b3J5ID0gZmFsc2U7CiAgICB9LAogICAgb25TZW5kVm9pY2UoZGF0YSkgewogICAgICBsZXQgbXNnSW5mbyA9IHsKICAgICAgICBjb250ZW50OiBKU09OLnN0cmluZ2lmeShkYXRhKSwKICAgICAgICB0eXBlOiAzCiAgICAgIH07CiAgICAgIC8vIOWhq+WFheWvueaWuWlkCiAgICAgIHRoaXMuZmlsbFRhcmdldElkKG1zZ0luZm8sIHRoaXMuY2hhdC50YXJnZXRJZCk7CiAgICAgIHRoaXMuJGh0dHAoewogICAgICAgIHVybDogdGhpcy5tZXNzYWdlQWN0aW9uLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGRhdGE6IG1zZ0luZm8KICAgICAgfSkudGhlbihpZCA9PiB7CiAgICAgICAgbXNnSW5mby5pZCA9IGlkOwogICAgICAgIG1zZ0luZm8uc2VuZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICBtc2dJbmZvLnNlbmRJZCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJTdG9yZS51c2VySW5mby5pZDsKICAgICAgICBtc2dJbmZvLnNlbGZTZW5kID0gdHJ1ZTsKICAgICAgICBtc2dJbmZvLnN0YXR1cyA9IHRoaXMuJGVudW1zLk1FU1NBR0VfU1RBVFVTLlVOU0VORDsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImluc2VydE1lc3NhZ2UiLCBtc2dJbmZvKTsKICAgICAgICAvLyDkv53mjIHovpPlhaXmoYbnhKbngrkKICAgICAgICB0aGlzLiRyZWZzLmVkaXRCb3guZm9jdXMoKTsKICAgICAgICAvLyDmu5rliqjliLDlupXpg6gKICAgICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7CiAgICAgICAgLy8g5YWz6Zet5b2V6Z+z56qX5Y+jCiAgICAgICAgdGhpcy5zaG93Vm9pY2UgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZmlsbFRhcmdldElkKG1zZ0luZm8sIHRhcmdldElkKSB7CiAgICAgIGlmICh0aGlzLmNoYXQudHlwZSA9PSAiR1JPVVAiKSB7CiAgICAgICAgbXNnSW5mby5ncm91cElkID0gdGFyZ2V0SWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbXNnSW5mby5yZWN2SWQgPSB0YXJnZXRJZDsKICAgICAgfQogICAgfSwKICAgIHNlbmRNZXNzYWdlKCkgewogICAgICBpZiAodGhpcy5zZW5kSW1hZ2VGaWxlKSB7CiAgICAgICAgdGhpcy5zZW5kSW1hZ2VNZXNzYWdlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZW5kVGV4dE1lc3NhZ2UoKTsKICAgICAgfQogICAgICAvLyDmtojmga/lt7Lor7sKICAgICAgdGhpcy5yZWFkZWRNZXNzYWdlKCk7CiAgICB9LAogICAgc2VuZEltYWdlTWVzc2FnZSgpIHsKICAgICAgbGV0IGZpbGUgPSB0aGlzLnNlbmRJbWFnZUZpbGU7CiAgICAgIHRoaXMub25JbWFnZUJlZm9yZSh0aGlzLnNlbmRJbWFnZUZpbGUpOwogICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7CiAgICAgIHRoaXMuJGh0dHAucG9zdCgiL2ltYWdlL3VwbG9hZCIsIGZvcm1EYXRhLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgIH0KICAgICAgfSkudGhlbihkYXRhID0+IHsKICAgICAgICB0aGlzLm9uSW1hZ2VTdWNjZXNzKGRhdGEsIGZpbGUpOwogICAgICB9KS5jYXRjaChyZXMgPT4gewogICAgICAgIHRoaXMub25JbWFnZVN1Y2Nlc3MocmVzLCBmaWxlKTsKICAgICAgfSk7CiAgICAgIHRoaXMuc2VuZEltYWdlRmlsZSA9IG51bGw7CiAgICAgIHRoaXMuc2VuZEltYWdlVXJsID0gIiI7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHRoaXMuJHJlZnMuZWRpdEJveC5mb2N1cygpKTsKICAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpOwogICAgfSwKICAgIHNlbmRUZXh0TWVzc2FnZSgpIHsKICAgICAgbGV0IHNlbmRUZXh0ID0gdGhpcy5jcmVhdGVTZW5kVGV4dCgpOwogICAgICBpZiAoIXNlbmRUZXh0LnRyaW0oKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLiRyZWZzLmVkaXRCb3guY2xlOwogICAgICBsZXQgbXNnSW5mbyA9IHsKICAgICAgICBjb250ZW50OiBzZW5kVGV4dCwKICAgICAgICB0eXBlOiAwCiAgICAgIH07CiAgICAgIC8vIOWhq+WFheWvueaWuWlkCiAgICAgIHRoaXMuZmlsbFRhcmdldElkKG1zZ0luZm8sIHRoaXMuY2hhdC50YXJnZXRJZCk7CiAgICAgIC8vIOiiq0DkurrlkZjliJfooagKICAgICAgaWYgKHRoaXMuY2hhdC50eXBlID09ICJHUk9VUCIpIHsKICAgICAgICBtc2dJbmZvLmF0VXNlcklkcyA9IHRoaXMuY3JlYXRlQXRVc2VySWRzKCk7CiAgICAgIH0KICAgICAgdGhpcy5sb2NrTWVzc2FnZSA9IHRydWU7CiAgICAgIHRoaXMuJGh0dHAoewogICAgICAgIHVybDogdGhpcy5tZXNzYWdlQWN0aW9uLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGRhdGE6IG1zZ0luZm8KICAgICAgfSkudGhlbihpZCA9PiB7CiAgICAgICAgbXNnSW5mby5pZCA9IGlkOwogICAgICAgIG1zZ0luZm8uc2VuZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICBtc2dJbmZvLnNlbmRJZCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJTdG9yZS51c2VySW5mby5pZDsKICAgICAgICBtc2dJbmZvLnNlbGZTZW5kID0gdHJ1ZTsKICAgICAgICBtc2dJbmZvLnN0YXR1cyA9IHRoaXMuJGVudW1zLk1FU1NBR0VfU1RBVFVTLlVOU0VORDsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImluc2VydE1lc3NhZ2UiLCBtc2dJbmZvKTsKICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgLy8g6Kej6Zmk6ZSB5a6aCiAgICAgICAgdGhpcy5sb2NrTWVzc2FnZSA9IGZhbHNlOwogICAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTsKICAgICAgICB0aGlzLnJlc2V0RWRpdG9yKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZU1lc3NhZ2UobXNnSW5mbykgewogICAgICB0aGlzLiRjb25maXJtKCfnoa7orqTliKDpmaTmtojmga8/JywgJ+WIoOmZpOa2iOaBrycsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiZGVsZXRlTWVzc2FnZSIsIG1zZ0luZm8pOwogICAgICB9KTsKICAgIH0sCiAgICByZWNhbGxNZXNzYWdlKG1zZ0luZm8pIHsKICAgICAgdGhpcy4kY29uZmlybSgn56Gu6K6k5pKk5Zue5raI5oGvPycsICfmkqTlm57mtojmga8nLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBsZXQgdXJsID0gYC9tZXNzYWdlLyR7dGhpcy5jaGF0LnR5cGUudG9Mb3dlckNhc2UoKX0vcmVjYWxsLyR7bXNnSW5mby5pZH1gOwogICAgICAgIHRoaXMuJGh0dHAoewogICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICBtZXRob2Q6ICdkZWxldGUnCiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIua2iOaBr+W3suaSpOWbniIpOwogICAgICAgICAgbXNnSW5mbyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobXNnSW5mbykpOwogICAgICAgICAgbXNnSW5mby50eXBlID0gMTA7CiAgICAgICAgICBtc2dJbmZvLmNvbnRlbnQgPSAn5L2g5pKk5Zue5LqG5LiA5p2h5raI5oGvJzsKICAgICAgICAgIG1zZ0luZm8uc3RhdHVzID0gdGhpcy4kZW51bXMuTUVTU0FHRV9TVEFUVVMuUkVDQUxMOwogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJpbnNlcnRNZXNzYWdlIiwgbXNnSW5mbyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlYWRlZE1lc3NhZ2UoKSB7CiAgICAgIGlmICh0aGlzLmNoYXQudW5yZWFkQ291bnQgPT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInJlc2V0VW5yZWFkQ291bnQiLCB0aGlzLmNoYXQpOwogICAgICBpZiAodGhpcy5jaGF0LnR5cGUgPT0gIkdST1VQIikgewogICAgICAgIHZhciB1cmwgPSBgL21lc3NhZ2UvZ3JvdXAvcmVhZGVkP2dyb3VwSWQ9JHt0aGlzLmNoYXQudGFyZ2V0SWR9YDsKICAgICAgfSBlbHNlIHsKICAgICAgICB1cmwgPSBgL21lc3NhZ2UvcHJpdmF0ZS9yZWFkZWQ/ZnJpZW5kSWQ9JHt0aGlzLmNoYXQudGFyZ2V0SWR9YDsKICAgICAgfQogICAgICB0aGlzLiRodHRwKHsKICAgICAgICB1cmw6IHVybCwKICAgICAgICBtZXRob2Q6ICdwdXQnCiAgICAgIH0pLnRoZW4oKCkgPT4ge30pOwogICAgfSwKICAgIGxvYWRSZWFkZWQoZklkKSB7CiAgICAgIHRoaXMuJGh0dHAoewogICAgICAgIHVybDogYC9tZXNzYWdlL3ByaXZhdGUvbWF4UmVhZGVkSWQ/ZnJpZW5kSWQ9JHtmSWR9YCwKICAgICAgICBtZXRob2Q6ICdnZXQnCiAgICAgIH0pLnRoZW4oaWQgPT4gewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgicmVhZGVkTWVzc2FnZSIsIHsKICAgICAgICAgIGZyaWVuZElkOiBmSWQsCiAgICAgICAgICBtYXhJZDogaWQKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgbG9hZEdyb3VwKGdyb3VwSWQpIHsKICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgdXJsOiBgL2dyb3VwL2ZpbmQvJHtncm91cElkfWAsCiAgICAgICAgbWV0aG9kOiAnZ2V0JwogICAgICB9KS50aGVuKGdyb3VwID0+IHsKICAgICAgICB0aGlzLmdyb3VwID0gZ3JvdXA7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDaGF0RnJvbUdyb3VwIiwgZ3JvdXApOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlR3JvdXAiLCBncm91cCk7CiAgICAgIH0pOwogICAgICB0aGlzLiRodHRwKHsKICAgICAgICB1cmw6IGAvZ3JvdXAvbWVtYmVycy8ke2dyb3VwSWR9YCwKICAgICAgICBtZXRob2Q6ICdnZXQnCiAgICAgIH0pLnRoZW4oZ3JvdXBNZW1iZXJzID0+IHsKICAgICAgICB0aGlzLmdyb3VwTWVtYmVycyA9IGdyb3VwTWVtYmVyczsKICAgICAgfSk7CiAgICB9LAogICAgbG9hZEZyaWVuZChmcmllbmRJZCkgewogICAgICAvLyDojrflj5blr7nmlrnmnIDmlrDkv6Hmga8KICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgdXJsOiBgL3VzZXIvZmluZC8ke2ZyaWVuZElkfWAsCiAgICAgICAgbWV0aG9kOiAnZ2V0JwogICAgICB9KS50aGVuKGZyaWVuZCA9PiB7CiAgICAgICAgdGhpcy5mcmllbmQgPSBmcmllbmQ7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDaGF0RnJvbUZyaWVuZCIsIGZyaWVuZCk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVGcmllbmQiLCBmcmllbmQpOwogICAgICB9KTsKICAgIH0sCiAgICBzaG93TmFtZShtc2dJbmZvKSB7CiAgICAgIGlmICh0aGlzLmNoYXQudHlwZSA9PSAnR1JPVVAnKSB7CiAgICAgICAgbGV0IG1lbWJlciA9IHRoaXMuZ3JvdXBNZW1iZXJzLmZpbmQobSA9PiBtLnVzZXJJZCA9PSBtc2dJbmZvLnNlbmRJZCk7CiAgICAgICAgcmV0dXJuIG1lbWJlciA/IG1lbWJlci5hbGlhc05hbWUgOiAiIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbXNnSW5mby5zZW5kSWQgPT0gdGhpcy5taW5lLmlkID8gdGhpcy5taW5lLm5pY2tOYW1lIDogdGhpcy5jaGF0LnNob3dOYW1lOwogICAgICB9CiAgICB9LAogICAgaGVhZEltYWdlKG1zZ0luZm8pIHsKICAgICAgaWYgKHRoaXMuY2hhdC50eXBlID09ICdHUk9VUCcpIHsKICAgICAgICBsZXQgbWVtYmVyID0gdGhpcy5ncm91cE1lbWJlcnMuZmluZChtID0+IG0udXNlcklkID09IG1zZ0luZm8uc2VuZElkKTsKICAgICAgICByZXR1cm4gbWVtYmVyID8gbWVtYmVyLmhlYWRJbWFnZSA6ICIiOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBtc2dJbmZvLnNlbmRJZCA9PSB0aGlzLm1pbmUuaWQgPyB0aGlzLm1pbmUuaGVhZEltYWdlVGh1bWIgOiB0aGlzLmNoYXQuaGVhZEltYWdlOwogICAgICB9CiAgICB9LAogICAgcmVzZXRFZGl0b3IoKSB7CiAgICAgIHRoaXMuc2VuZEltYWdlVXJsID0gIiI7CiAgICAgIHRoaXMuc2VuZEltYWdlRmlsZSA9IG51bGw7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLmVkaXRCb3guaW5uZXJIVE1MID0gIiI7CiAgICAgICAgdGhpcy4kcmVmcy5lZGl0Qm94LmZvY3VzKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHNjcm9sbFRvQm90dG9tKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjaGF0U2Nyb2xsQm94Iik7CiAgICAgICAgZGl2LnNjcm9sbFRvcCA9IGRpdi5zY3JvbGxIZWlnaHQ7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG1pbmUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyU3RvcmUudXNlckluZm87CiAgICB9LAogICAgdGl0bGUoKSB7CiAgICAgIGxldCB0aXRsZSA9IHRoaXMuY2hhdC5zaG93TmFtZTsKICAgICAgaWYgKHRoaXMuY2hhdC50eXBlID09ICJHUk9VUCIpIHsKICAgICAgICBsZXQgc2l6ZSA9IHRoaXMuZ3JvdXBNZW1iZXJzLmZpbHRlcihtID0+ICFtLnF1aXQpLmxlbmd0aDsKICAgICAgICB0aXRsZSArPSBgKCR7c2l6ZX0pYDsKICAgICAgfQogICAgICByZXR1cm4gdGl0bGU7CiAgICB9LAogICAgbWVzc2FnZUFjdGlvbigpIHsKICAgICAgcmV0dXJuIGAvbWVzc2FnZS8ke3RoaXMuY2hhdC50eXBlLnRvTG93ZXJDYXNlKCl9L3NlbmRgOwogICAgfSwKICAgIHVucmVhZENvdW50KCkgewogICAgICByZXR1cm4gdGhpcy5jaGF0LnVucmVhZENvdW50OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGNoYXQ6IHsKICAgICAgaGFuZGxlcihuZXdDaGF0LCBvbGRDaGF0KSB7CiAgICAgICAgaWYgKG5ld0NoYXQudGFyZ2V0SWQgPiAwICYmICghb2xkQ2hhdCB8fCBuZXdDaGF0LnR5cGUgIT0gb2xkQ2hhdC50eXBlIHx8IG5ld0NoYXQudGFyZ2V0SWQgIT0gb2xkQ2hhdC50YXJnZXRJZCkpIHsKICAgICAgICAgIGlmICh0aGlzLmNoYXQudHlwZSA9PSAiR1JPVVAiKSB7CiAgICAgICAgICAgIHRoaXMubG9hZEdyb3VwKHRoaXMuY2hhdC50YXJnZXRJZCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmxvYWRGcmllbmQodGhpcy5jaGF0LnRhcmdldElkKTsKICAgICAgICAgICAgLy8g5Yqg6L295bey6K+754q25oCBCiAgICAgICAgICAgIHRoaXMubG9hZFJlYWRlZCh0aGlzLmNoYXQudGFyZ2V0SWQpOwogICAgICAgICAgfQogICAgICAgICAgLy8g5rua5Yiw5bqV6YOoCiAgICAgICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7CiAgICAgICAgICB0aGlzLnNob3dTaWRlID0gZmFsc2U7CiAgICAgICAgICAvLyDmtojmga/lt7Lor7sKICAgICAgICAgIHRoaXMucmVhZGVkTWVzc2FnZSgpOwogICAgICAgICAgLy8g5Yid5aeL54q25oCB5Y+q5pi+56S6MzDmnaHmtojmga8KICAgICAgICAgIGxldCBzaXplID0gdGhpcy5jaGF0Lm1lc3NhZ2VzLmxlbmd0aDsKICAgICAgICAgIHRoaXMuc2hvd01pbklkeCA9IHNpemUgPiAzMCA/IHNpemUgLSAzMCA6IDA7CiAgICAgICAgICAvLyDph43nva7ovpPlhaXmoYYKICAgICAgICAgIHRoaXMucmVzZXRFZGl0b3IoKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwKICAgIHVucmVhZENvdW50OiB7CiAgICAgIGhhbmRsZXIobmV3Q291bnQsIG9sZENvdW50KSB7CiAgICAgICAgaWYgKG5ld0NvdW50ID4gMCkgewogICAgICAgICAgLy8g5ouJ6Iez5bqV6YOoCiAgICAgICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgbGV0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjaGF0U2Nyb2xsQm94Iik7CiAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vblNjcm9sbCk7CiAgfQp9Ow=="},{"version":3,"names":["ChatGroupSide","ChatMessageItem","FileUpload","Emotion","ChatVoice","ChatHistory","ChatAtBox","name","components","props","chat","type","Object","data","friend","group","groupMembers","sendImageUrl","sendImageFile","showVoice","showSide","showHistory","lockMessage","showMinIdx","atSearchText","focusNode","focusOffset","zhLock","methods","closeRefBox","$refs","emoBox","close","atBox","onKeyDown","show","moveDown","onKeyUp","moveUp","onKeyEnter","length","select","sendMessage","onEditBoxBlur","selection","window","getSelection","onEditorInput","e","showAtBox","range","getRangeAt","stIdx","textContent","lastIndexOf","substring","onEditorCompositionStart","onEditorCompositionEnd","pos","getBoundingClientRect","open","x","y","onAtSelect","member","setStart","setEnd","deleteContents","element","document","createElement","className","dataset","id","userId","contentEditable","innerText","aliasName","insertNode","collapse","textNode","createTextNode","editBox","focus","createSendText","sendText","childNodes","forEach","node","nodeName","html2Escape","code","strHtml","replace","c","createAtUserIds","ids","push","onEditorPaste","txt","event","clipboardData","getData","items","i","indexOf","file","getAsFile","URL","createObjectURL","removeSendImage","onImageSuccess","msgInfo","JSON","parse","stringify","content","$http","url","messageAction","method","then","loadStatus","$store","commit","onImageFail","onImageBefore","originUrl","thumbUrl","fileId","uid","sendId","mine","sendTime","Date","getTime","selfSend","status","$enums","MESSAGE_STATUS","UNSEND","fillTargetId","targetId","scrollToBottom","onFileSuccess","size","onFileFail","onFileBefore","onCloseSide","onScrollToTop","onScroll","scrollElement","target","scrollTop","showEmotionBox","width","emotion","offsetWidth","left","$elm","fixLeft","top","fixTop","onEmotion","emoText","setAttribute","$emo","textToUrl","showVoiceBox","closeVoiceBox","showVideoBox","master","showHistoryBox","closeHistoryBox","onSendVoice","state","userStore","userInfo","groupId","recvId","sendImageMessage","sendTextMessage","readedMessage","formData","FormData","append","post","headers","catch","res","$nextTick","trim","cle","atUserIds","finally","resetEditor","deleteMessage","$confirm","confirmButtonText","cancelButtonText","recallMessage","toLowerCase","$message","success","RECALL","unreadCount","loadReaded","fId","friendId","maxId","loadGroup","loadFriend","showName","find","m","nickName","headImage","headImageThumb","innerHTML","div","getElementById","scrollHeight","computed","title","filter","quit","watch","handler","newChat","oldChat","messages","immediate","newCount","oldCount","mounted","addEventListener"],"sources":["src/components/chat/ChatBox.vue"],"sourcesContent":["<template>\n\t<div class=\"chat-box\" @click=\"closeRefBox()\" @mousemove=\"readedMessage()\">\n\t\t<el-container>\n\t\t\t<el-header height=\"60px\" class=\"header\">\n\t\t\t\t<span>{{title}}</span>\n\t\t\t\t<span title=\"群聊信息\" v-show=\"this.chat.type=='GROUP'\" class=\"btn-side el-icon-more\"\n\t\t\t\t\t@click=\"showSide=!showSide\"></span>\n\t\t\t</el-header>\n\t\t\t<el-main style=\"padding: 0;\">\n\t\t\t\t<el-container>\n\t\t\t\t\t<el-container class=\"content-box\">\n\t\t\t\t\t\t<el-main class=\"im-chat-main\" id=\"chatScrollBox\" @scroll=\"onScroll\">\n\t\t\t\t\t\t\t<div class=\"im-chat-box\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li v-for=\"(msgInfo,idx) in chat.messages\" :key=\"idx\">\n\t\t\t\t\t\t\t\t\t\t<chat-message-item v-show=\"idx>=showMinIdx\" :mine=\"msgInfo.sendId == mine.id\"\n\t\t\t\t\t\t\t\t\t\t\t:headImage=\"headImage(msgInfo)\" :showName=\"showName(msgInfo)\"\n\t\t\t\t\t\t\t\t\t\t\t:msgInfo=\"msgInfo\" @delete=\"deleteMessage\" @recall=\"recallMessage\">\n\t\t\t\t\t\t\t\t\t\t</chat-message-item>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-main>\n\t\t\t\t\t\t<el-footer height=\"240px\" class=\"im-chat-footer\">\n\t\t\t\t\t\t\t<div class=\"chat-tool-bar\">\n\t\t\t\t\t\t\t\t<div title=\"表情\" class=\"icon iconfont icon-biaoqing\" ref=\"emotion\"\n\t\t\t\t\t\t\t\t\t@click.stop=\"showEmotionBox()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送图片\">\n\t\t\t\t\t\t\t\t\t<file-upload :action=\"'/image/upload'\" :maxSize=\"5*1024*1024\"\n\t\t\t\t\t\t\t\t\t\t:fileTypes=\"['image/jpeg', 'image/png', 'image/jpg', 'image/webp','image/gif']\"\n\t\t\t\t\t\t\t\t\t\t@before=\"onImageBefore\" @success=\"onImageSuccess\" @fail=\"onImageFail\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-picture-outline\"></i>\n\t\t\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送文件\">\n\t\t\t\t\t\t\t\t\t<file-upload :action=\"'/file/upload'\" :maxSize=\"10*1024*1024\" @before=\"onFileBefore\"\n\t\t\t\t\t\t\t\t\t\t@success=\"onFileSuccess\" @fail=\"onFileFail\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-wallet\"></i>\n\t\t\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送语音\" class=\"el-icon-microphone\" @click=\"showVoiceBox()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"视频聊天\" v-show=\"chat.type=='PRIVATE'\" class=\"el-icon-phone-outline\"\n\t\t\t\t\t\t\t\t\t@click=\"showVideoBox()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"聊天记录\" class=\"el-icon-chat-dot-round\" @click=\"showHistoryBox()\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"send-content-area\">\n\t\t\t\t\t\t\t\t<div contenteditable=\"true\" v-show=\"!sendImageUrl\" ref=\"editBox\" class=\"send-text-area\"\n\t\t\t\t\t\t\t\t\t:disabled=\"lockMessage\" @paste.prevent=\"onEditorPaste\"\n\t\t\t\t\t\t\t\t\t@compositionstart=\"onEditorCompositionStart\"\n\t\t\t\t\t\t\t\t\t@compositionend=\"onEditorCompositionEnd\" @input=\"onEditorInput\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"温馨提示:可以粘贴截图到这里了哦~\" @blur=\"onEditBoxBlur()\" @keydown.down=\"onKeyDown\"\n\t\t\t\t\t\t\t\t\t@keydown.up=\"onKeyUp\" @keydown.enter.prevent=\"onKeyEnter\">\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div v-show=\"sendImageUrl\" class=\"send-image-area\">\n\t\t\t\t\t\t\t\t\t<div class=\"send-image-box\">\n\t\t\t\t\t\t\t\t\t\t<img class=\"send-image\" :src=\"sendImageUrl\" />\n\t\t\t\t\t\t\t\t\t\t<span class=\"send-image-close el-icon-close\" title=\"删除\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"removeSendImage()\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"send-btn-area\">\n\t\t\t\t\t\t\t\t\t<el-button type=\"primary\" style=\"background-color:569CD6\" size=\"large\" @click=\"sendMessage()\">发送</el-button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-footer>\n\t\t\t\t\t</el-container>\n\t\t\t\t\t<el-aside class=\"chat-group-side-box\" width=\"300px\" v-show=\"showSide\">\n\t\t\t\t\t\t<chat-group-side :group=\"group\" :groupMembers=\"groupMembers\" @reload=\"loadGroup(group.id)\">\n\t\t\t\t\t\t</chat-group-side>\n\t\t\t\t\t</el-aside>\n\t\t\t\t</el-container>\n\t\t\t</el-main>\n\t\t\t<emotion ref=\"emoBox\" @emotion=\"onEmotion\"></Emotion>\n\t\t\t<chat-at-box ref=\"atBox\" :ownerId=\"group.ownerId\" :members=\"groupMembers\" :search-text=\"atSearchText\"\n\t\t\t\t@select=\"onAtSelect\"></chat-at-box>\n\t\t\t<chat-voice :visible=\"showVoice\" @close=\"closeVoiceBox\" @send=\"onSendVoice\"></chat-voice>\n\t\t\t<chat-history :visible=\"showHistory\" :chat=\"chat\" :friend=\"friend\" :group=\"group\"\n\t\t\t\t:groupMembers=\"groupMembers\" @close=\"closeHistoryBox\"></chat-history>\n\t\t</el-container>\n\t</div>\n</template>\n\n<script>\n\timport ChatGroupSide from \"./ChatGroupSide.vue\";\n\timport ChatMessageItem from \"./ChatMessageItem.vue\";\n\timport FileUpload from \"../common/FileUpload.vue\";\n\timport Emotion from \"../common/Emotion.vue\";\n\timport ChatVoice from \"./ChatVoice.vue\";\n\timport ChatHistory from \"./ChatHistory.vue\";\n\timport ChatAtBox from \"./ChatAtBox.vue\"\n\n\texport default {\n\t\tname: \"chatPrivate\",\n\t\tcomponents: {\n\t\t\tChatMessageItem,\n\t\t\tFileUpload,\n\t\t\tChatGroupSide,\n\t\t\tEmotion,\n\t\t\tChatVoice,\n\t\t\tChatHistory,\n\t\t\tChatAtBox\n\t\t},\n\t\tprops: {\n\t\t\tchat: {\n\t\t\t\ttype: Object\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tfriend: {},\n\t\t\t\tgroup: {},\n\t\t\t\tgroupMembers: [],\n\t\t\t\tsendImageUrl: \"\",\n\t\t\t\tsendImageFile: \"\",\n\t\t\t\tshowVoice: false, // 是否显示语音录制弹窗\n\t\t\t\tshowSide: false, // 是否显示群聊信息栏\n\t\t\t\tshowHistory: false, // 是否显示历史聊天记录\n\t\t\t\tlockMessage: false, // 是否锁定发送，\n\t\t\t\tshowMinIdx: 0, // 下标低于showMinIdx的消息不显示，否则页面会很卡\n\t\t\t\tatSearchText: \"\",\n\t\t\t\tfocusNode: null, // 缓存光标所在节点\n\t\t\t\tfocusOffset: null, // 缓存光标所在节点位置\n\t\t\t\tzhLock: false // 解决中文输入法触发英文的情况\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tcloseRefBox() {\n\t\t\t\tthis.$refs.emoBox.close();\n\t\t\t\tthis.$refs.atBox.close();\n\t\t\t},\n\t\t\tonKeyDown() {\n\t\t\t\tif (this.$refs.atBox.show) {\n\t\t\t\t\tthis.$refs.atBox.moveDown()\n\t\t\t\t}\n\t\t\t},\n\t\t\tonKeyUp() {\n\t\t\t\tif (this.$refs.atBox.show) {\n\t\t\t\t\tthis.$refs.atBox.moveUp()\n\t\t\t\t}\n\t\t\t},\n\t\t\tonKeyEnter() {\n\t\t\t\tif (this.$refs.atBox.show) {\n\t\t\t\t\t// 键盘操作不会自动修正焦点，需要手动修正,原因不详\n\t\t\t\t\tthis.focusOffset += this.atSearchText.length;\n\t\t\t\t\tthis.$refs.atBox.select();\n\t\t\t\t} else {\n\t\t\t\t\tthis.sendMessage();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonEditBoxBlur() {\n\t\t\t\tlet selection = window.getSelection()\n\t\t\t\t// 记录光标位置(点击emoji时)\n\t\t\t\tthis.focusNode = selection.focusNode;\n\t\t\t\tthis.focusOffset = selection.focusOffset;\n\t\t\t},\n\t\t\tonEditorInput(e) {\n\t\t\t\t// 如果触发 @\n\t\t\t\tif (this.chat.type == \"GROUP\" && !this.zhLock) {\n\t\t\t\t\tif (e.data == '@') {\n\t\t\t\t\t\t// 打开选择弹窗\n\t\t\t\t\t\tthis.showAtBox(e);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet selection = window.getSelection()\n\t\t\t\t\t\tlet range = selection.getRangeAt(0)\n\t\t\t\t\t\tthis.focusNode = selection.focusNode;\n\t\t\t\t\t\t// 截取@后面的名称作为过滤条件\n\t\t\t\t\t\tlet stIdx = this.focusNode.textContent.lastIndexOf('@');\n\t\t\t\t\t\tthis.atSearchText = this.focusNode.textContent.substring(stIdx + 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t},\n\t\t\tonEditorCompositionStart() {\n\t\t\t\tthis.zhLock = true;\n\t\t\t},\n\t\t\tonEditorCompositionEnd(e) {\n\t\t\t\tthis.zhLock = false;\n\t\t\t\tthis.onEditorInput(e);\n\t\t\t},\n\t\t\tshowAtBox(e) {\n\t\t\t\tthis.atSearchText = \"\";\n\t\t\t\tlet selection = window.getSelection()\n\t\t\t\tlet range = selection.getRangeAt(0)\n\t\t\t\t// 记录光标所在位置\n\t\t\t\tthis.focusNode = selection.focusNode;\n\t\t\t\tthis.focusOffset = selection.focusOffset;\n\t\t\t\t// 光标所在坐标\n\t\t\t\tlet pos = range.getBoundingClientRect();\n\t\t\t\tthis.$refs.atBox.open({\n\t\t\t\t\tx: pos.x,\n\t\t\t\t\ty: pos.y\n\t\t\t\t})\n\t\t\t},\n\t\t\tonAtSelect(member) {\n\t\t\t\tlet range = window.getSelection().getRangeAt(0)\n\t\t\t\t// 选中输入的 @xx 符\n\t\t\t\trange.setStart(this.focusNode, this.focusOffset - 1 - this.atSearchText.length)\n\t\t\t\trange.setEnd(this.focusNode, this.focusOffset)\n\t\t\t\trange.deleteContents()\n\t\t\t\t// 创建元素节点\n\t\t\t\tlet element = document.createElement('SPAN')\n\t\t\t\telement.className = \"at\"\n\t\t\t\telement.dataset.id = member.userId;\n\t\t\t\telement.contentEditable = 'false'\n\t\t\t\telement.innerText = `@${member.aliasName}`\n\t\t\t\trange.insertNode(element)\n\t\t\t\t// 光标移动到末尾\n\t\t\t\trange.collapse()\n\t\t\t\t// 插入空格\n\t\t\t\tlet textNode = document.createTextNode('\\u00A0');\n\t\t\t\trange.insertNode(textNode)\n\t\t\t\trange.collapse()\n\t\t\t\tthis.atSearchText = \"\";\n\t\t\t\tthis.$refs.editBox.focus()\n\t\t\t},\n\t\t\tcreateSendText() {\n\t\t\t\tlet sendText = \"\"\n\t\t\t\tthis.$refs.editBox.childNodes.forEach((node) => {\n\t\t\t\t\tif (node.nodeName == \"#text\") {\n\t\t\t\t\t\tsendText += this.html2Escape(node.textContent);\n\t\t\t\t\t} else if (node.nodeName == \"SPAN\") {\n\t\t\t\t\t\tsendText += node.innerText;\n\t\t\t\t\t} else if (node.nodeName == \"IMG\") {\n\t\t\t\t\t\tsendText += node.dataset.code;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn sendText;\n\t\t\t},\n\t\t\thtml2Escape(strHtml) {\n\t\t\t\treturn strHtml.replace(/[<>&\"]/g, function(c) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t'<': '&lt;',\n\t\t\t\t\t\t'>': '&gt;',\n\t\t\t\t\t\t'&': '&amp;',\n\t\t\t\t\t\t'\"': '&quot;'\n\t\t\t\t\t}[c];\n\t\t\t\t});\n\t\t\t},\n\t\t\tcreateAtUserIds() {\n\t\t\t\tlet ids = [];\n\t\t\t\tthis.$refs.editBox.childNodes.forEach((node) => {\n\t\t\t\t\tif (node.nodeName == \"SPAN\") {\n\t\t\t\t\t\tids.push(node.dataset.id);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn ids;\n\t\t\t},\n\t\t\tonEditorPaste(e) {\n\t\t\t\tlet txt = event.clipboardData.getData('Text')\n\t\t\t\tif (typeof(txt) == 'string') {\n\t\t\t\t\tlet range = window.getSelection().getRangeAt(0)\n\t\t\t\t\tlet textNode = document.createTextNode(txt);\n\t\t\t\t\trange.insertNode(textNode)\n\t\t\t\t\trange.collapse();\n\n\t\t\t\t}\n\t\t\t\tlet items = (event.clipboardData || window.clipboardData).items\n\t\t\t\tif (items.length) {\n\t\t\t\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\t\t\t\tif (items[i].type.indexOf('image') !== -1) {\n\t\t\t\t\t\t\tlet file = items[i].getAsFile();\n\t\t\t\t\t\t\tthis.sendImageFile = file;\n\t\t\t\t\t\t\tthis.sendImageUrl = URL.createObjectURL(file);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tremoveSendImage() {\n\t\t\t\tthis.sendImageUrl = \"\";\n\t\t\t\tthis.sendImageFile = null;\n\t\t\t},\n\t\t\tonImageSuccess(data, file) {\n\t\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\t\tmsgInfo.content = JSON.stringify(data);\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: this.messageAction,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: msgInfo\n\t\t\t\t}).then((id) => {\n\t\t\t\t\tmsgInfo.loadStatus = 'ok';\n\t\t\t\t\tmsgInfo.id = id;\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t})\n\t\t\t},\n\t\t\tonImageFail(e, file) {\n\t\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\t\tmsgInfo.loadStatus = 'fail';\n\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t},\n\t\t\tonImageBefore(file) {\n\t\t\t\tlet url = URL.createObjectURL(file);\n\t\t\t\tlet data = {\n\t\t\t\t\toriginUrl: url,\n\t\t\t\t\tthumbUrl: url\n\t\t\t\t}\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tfileId: file.uid,\n\t\t\t\t\tsendId: this.mine.id,\n\t\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\t\tselfSend: true,\n\t\t\t\t\ttype: 1,\n\t\t\t\t\tloadStatus: \"loading\",\n\t\t\t\t\tstatus: this.$enums.MESSAGE_STATUS.UNSEND\n\t\t\t\t}\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\t// 插入消息\n\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t// 滚动到底部\n\t\t\t\tthis.scrollToBottom();\n\t\t\t\t// 借助file对象保存\n\t\t\t\tfile.msgInfo = msgInfo;\n\t\t\t},\n\t\t\tonFileSuccess(url, file) {\n\t\t\t\tlet data = {\n\t\t\t\t\tname: file.name,\n\t\t\t\t\tsize: file.size,\n\t\t\t\t\turl: url\n\t\t\t\t}\n\t\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\t\tmsgInfo.content = JSON.stringify(data);\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: this.messageAction,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: msgInfo\n\t\t\t\t}).then((id) => {\n\t\t\t\t\tmsgInfo.loadStatus = 'ok';\n\t\t\t\t\tmsgInfo.id = id;\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t})\n\t\t\t},\n\t\t\tonFileFail(e, file) {\n\t\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\t\tmsgInfo.loadStatus = 'fail';\n\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t},\n\t\t\tonFileBefore(file) {\n\t\t\t\tlet url = URL.createObjectURL(file);\n\t\t\t\tlet data = {\n\t\t\t\t\tname: file.name,\n\t\t\t\t\tsize: file.size,\n\t\t\t\t\turl: url\n\t\t\t\t}\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tsendId: this.mine.id,\n\t\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\t\tselfSend: true,\n\t\t\t\t\ttype: 2,\n\t\t\t\t\tloadStatus: \"loading\",\n\t\t\t\t\tstatus: this.$enums.MESSAGE_STATUS.UNSEND\n\t\t\t\t}\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\t// 插入消息\n\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t// 滚动到底部\n\t\t\t\tthis.scrollToBottom();\n\t\t\t\t// 借助file对象透传\n\t\t\t\tfile.msgInfo = msgInfo;\n\t\t\t},\n\t\t\tonCloseSide() {\n\t\t\t\tthis.showSide = false;\n\t\t\t},\n\t\t\tonScrollToTop() {\n\t\t\t\t// 多展示10条信息\n\t\t\t\tthis.showMinIdx = this.showMinIdx > 10 ? this.showMinIdx - 10 : 0;\n\t\t\t},\n\t\t\tonScroll(e) {\n\t\t\t\tlet scrollElement = e.target\n\t\t\t\tlet scrollTop = scrollElement.scrollTop\n\t\t\t\tif (scrollTop < 30) { // 在顶部,不滚动的情况\n\t\t\t\t\t// 多展示20条信息\n\t\t\t\t\tthis.showMinIdx = this.showMinIdx > 20 ? this.showMinIdx - 20 : 0;\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowEmotionBox() {\n\t\t\t\tlet width = this.$refs.emotion.offsetWidth;\n\t\t\t\tlet left = this.$elm.fixLeft(this.$refs.emotion);\n\t\t\t\tlet top = this.$elm.fixTop(this.$refs.emotion);\n\t\t\t\tthis.$refs.emoBox.open({\n\t\t\t\t\tx: left + width / 2,\n\t\t\t\t\ty: top\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tonEmotion(emoText) {\n\t\t\t\t// 保持输入框焦点\n\t\t\t\tthis.$refs.editBox.focus();\n\t\t\t\tlet range = window.getSelection().getRangeAt(0);\n\t\t\t\t// 插入光标所在位置\n\t\t\t\trange.setStart(this.focusNode, this.focusOffset)\n\t\t\t\tlet element = document.createElement('IMG')\n\t\t\t\telement.className = \"emo\"\n\t\t\t\telement.dataset.code = emoText;\n\t\t\t\telement.contentEditable = 'true'\n\t\t\t\telement.setAttribute(\"src\", this.$emo.textToUrl(emoText));\n\t\t\t\t// 选中元素节点\n\t\t\t\trange.insertNode(element)\n\t\t\t\t// 光标移动到末尾\n\t\t\t\trange.collapse()\n\n\t\t\t},\n\t\t\tshowVoiceBox() {\n\t\t\t\tthis.showVoice = true;\n\t\t\t},\n\t\t\tcloseVoiceBox() {\n\t\t\t\tthis.showVoice = false;\n\t\t\t},\n\t\t\tshowVideoBox() {\n\t\t\t\tthis.$store.commit(\"showChatPrivateVideoBox\", {\n\t\t\t\t\tfriend: this.friend,\n\t\t\t\t\tmaster: true\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowHistoryBox() {\n\t\t\t\tthis.showHistory = true;\n\t\t\t},\n\t\t\tcloseHistoryBox() {\n\t\t\t\tthis.showHistory = false;\n\t\t\t},\n\t\t\tonSendVoice(data) {\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\t\ttype: 3\n\t\t\t\t}\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: this.messageAction,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: msgInfo\n\t\t\t\t}).then((id) => {\n\t\t\t\t\tmsgInfo.id = id;\n\t\t\t\t\tmsgInfo.sendTime = new Date().getTime();\n\t\t\t\t\tmsgInfo.sendId = this.$store.state.userStore.userInfo.id;\n\t\t\t\t\tmsgInfo.selfSend = true;\n\t\t\t\t\tmsgInfo.status = this.$enums.MESSAGE_STATUS.UNSEND;\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t\t// 保持输入框焦点\n\t\t\t\t\tthis.$refs.editBox.focus();\n\t\t\t\t\t// 滚动到底部\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t// 关闭录音窗口\n\t\t\t\t\tthis.showVoice = false;\n\t\t\t\t})\n\t\t\t},\n\t\t\tfillTargetId(msgInfo, targetId) {\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tmsgInfo.groupId = targetId;\n\t\t\t\t} else {\n\t\t\t\t\tmsgInfo.recvId = targetId;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsendMessage() {\n\t\t\t\tif (this.sendImageFile) {\n\t\t\t\t\tthis.sendImageMessage();\n\t\t\t\t} else {\n\t\t\t\t\tthis.sendTextMessage();\n\t\t\t\t}\n\t\t\t\t// 消息已读\n\t\t\t\tthis.readedMessage()\n\t\t\t},\n\t\t\tsendImageMessage() {\n\t\t\t\tlet file = this.sendImageFile;\n\t\t\t\tthis.onImageBefore(this.sendImageFile);\n\t\t\t\tlet formData = new FormData()\n\t\t\t\tformData.append('file', file)\n\t\t\t\tthis.$http.post(\"/image/upload\", formData, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t\t}\n\t\t\t\t}).then((data) => {\n\t\t\t\t\tthis.onImageSuccess(data, file);\n\t\t\t\t}).catch((res) => {\n\t\t\t\t\tthis.onImageSuccess(res, file);\n\t\t\t\t})\n\t\t\t\tthis.sendImageFile = null;\n\t\t\t\tthis.sendImageUrl = \"\";\n\t\t\t\tthis.$nextTick(() => this.$refs.editBox.focus());\n\t\t\t\tthis.scrollToBottom();\n\t\t\t},\n\t\t\tsendTextMessage() {\n\t\t\t\tlet sendText = this.createSendText();\n\t\t\t\tif (!sendText.trim()) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.$refs.editBox.cle\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tcontent: sendText,\n\t\t\t\t\ttype: 0\n\t\t\t\t}\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\t// 被@人员列表\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tmsgInfo.atUserIds = this.createAtUserIds();\n\t\t\t\t}\n\t\t\t\tthis.lockMessage = true;\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: this.messageAction,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: msgInfo\n\t\t\t\t}).then((id) => {\n\t\t\t\t\tmsgInfo.id = id;\n\t\t\t\t\tmsgInfo.sendTime = new Date().getTime();\n\t\t\t\t\tmsgInfo.sendId = this.$store.state.userStore.userInfo.id;\n\t\t\t\t\tmsgInfo.selfSend = true;\n\t\t\t\t\tmsgInfo.status = this.$enums.MESSAGE_STATUS.UNSEND;\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t}).finally(() => {\n\t\t\t\t\t// 解除锁定\n\t\t\t\t\tthis.lockMessage = false;\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\tthis.resetEditor();\n\t\t\t\t});\n\n\t\t\t},\n\t\t\tdeleteMessage(msgInfo) {\n\t\t\t\tthis.$confirm('确认删除消息?', '删除消息', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$store.commit(\"deleteMessage\", msgInfo);\n\t\t\t\t});\n\t\t\t},\n\t\t\trecallMessage(msgInfo) {\n\t\t\t\tthis.$confirm('确认撤回消息?', '撤回消息', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tlet url = `/message/${this.chat.type.toLowerCase()}/recall/${msgInfo.id}`\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: url,\n\t\t\t\t\t\tmethod: 'delete'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.$message.success(\"消息已撤回\");\n\t\t\t\t\t\tmsgInfo = JSON.parse(JSON.stringify(msgInfo));\n\t\t\t\t\t\tmsgInfo.type = 10;\n\t\t\t\t\t\tmsgInfo.content = '你撤回了一条消息';\n\t\t\t\t\t\tmsgInfo.status = this.$enums.MESSAGE_STATUS.RECALL;\n\t\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t},\n\t\t\treadedMessage() {\n\t\t\t\tif (this.chat.unreadCount == 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.$store.commit(\"resetUnreadCount\", this.chat)\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tvar url = `/message/group/readed?groupId=${this.chat.targetId}`\n\t\t\t\t} else {\n\t\t\t\t\turl = `/message/private/readed?friendId=${this.chat.targetId}`\n\t\t\t\t}\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: url,\n\t\t\t\t\tmethod: 'put'\n\t\t\t\t}).then(() => {})\n\t\t\t},\n\t\t\tloadReaded(fId) {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/message/private/maxReadedId?friendId=${fId}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((id) => {\n\t\t\t\t\tthis.$store.commit(\"readedMessage\", {\n\t\t\t\t\t\tfriendId: fId,\n\t\t\t\t\t\tmaxId: id\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tloadGroup(groupId) {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/find/${groupId}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((group) => {\n\t\t\t\t\tthis.group = group;\n\t\t\t\t\tthis.$store.commit(\"updateChatFromGroup\", group);\n\t\t\t\t\tthis.$store.commit(\"updateGroup\", group);\n\n\t\t\t\t});\n\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/members/${groupId}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((groupMembers) => {\n\t\t\t\t\tthis.groupMembers = groupMembers;\n\t\t\t\t});\n\t\t\t},\n\t\t\tloadFriend(friendId) {\n\t\t\t\t// 获取对方最新信息\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/user/find/${friendId}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((friend) => {\n\t\t\t\t\tthis.friend = friend;\n\t\t\t\t\tthis.$store.commit(\"updateChatFromFriend\", friend);\n\t\t\t\t\tthis.$store.commit(\"updateFriend\", friend);\n\t\t\t\t})\n\t\t\t},\n\t\t\tshowName(msgInfo) {\n\t\t\t\tif (this.chat.type == 'GROUP') {\n\t\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == msgInfo.sendId);\n\t\t\t\t\treturn member ? member.aliasName : \"\";\n\t\t\t\t} else {\n\t\t\t\t\treturn msgInfo.sendId == this.mine.id ? this.mine.nickName : this.chat.showName\n\t\t\t\t}\n\n\t\t\t},\n\t\t\theadImage(msgInfo) {\n\t\t\t\tif (this.chat.type == 'GROUP') {\n\t\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == msgInfo.sendId);\n\t\t\t\t\treturn member ? member.headImage : \"\";\n\t\t\t\t} else {\n\t\t\t\t\treturn msgInfo.sendId == this.mine.id ? this.mine.headImageThumb : this.chat.headImage\n\t\t\t\t}\n\t\t\t},\n\t\t\tresetEditor() {\n\t\t\t\tthis.sendImageUrl = \"\";\n\t\t\t\tthis.sendImageFile = null;\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.$refs.editBox.innerHTML = \"\";\n\t\t\t\t\tthis.$refs.editBox.focus();\n\t\t\t\t});\n\t\t\t},\n\t\t\tscrollToBottom() {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tlet div = document.getElementById(\"chatScrollBox\");\n\t\t\t\t\tdiv.scrollTop = div.scrollHeight;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tmine() {\n\t\t\t\treturn this.$store.state.userStore.userInfo;\n\t\t\t},\n\t\t\ttitle() {\n\t\t\t\tlet title = this.chat.showName;\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tlet size = this.groupMembers.filter(m => !m.quit).length;\n\t\t\t\t\ttitle += `(${size})`;\n\t\t\t\t}\n\t\t\t\treturn title;\n\t\t\t},\n\t\t\tmessageAction() {\n\t\t\t\treturn `/message/${this.chat.type.toLowerCase()}/send`;\n\t\t\t},\n\t\t\tunreadCount() {\n\t\t\t\treturn this.chat.unreadCount;\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tchat: {\n\t\t\t\thandler(newChat, oldChat) {\n\t\t\t\t\tif (newChat.targetId > 0 && (!oldChat || newChat.type != oldChat.type ||\n\t\t\t\t\t\t\tnewChat.targetId != oldChat.targetId)) {\n\t\t\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\t\t\tthis.loadGroup(this.chat.targetId);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.loadFriend(this.chat.targetId);\n\t\t\t\t\t\t\t// 加载已读状态\n\t\t\t\t\t\t\tthis.loadReaded(this.chat.targetId)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 滚到底部\n\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\tthis.showSide = false;\n\t\t\t\t\t\t// 消息已读\n\t\t\t\t\t\tthis.readedMessage()\n\t\t\t\t\t\t// 初始状态只显示30条消息\n\t\t\t\t\t\tlet size = this.chat.messages.length;\n\t\t\t\t\t\tthis.showMinIdx = size > 30 ? size - 30 : 0;\n\t\t\t\t\t\t// 重置输入框\n\t\t\t\t\t\tthis.resetEditor();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t},\n\t\t\tunreadCount: {\n\t\t\t\thandler(newCount, oldCount) {\n\t\t\t\t\tif (newCount > 0) {\n\t\t\t\t\t\t// 拉至底部\n\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tlet div = document.getElementById(\"chatScrollBox\");\n\t\t\tdiv.addEventListener('scroll', this.onScroll)\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n.header{\n\tcolor: rgb(152, 152, 152);\n\tletter-spacing: 1px;\n\n\nbackground-image: linear-gradient(0deg, rgb(253, 250, 250), #e2e9f7);\n}\n\t.chat-box {\n\t\tfont-family: Calibri, sans-serif;\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tbackground-image: url(\"../../assets/image/输入框背景.jpg\");\n\t\tbackground-size: cover;\n\t\tbackground-position: center;\n\n\t\t.el-header {\n\t\t\tpadding: 5px;\n\t\t\tbackground-color: white;\n\t\t\tline-height: 50px;\n\t\t\tfont-size: 20px;\n\t\t\tfont-weight: 600;\n\t\t\t// border: #dddddd solid 1px;\n\t\t\t// box-shadow: 3px 1px 3px #222222b0;\n\n\t\t\t.btn-side {\n\t\t\t\tposition: absolute;\n\t\t\t\tright: 20px;\n\t\t\t\tline-height: 60px;\n\t\t\t\tfont-size: 22px;\n\t\t\t\tcursor: pointer;\n\n\t\t\t\t&:hover {\n\t\t\t\t\tfont-size: 30px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t.im-chat-main {\n\t\t\tpadding: 0;\n\t\t\t// border: #dddddd solid 1px;\n\n\t\t\t.im-chat-box {\n\t\t\t\t>ul {\n\t\t\t\t\tpadding: 0 20px;\n\n\t\t\t\t\tli {\n\t\t\t\t\t\tlist-style-type: none;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.im-chat-footer {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tpadding: 0;\n\t\t\t// border: #dddddd solid 1px;\n\n\t\t\t.chat-tool-bar {\n\n\t\t\t\tdisplay: flex;\n\t\t\t\tposition: relative;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 50px;\n\t\t\t\ttext-align: left;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tborder-top: 1px solid #ddd;\n\t\t\t\tpadding: 5px;\n\n\t\t\t\t>div {\n\t\t\t\t\tmargin-left: 20px;\n\t\t\t\t\tfont-size: 35px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tcolor: #8b8b8b;\n\t\t\t\t\tline-height: 40px;\n\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\tcolor: black;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.send-content-area {\n\t\t\t\tposition: relative;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\theight: 100%;\n\t\t\t\tbackground-color: white !important;\n\n\n\t\t\t\t.send-text-area {\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\tpadding: 5px;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tresize: none;\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\tcolor: black;\n\t\t\t\t\toutline-color: rgba(219, 235, 249, 0.61);\n\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\tline-height: 30 px;\n\n\t\t\t\t\t.at {\n\t\t\t\t\t\tcolor: blue;\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t}\n\n\t\t\t\t\t.emo {\n\t\t\t\t\t\twidth: 30px;\n\t\t\t\t\t\theight: 30px;\n\t\t\t\t\t\tvertical-align: bottom;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.send-image-area {\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\tborder: #53a0e7 solid 1px;\n\n\t\t\t\t\t.send-image-box {\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\tdisplay: inline-block;\n\n\t\t\t\t\t\t.send-image {\n\t\t\t\t\t\t\tmax-height: 180px;\n\t\t\t\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\t\t\t\tborder-radius: 2%;\n\t\t\t\t\t\t\tmargin: 2px;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.send-image-close {\n\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\tpadding: 3px;\n\t\t\t\t\t\t\tright: 7px;\n\t\t\t\t\t\t\ttop: 7px;\n\t\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\tfont-size: 15px;\n\t\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\t\tbackground-color: #aaa;\n\t\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t.send-btn-area {\n\t\t\t\t\tpadding: 10px;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\t.chat-group-side-box {\n\t\t\tborder: #dddddd solid 1px;\n\t\t\tanimation: rtl-drawer-in .3s 1ms;\n\t\t}\n\t}\n</style>"],"mappings":"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","ignoreList":[]}]}