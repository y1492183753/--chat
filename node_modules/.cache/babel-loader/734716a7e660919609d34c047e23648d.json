{"remainingRequest":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\im-ui\\src\\components\\friend\\AddFriend.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\im-ui\\src\\components\\friend\\AddFriend.vue","mtime":1703809564000},{"path":"D:\\im-ui\\babel.config.js","mtime":1703809560000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1710142166000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1710142168000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEhlYWRJbWFnZSBmcm9tICcuLi9jb21tb24vSGVhZEltYWdlLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYWRkRnJpZW5kIiwKICBjb21wb25lbnRzOiB7CiAgICBIZWFkSW1hZ2UKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyczogW10sCiAgICAgIHNlYXJjaFRleHQ6ICIiCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIGRpYWxvZ1Zpc2libGU6IHsKICAgICAgdHlwZTogQm9vbGVhbgogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb25DbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2xvc2UiKTsKICAgIH0sCiAgICBvblNlYXJjaCgpIHsKICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgdXJsOiAiL3VzZXIvZmluZEJ5TmFtZSIsCiAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIG5hbWU6IHRoaXMuc2VhcmNoVGV4dAogICAgICAgIH0KICAgICAgfSkudGhlbihkYXRhID0+IHsKICAgICAgICB0aGlzLnVzZXJzID0gZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgb25BZGRGcmllbmQodXNlcikgewogICAgICB0aGlzLiRodHRwKHsKICAgICAgICB1cmw6ICIvZnJpZW5kL2FkZCIsCiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBmcmllbmRJZDogdXNlci5pZAogICAgICAgIH0KICAgICAgfSkudGhlbihkYXRhID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIua3u+WKoOaIkOWKn++8jOWvueaWueW3suaIkOS4uuaCqOeahOWlveWPiyIpOwogICAgICAgIGxldCBmcmllbmQgPSB7CiAgICAgICAgICBpZDogdXNlci5pZCwKICAgICAgICAgIG5pY2tOYW1lOiB1c2VyLm5pY2tOYW1lLAogICAgICAgICAgaGVhZEltYWdlOiB1c2VyLmhlYWRJbWFnZSwKICAgICAgICAgIG9ubGluZTogdXNlci5vbmxpbmUKICAgICAgICB9OwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiYWRkRnJpZW5kIiwgZnJpZW5kKTsKICAgICAgfSk7CiAgICB9LAogICAgaXNGcmllbmQodXNlcklkKSB7CiAgICAgIGxldCBmcmllbmRzID0gdGhpcy4kc3RvcmUuc3RhdGUuZnJpZW5kU3RvcmUuZnJpZW5kczsKICAgICAgbGV0IGZyaWVuZCA9IGZyaWVuZHMuZmluZChmID0+IGYuaWQgPT0gdXNlcklkKTsKICAgICAgcmV0dXJuIGZyaWVuZCAhPSB1bmRlZmluZWQ7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["HeadImage","name","components","data","users","searchText","props","dialogVisible","type","Boolean","methods","onClose","$emit","onSearch","$http","url","method","params","then","onAddFriend","user","friendId","id","$message","success","friend","nickName","headImage","online","$store","commit","isFriend","userId","friends","state","friendStore","find","f","undefined"],"sources":["src/components/friend/AddFriend.vue"],"sourcesContent":["<template>\n\t<el-dialog title=\"添加好友\" :visible.sync=\"dialogVisible\" width=\"30%\" :before-close=\"onClose\">\n\t\t<el-input  placeholder=\"输入用户名或昵称,最多展示20条\" class=\"input-with-select\" v-model=\"searchText\" @keyup.enter.native=\"onSearch()\">\n\t\t\t<el-button slot=\"append\" icon=\"el-icon-search\" @click=\"onSearch()\"></el-button>\n\t\t</el-input>\n\t\t<el-scrollbar style=\"height:400px\">\n\t\t\t<div v-for=\"(user) in users\" :key=\"user.id\" v-show=\"user.id != $store.state.userStore.userInfo.id\">\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<div class=\"avatar\">\n\t\t\t\t\t\t<head-image :name=\"user.nickName\" \n\t\t\t\t\t\t:url=\"user.headImage\"\n\t\t\t\t\t\t:online=\"user.online\"\n\t\t\t\t\t\t></head-image>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"add-friend-text\">\n\t\t\t\t\t\t<div class=\"text-user-name\">\n\t\t\t\t\t\t\t<div>{{user.userName}}</div>\n\t\t\t\t\t\t\t<div :class=\"user.online ? 'online-status  online':'online-status'\">{{ user.online?\"[在线]\":\"[离线]\"}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"text-nick-name\">\n\t\t\t\t\t\t\t<div>昵称:{{user.nickName}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t <el-button type=\"success\" size=\"small\" v-show=\"!isFriend(user.id)\" plain @click=\"onAddFriend(user)\">添加</el-button>\n\t\t\t\t\t <el-button type=\"info\" size=\"small\" v-show=\"isFriend(user.id)\" plain disabled>已添加</el-button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-scrollbar>\n\t</el-dialog>\n</template>\n\n<script>\n\timport HeadImage from '../common/HeadImage.vue'\n\t\n\t\n\texport default {\n\t\tname: \"addFriend\",\n\t\tcomponents:{HeadImage},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tusers: [],\n\t\t\t\tsearchText: \"\"\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tdialogVisible: {\n\t\t\t\ttype: Boolean\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tonClose() {\n\t\t\t\tthis.$emit(\"close\");\n\t\t\t},\n\t\t\tonSearch() {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: \"/user/findByName\",\n\t\t\t\t\tmethod: \"get\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tname: this.searchText\n\t\t\t\t\t}\n\t\t\t\t}).then((data) => {\n\t\t\t\t\tthis.users = data;\n\t\t\t\t})\n\t\t\t},\n\t\t\tonAddFriend(user){\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: \"/friend/add\",\n\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tfriendId: user.id\n\t\t\t\t\t}\n\t\t\t\t}).then((data) => {\n\t\t\t\t\tthis.$message.success(\"添加成功，对方已成为您的好友\");\n\t\t\t\t\tlet friend = {\n\t\t\t\t\t\tid:user.id,\n\t\t\t\t\t\tnickName: user.nickName,\n\t\t\t\t\t\theadImage: user.headImage,\n\t\t\t\t\t\tonline: user.online\n\t\t\t\t\t}\n\t\t\t\t\tthis.$store.commit(\"addFriend\",friend);\n\t\t\t\t})\n\t\t\t},\n\t\t\tisFriend(userId){\n\t\t\t\tlet friends = this.$store.state.friendStore.friends;\n\t\t\t\tlet friend = friends.find((f)=> f.id==userId);\t\t\t\n\t\t\t\treturn friend != undefined;\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style  lang=\"scss\">\n\t.el-dialog {\n\t\tmin-width: 400px;\n\t}\n\t.item {\n\t\theight: 65px;\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\tpadding-left: 15px;\n\t\talign-items: center;\n\t\tpadding-right: 25px;\n\t\t\n\t\t.add-friend-text {\n\t\t\tmargin-left: 15px;\n\t\t\tflex: 3;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tflex-shrink: 0;\n\t\t\toverflow: hidden;\n\t\t\n\t\t\t.text-user-name{\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\tfont-weight: 600;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tline-height: 25px;\n\t\t\n\t\t\t\t.online-status{\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t&.online{\n\t\t\t\t\t\tcolor: #5fb878;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.text-nick-name{\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\tfont-size: 12px;\n\t\t\t\tline-height: 20px;\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n</style>\n"],"mappings":"AAgCA,OAAAA,SAAA;AAGA;EACAC,IAAA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACA;MACAC,KAAA;MACAC,UAAA;IACA;EACA;EACAC,KAAA;IACAC,aAAA;MACAC,IAAA,EAAAC;IACA;EACA;EACAC,OAAA;IACAC,QAAA;MACA,KAAAC,KAAA;IACA;IACAC,SAAA;MACA,KAAAC,KAAA;QACAC,GAAA;QACAC,MAAA;QACAC,MAAA;UACAhB,IAAA,OAAAI;QACA;MACA,GAAAa,IAAA,CAAAf,IAAA;QACA,KAAAC,KAAA,GAAAD,IAAA;MACA;IACA;IACAgB,YAAAC,IAAA;MACA,KAAAN,KAAA;QACAC,GAAA;QACAC,MAAA;QACAC,MAAA;UACAI,QAAA,EAAAD,IAAA,CAAAE;QACA;MACA,GAAAJ,IAAA,CAAAf,IAAA;QACA,KAAAoB,QAAA,CAAAC,OAAA;QACA,IAAAC,MAAA;UACAH,EAAA,EAAAF,IAAA,CAAAE,EAAA;UACAI,QAAA,EAAAN,IAAA,CAAAM,QAAA;UACAC,SAAA,EAAAP,IAAA,CAAAO,SAAA;UACAC,MAAA,EAAAR,IAAA,CAAAQ;QACA;QACA,KAAAC,MAAA,CAAAC,MAAA,cAAAL,MAAA;MACA;IACA;IACAM,SAAAC,MAAA;MACA,IAAAC,OAAA,QAAAJ,MAAA,CAAAK,KAAA,CAAAC,WAAA,CAAAF,OAAA;MACA,IAAAR,MAAA,GAAAQ,OAAA,CAAAG,IAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAf,EAAA,IAAAU,MAAA;MACA,OAAAP,MAAA,IAAAa,SAAA;IACA;EACA;AACA","ignoreList":[]}]}