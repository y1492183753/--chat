{"remainingRequest":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\im-ui\\src\\components\\chat\\ChatAtBox.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\im-ui\\src\\components\\chat\\ChatAtBox.vue","mtime":1703809562000},{"path":"D:\\im-ui\\babel.config.js","mtime":1703809560000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1710142166000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1710142168000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBIZWFkSW1hZ2UgZnJvbSAnLi4vY29tbW9uL0hlYWRJbWFnZS52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImNoYXRBdEJveCIsCiAgY29tcG9uZW50czogewogICAgSGVhZEltYWdlCiAgfSwKICBwcm9wczogewogICAgc2VhcmNoVGV4dDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgb3duZXJJZDogewogICAgICB0eXBlOiBOdW1iZXIKICAgIH0sCiAgICBtZW1iZXJzOiB7CiAgICAgIHR5cGU6IEFycmF5CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIHBvczogewogICAgICAgIHg6IDAsCiAgICAgICAgeTogMAogICAgICB9LAogICAgICBhY3RpdmVJZHg6IDAsCiAgICAgIHNob3dNZW1iZXJzOiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsVG9wID0gMDsKICAgICAgdGhpcy5zaG93TWVtYmVycyA9IFtdOwogICAgICBsZXQgdXNlcklkID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlclN0b3JlLnVzZXJJbmZvLmlkOwogICAgICBsZXQgbmFtZSA9ICLlhajkvZPmiJDlkZgiOwogICAgICBpZiAodGhpcy5vd25lcklkID09IHVzZXJJZCAmJiBuYW1lLnN0YXJ0c1dpdGgodGhpcy5zZWFyY2hUZXh0KSkgewogICAgICAgIHRoaXMuc2hvd01lbWJlcnMucHVzaCh7CiAgICAgICAgICB1c2VySWQ6IC0xLAogICAgICAgICAgYWxpYXNOYW1lOiBuYW1lCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy5tZW1iZXJzLmZvckVhY2gobSA9PiB7CiAgICAgICAgaWYgKG0udXNlcklkICE9IHVzZXJJZCAmJiBtLmFsaWFzTmFtZS5zdGFydHNXaXRoKHRoaXMuc2VhcmNoVGV4dCkpIHsKICAgICAgICAgIHRoaXMuc2hvd01lbWJlcnMucHVzaChtKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmFjdGl2ZUlkeCA9IHRoaXMuc2hvd01lbWJlcnMubGVuZ3RoID4gMCA/IDAgOiAtMTsKICAgIH0sCiAgICBvcGVuKHBvcykgewogICAgICB0aGlzLnNob3cgPSB0cnVlOwogICAgICB0aGlzLnBvcyA9IHBvczsKICAgICAgdGhpcy5pbml0KCk7CiAgICB9LAogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuc2hvdyA9IGZhbHNlOwogICAgfSwKICAgIG1vdmVVcCgpIHsKICAgICAgaWYgKHRoaXMuYWN0aXZlSWR4ID4gMCkgewogICAgICAgIHRoaXMuYWN0aXZlSWR4LS07CiAgICAgICAgdGhpcy5zY3JvbGxUb0FjdGl2ZSgpOwogICAgICB9CiAgICB9LAogICAgbW92ZURvd24oKSB7CiAgICAgIGlmICh0aGlzLmFjdGl2ZUlkeCA8IHRoaXMuc2hvd01lbWJlcnMubGVuZ3RoIC0gMSkgewogICAgICAgIHRoaXMuYWN0aXZlSWR4Kys7CiAgICAgICAgdGhpcy5zY3JvbGxUb0FjdGl2ZSgpOwogICAgICB9CiAgICB9LAogICAgc2VsZWN0KCkgewogICAgICBpZiAodGhpcy5hY3RpdmVJZHggPj0gMCkgewogICAgICAgIHRoaXMub25TZWxlY3RNZW1iZXIodGhpcy5zaG93TWVtYmVyc1t0aGlzLmFjdGl2ZUlkeF0pOwogICAgICB9CiAgICAgIHRoaXMuY2xvc2UoKTsKICAgIH0sCiAgICBzY3JvbGxUb0FjdGl2ZSgpIHsKICAgICAgaWYgKHRoaXMuYWN0aXZlSWR4ICogMzUgLSB0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLmNsaWVudEhlaWdodCA+IHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsVG9wKSB7CiAgICAgICAgdGhpcy4kcmVmcy5zY3JvbGxCb3gud3JhcC5zY3JvbGxUb3AgKz0gMTQwOwogICAgICAgIGlmICh0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLnNjcm9sbFRvcCA+IHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsSGVpZ2h0KSB7CiAgICAgICAgICB0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLnNjcm9sbFRvcCA9IHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsSGVpZ2h0OwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5hY3RpdmVJZHggKiAzNSA8IHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsVG9wKSB7CiAgICAgICAgdGhpcy4kcmVmcy5zY3JvbGxCb3gud3JhcC5zY3JvbGxUb3AgLT0gMTQwOwogICAgICAgIGlmICh0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLnNjcm9sbFRvcCA8IDApIHsKICAgICAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsVG9wID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvblNlbGVjdE1lbWJlcihtZW1iZXIpIHsKICAgICAgdGhpcy4kZW1pdCgic2VsZWN0IiwgbWVtYmVyKTsKICAgICAgdGhpcy5zaG93ID0gZmFsc2U7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaXNPd25lcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJTdG9yZS51c2VySW5mby5pZCA9PSB0aGlzLm93bmVySWQ7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc2VhcmNoVGV4dDogewogICAgICBoYW5kbGVyKG5ld1RleHQsIG9sZFRleHQpIHsKICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["HeadImage","name","components","props","searchText","type","String","default","ownerId","Number","members","Array","data","show","pos","x","y","activeIdx","showMembers","methods","init","$refs","scrollBox","wrap","scrollTop","userId","$store","state","userStore","userInfo","id","startsWith","push","aliasName","forEach","m","length","open","close","moveUp","scrollToActive","moveDown","select","onSelectMember","clientHeight","scrollHeight","member","$emit","computed","isOwner","watch","handler","newText","oldText"],"sources":["src/components/chat/ChatAtBox.vue"],"sourcesContent":["<template>\n\t<el-scrollbar v-show=\"show\" ref=\"scrollBox\" class=\"group-member-choose\"\n\t\t:style=\"{'left':pos.x+'px','top':pos.y-300+'px'}\">\n\t\t<div v-for=\"(member,idx) in showMembers\" :key=\"member.id\">\n\t\t\t<div class=\"member-item\" :class=\"idx==activeIdx?'active':''\" @click=\"onSelectMember(member)\">\n\t\t\t\t<div class=\"member-avatar\">\n\t\t\t\t\t<head-image :size=\"25\" :name=\"member.aliasName\" :url=\"member.headImage\"> </head-image>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"member-name\">\n\t\t\t\t\t<div>{{member.aliasName}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</el-scrollbar>\n</template>\n\n<script>\n\timport HeadImage from '../common/HeadImage.vue';\n\n\texport default {\n\t\tname: \"chatAtBox\",\n\t\tcomponents: {\n\t\t\tHeadImage\n\t\t},\n\t\tprops: {\n\t\t\tsearchText: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"\"\n\t\t\t},\n\t\t\townerId: {\n\t\t\t\ttype: Number,\n\t\t\t},\n\t\t\tmembers: {\n\t\t\t\ttype: Array\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tshow: false,\n\t\t\t\tpos: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0\n\t\t\t\t},\n\t\t\t\tactiveIdx: 0,\n\t\t\t\tshowMembers: []\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\tinit() {\n\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = 0;\n\t\t\t\tthis.showMembers = [];\n\t\t\t\tlet userId = this.$store.state.userStore.userInfo.id;\n\t\t\t\tlet name = \"全体成员\";\n\t\t\t\tif (this.ownerId == userId && name.startsWith(this.searchText)) {\n\t\t\t\t\tthis.showMembers.push({\n\t\t\t\t\t\tuserId: -1,\n\t\t\t\t\t\taliasName: name\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.members.forEach((m) => {\n\t\t\t\t\tif (m.userId != userId && m.aliasName.startsWith(this.searchText)) {\n\t\t\t\t\t\tthis.showMembers.push(m);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tthis.activeIdx = this.showMembers.length > 0 ? 0: -1;\n\t\t\t},\n\t\t\topen(pos) {\n\t\t\t\tthis.show = true;\n\t\t\t\tthis.pos = pos;\n\t\t\t\tthis.init();\n\t\t\t},\n\t\t\tclose() {\n\t\t\t\tthis.show = false;\n\t\t\t},\n\t\t\tmoveUp() {\n\t\t\t\tif (this.activeIdx > 0) {\n\t\t\t\t\tthis.activeIdx--;\n\t\t\t\t\tthis.scrollToActive()\n\t\t\t\t}\n\t\t\t},\n\t\t\tmoveDown() {\n\t\t\t\tif (this.activeIdx < this.showMembers.length - 1) {\n\t\t\t\t\tthis.activeIdx++;\n\t\t\t\t\tthis.scrollToActive()\n\t\t\t\t}\n\t\t\t},\n\t\t\tselect() {\n\t\t\t\tif (this.activeIdx >= 0) {\n\t\t\t\t\tthis.onSelectMember(this.showMembers[this.activeIdx])\n\t\t\t\t}\n\t\t\t\tthis.close();\n\t\t\t},\n\t\t\tscrollToActive() {\n\t\t\t\tif (this.activeIdx * 35 - this.$refs.scrollBox.wrap.clientHeight > this.$refs.scrollBox.wrap.scrollTop) {\n\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop += 140;\n\t\t\t\t\tif (this.$refs.scrollBox.wrap.scrollTop > this.$refs.scrollBox.wrap.scrollHeight) {\n\t\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = this.$refs.scrollBox.wrap.scrollHeight\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.activeIdx * 35 < this.$refs.scrollBox.wrap.scrollTop) {\n\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop -= 140;\n\t\t\t\t\tif (this.$refs.scrollBox.wrap.scrollTop < 0) {\n\t\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSelectMember(member) {\n\t\t\t\tthis.$emit(\"select\", member);\n\t\t\t\tthis.show = false;\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tisOwner() {\n\t\t\t\treturn this.$store.state.userStore.userInfo.id == this.ownerId;\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tsearchText: {\n\t\t\t\thandler(newText, oldText) {\n\t\t\t\t\tthis.init();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n</script>\n\n<style scoped lang=\"scss\">\n\t.group-member-choose {\n\t\tposition: fixed;\n\t\twidth: 200px;\n\t\theight: 300px;\n\t\tborder: 1px solid #b4b4b4;\n\t\tborder-radius: 5px;\n\t\tbackground-color: #f5f5f5;\n\t\tbox-shadow: 0px 0px 10px #ccc;\n\n\t\t.member-item {\n\t\t\tdisplay: flex;\n\t\t\theight: 35px;\n\t\t\tmargin-bottom: 1px;\n\t\t\tposition: relative;\n\t\t\tpadding: 0 5px;\n\t\t\talign-items: center;\n\t\t\tbackground-color: #fafafa;\n\t\t\twhite-space: nowrap;\n\t\t\tbox-sizing: border-box;\n\n\t\t\t&:hover {\n\t\t\t\tbackground-color: #eeeeee;\n\t\t\t}\n\n\t\t\t&.active {\n\t\t\t\tbackground-color: #eeeeee;\n\t\t\t}\n\n\n\t\t\t.member-avatar {\n\t\t\t\twidth: 25px;\n\t\t\t\theight: 25px;\n\t\t\t}\n\n\t\t\t.member-name {\n\t\t\t\tpadding-left: 10px;\n\t\t\t\theight: 100%;\n\t\t\t\ttext-align: left;\n\t\t\t\tline-height: 40px;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\t\t}\n\t}\n</style>"],"mappings":"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","ignoreList":[]}]}