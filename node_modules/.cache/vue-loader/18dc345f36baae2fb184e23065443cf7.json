{"remainingRequest":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\im-ui\\src\\components\\common\\UserInfo.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\im-ui\\src\\components\\common\\UserInfo.vue","mtime":1703809564000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1710142166000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1710142168000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglpbXBvcnQgSGVhZEltYWdlIGZyb20gJy4vSGVhZEltYWdlLnZ1ZScKCglleHBvcnQgZGVmYXVsdCB7CgkJbmFtZTogInVzZXJJbmZvIiwKCQljb21wb25lbnRzOiB7CgkJCUhlYWRJbWFnZQoJCX0sCgkJZGF0YSgpIHsKCQkJcmV0dXJuIHsKCgkJCX0KCQl9LAoJCXByb3BzOiB7CgkJCXVzZXI6IHsKCQkJCXR5cGU6IE9iamVjdAoJCQl9LAoJCQlwb3M6IHsKCQkJCXR5cGU6IE9iamVjdAoJCQl9CgkJfSwKCQltZXRob2RzOiB7CgkJCW9uU2VuZE1lc3NhZ2UoKSB7CgkJCQlsZXQgdXNlciA9IHRoaXMudXNlcjsKCQkJCWxldCBjaGF0ID0gewoJCQkJCXR5cGU6ICdQUklWQVRFJywKCQkJCQl0YXJnZXRJZDogdXNlci5pZCwKCQkJCQlzaG93TmFtZTogdXNlci5uaWNrTmFtZSwKCQkJCQloZWFkSW1hZ2U6IHVzZXIuaGVhZEltYWdlLAoJCQkJfTsKCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgib3BlbkNoYXQiLCBjaGF0KTsKCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgiYWN0aXZlQ2hhdCIsIDApOwoJCQkJaWYgKHRoaXMuJHJvdXRlLnBhdGggIT0gIi9ob21lL2NoYXQiKSB7CgkJCQkJdGhpcy4kcm91dGVyLnB1c2goIi9ob21lL2NoYXQiKTsKCQkJCX0KCQkJCXRoaXMuJGVtaXQoImNsb3NlIik7CgkJCX0sCgkJCW9uQWRkRnJpZW5kKCkgewoJCQkJdGhpcy4kaHR0cCh7CgkJCQkJdXJsOiAiL2ZyaWVuZC9hZGQiLAoJCQkJCW1ldGhvZDogInBvc3QiLAoJCQkJCXBhcmFtczogewoJCQkJCQlmcmllbmRJZDogdGhpcy51c2VyLmlkCgkJCQkJfQoJCQkJfSkudGhlbigoZGF0YSkgPT4gewoJCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5re75Yqg5oiQ5Yqf77yM5a+55pa55bey5oiQ5Li65oKo55qE5aW95Y+LIik7CgkJCQkJbGV0IGZyaWVuZCA9IHsKCQkJCQkJaWQ6IHRoaXMudXNlci5pZCwKCQkJCQkJbmlja05hbWU6IHRoaXMudXNlci5uaWNrTmFtZSwKCQkJCQkJaGVhZEltYWdlOiB0aGlzLnVzZXIuaGVhZEltYWdlVGh1bWIsCgkJCQkJCW9ubGluZTogdGhpcy51c2VyLm9ubGluZQoJCQkJCX0KCQkJCQl0aGlzLiRzdG9yZS5jb21taXQoImFkZEZyaWVuZCIsIGZyaWVuZCk7CgkJCQl9KQoJCQl9LAoJCQlzaG93RnVsbEltYWdlKCkgewoJCQkJaWYgKHRoaXMudXNlci5oZWFkSW1hZ2UpIHsKCQkJCQl0aGlzLiRzdG9yZS5jb21taXQoInNob3dGdWxsSW1hZ2VCb3giLCB0aGlzLnVzZXIuaGVhZEltYWdlKTsKCQkJCX0KCQkJfQoJCX0sCgkJY29tcHV0ZWQ6IHsKCQkJaXNGcmllbmQoKSB7CgkJCQlsZXQgZnJpZW5kcyA9IHRoaXMuJHN0b3JlLnN0YXRlLmZyaWVuZFN0b3JlLmZyaWVuZHM7CgkJCQlsZXQgZnJpZW5kID0gZnJpZW5kcy5maW5kKChmKSA9PiBmLmlkID09IHRoaXMudXNlci5pZCk7CgkJCQlyZXR1cm4gZnJpZW5kICE9IHVuZGVmaW5lZDsKCQkJfQoJCX0KCX0K"},{"version":3,"sources":["UserInfo.vue"],"names":[],"mappings":";AA4BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserInfo.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\n\t<div class=\"user-info-mask\" @click=\"$emit('close')\">\n\t\t<div class=\"user-info\" :style=\"{left: pos.x+'px',top: pos.y+'px'}\" @click.stop>\n\t\t\t<div class=\"user-info-box\">\n\t\t\t\t<div class=\"avatar\">\n\t\t\t\t\t<head-image :name=\"user.nickName\" :url=\"user.headImageThumb\" :size=\"60\" :online=\"user.online\"\n\t\t\t\t\t\t@click.native=\"showFullImage()\"> </head-image>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<el-descriptions :column=\"1\" :title=\"user.userName\" class=\"user-info-items\">\n\t\t\t\t\t\t<el-descriptions-item label=\"昵称\">{{ user.nickName }}\n\t\t\t\t\t\t</el-descriptions-item>\n\t\t\t\t\t\t<el-descriptions-item label=\"签名\">{{ user.signature }}\n\t\t\t\t\t\t</el-descriptions-item>\n\t\t\t\t\t</el-descriptions>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<el-divider content-position=\"center\"></el-divider>\n\t\t\t<div class=\"user-btn-group\">\n\t\t\t\t<el-button v-show=\"isFriend\" type=\"primary\" @click=\"onSendMessage()\">发消息</el-button>\n\t\t\t\t<el-button v-show=\"!isFriend\" type=\"primary\" @click=\"onAddFriend()\">加为好友</el-button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport HeadImage from './HeadImage.vue'\n\n\texport default {\n\t\tname: \"userInfo\",\n\t\tcomponents: {\n\t\t\tHeadImage\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tuser: {\n\t\t\t\ttype: Object\n\t\t\t},\n\t\t\tpos: {\n\t\t\t\ttype: Object\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tonSendMessage() {\n\t\t\t\tlet user = this.user;\n\t\t\t\tlet chat = {\n\t\t\t\t\ttype: 'PRIVATE',\n\t\t\t\t\ttargetId: user.id,\n\t\t\t\t\tshowName: user.nickName,\n\t\t\t\t\theadImage: user.headImage,\n\t\t\t\t};\n\t\t\t\tthis.$store.commit(\"openChat\", chat);\n\t\t\t\tthis.$store.commit(\"activeChat\", 0);\n\t\t\t\tif (this.$route.path != \"/home/chat\") {\n\t\t\t\t\tthis.$router.push(\"/home/chat\");\n\t\t\t\t}\n\t\t\t\tthis.$emit(\"close\");\n\t\t\t},\n\t\t\tonAddFriend() {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: \"/friend/add\",\n\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tfriendId: this.user.id\n\t\t\t\t\t}\n\t\t\t\t}).then((data) => {\n\t\t\t\t\tthis.$message.success(\"添加成功，对方已成为您的好友\");\n\t\t\t\t\tlet friend = {\n\t\t\t\t\t\tid: this.user.id,\n\t\t\t\t\t\tnickName: this.user.nickName,\n\t\t\t\t\t\theadImage: this.user.headImageThumb,\n\t\t\t\t\t\tonline: this.user.online\n\t\t\t\t\t}\n\t\t\t\t\tthis.$store.commit(\"addFriend\", friend);\n\t\t\t\t})\n\t\t\t},\n\t\t\tshowFullImage() {\n\t\t\t\tif (this.user.headImage) {\n\t\t\t\t\tthis.$store.commit(\"showFullImageBox\", this.user.headImage);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tisFriend() {\n\t\t\t\tlet friends = this.$store.state.friendStore.friends;\n\t\t\t\tlet friend = friends.find((f) => f.id == this.user.id);\n\t\t\t\treturn friend != undefined;\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t.user-info-mask {\n\t\tbackground-color: rgba($color: #000000, $alpha: 0);\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.user-info {\n\t\tposition: absolute;\n\t\twidth: 300px;\n\t\tbackground-color: white;\n\t\tborder: #dddddd solid 1px;\n\t\tborder-radius: 5px;\n\t\tpadding: 15px;\n\n\t\t.user-info-box {\n\t\t\tdisplay: flex;\n\n\t\t\t.user-info-items {\n\t\t\t\tmargin-left: 10px;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\n\t\t\t\t.el-descriptions__header {\n\t\t\t\t\tmargin-bottom: 5px;\n\t\t\t\t}\n\n\t\t\t\t.el-descriptions__title {\n\t\t\t\t\tfont-size: 20px;\n\t\t\t\t}\n\n\t\t\t\t.el-descriptions-item__cell {\n\t\t\t\t\tpadding-bottom: 1px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.user-btn-group {\n\t\t\ttext-align: center;\n\t\t}\n\t}\n</style>"]}]}