{"remainingRequest":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\im-ui\\src\\components\\chat\\ChatPrivateVideo.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\im-ui\\src\\components\\chat\\ChatPrivateVideo.vue","mtime":1703809564000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1710142166000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1710142168000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglpbXBvcnQgSGVhZEltYWdlIGZyb20gJy4uL2NvbW1vbi9IZWFkSW1hZ2UudnVlJzsKCglleHBvcnQgZGVmYXVsdCB7CgkJbmFtZTogJ2NoYXRWaWRlbycsCgkJY29tcG9uZW50czogewoJCQlIZWFkSW1hZ2UKCQl9LAoJCXByb3BzOiB7CgkJCXZpc2libGU6IHsKCQkJCXR5cGU6IEJvb2xlYW4KCQkJfSwKCQkJZnJpZW5kOiB7CgkJCQl0eXBlOiBPYmplY3QKCQkJfSwKCQkJbWFzdGVyOiB7CgkJCQl0eXBlOiBCb29sZWFuCgkJCX0sCgkJCW9mZmVyOiB7CgkJCQl0eXBlOiBPYmplY3QKCQkJfQoJCX0sCgkJZGF0YSgpIHsKCQkJcmV0dXJuIHsKCQkJCWNhbGxlcklkOiBudWxsLAoJCQkJc3RyZWFtOiBudWxsLAoJCQkJYXVkaW86IG5ldyBBdWRpbygpLAoJCQkJbG9hZGluZzogZmFsc2UsCgkJCQlwZWVyQ29ubmVjdGlvbjogbnVsbCwKCQkJCXZpZGVvVGltZTogMCwKCQkJCXZpZGVvVGltZXI6IG51bGwsCgkJCQlzdGF0ZTogJ05PVF9DT05ORUNURUQnLAoJCQkJY2FuZGlkYXRlczogW10sCgkJCQljb25maWd1cmF0aW9uOiB7CgkJCQkJaWNlU2VydmVyczogW10KCQkJCX0KCQkJfQoJCX0sCgkJbWV0aG9kczogewoJCQlpbml0KCkgewoJCQkJaWYgKCF0aGlzLmhhc1VzZXJNZWRpYSgpIHx8ICF0aGlzLmhhc1JUQ1BlZXJDb25uZWN0aW9uKCkpIHsKCQkJCQl0aGlzLiRtZXNzYWdlLmVycm9yKCLliJ3lp4vljJblpLHotKXvvIzljp/lm6Dlj6/og73mmK86IDEu5pyq6YOo572yc3Ns6K+B5LmmIDIu5oKo55qE5rWP6KeI5Zmo5LiN5pSv5oyBV2ViUlRDIik7CgkJCQkJaWYgKCF0aGlzLm1hc3RlcikgewoJCQkJCQl0aGlzLnNlbmRGYWlsZWQoIuWvueaWuea1j+iniOWZqOS4jeaUr+aMgVdlYlJUQyIpCgkJCQkJfQoJCQkJCXJldHVybjsKCQkJCX0KCQkJCS8vIOaJk+W8gOaRhOWDj+WktAoJCQkJdGhpcy5vcGVuQ2FtZXJhKChzdHJlYW0pID0+IHsKCQkJCQkvLyDliJ3lp4vljJZ3ZWJydGPov57mjqUKCQkJCQl0aGlzLnNldHVwUGVlckNvbm5lY3Rpb24oc3RyZWFtKTsKCQkJCQlpZiAodGhpcy5tYXN0ZXIpIHsKCQkJCQkJLy8g5Y+R6LW35ZG85Y+rCgkJCQkJCXRoaXMuY2FsbCgpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCS8vIOaOpeWPl+WRvOWPqwoJCQkJCQl0aGlzLmFjY2VwdCh0aGlzLm9mZmVyKTsKCQkJCQl9CgkJCQl9KTsKCQkJfSwKCQkJb3BlbkNhbWVyYShjYWxsYmFjaykgewoJCQkJbmF2aWdhdG9yLmdldFVzZXJNZWRpYSh7CgkJCQkJCXZpZGVvOiB0cnVlLAoJCQkJCQlhdWRpbzogdHJ1ZQoJCQkJCX0sCgkJCQkJKHN0cmVhbSkgPT4gewoJCQkJCQl0aGlzLnN0cmVhbSA9IHN0cmVhbTsKCQkJCQkJY29uc29sZS5sb2codGhpcy5zdHJlYW0pCgkJCQkJCXRoaXMuJHJlZnMubWluZVZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsKCQkJCQkJdGhpcy4kcmVmcy5taW5lVmlkZW8ubXV0ZWQgPSB0cnVlOwoJCQkJCQljYWxsYmFjayhzdHJlYW0pCgkJCQkJfSwKCQkJCQkoZXJyb3IpID0+IHsKCQkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcigi5omT5byA5pGE5YOP5aS05aSx6LSlOiIgKyBlcnJvcik7CgkJCQkJCWNhbGxiYWNrKCkKCQkJCQl9KTsKCQkJfSwKCQkJY2xvc2VDYW1lcmEoKSB7CgkJCQlpZiAodGhpcy5zdHJlYW0pIHsKCQkJCQl0aGlzLnN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4gewoJCQkJCQl0cmFjay5zdG9wKCk7CgkJCQkJfSk7CgkJCQkJdGhpcy4kcmVmcy5taW5lVmlkZW8uc3JjT2JqZWN0ID0gbnVsbDsKCQkJCQl0aGlzLnN0cmVhbSA9IG51bGw7CgkJCQl9CgoJCQl9LAoJCQlzZXR1cFBlZXJDb25uZWN0aW9uKHN0cmVhbSkgewoJCQkJdGhpcy5wZWVyQ29ubmVjdGlvbiA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbih0aGlzLmNvbmZpZ3VyYXRpb24pOwoJCQkJdGhpcy5wZWVyQ29ubmVjdGlvbi5vbnRyYWNrID0gKGUpID0+IHsKCQkJCQl0aGlzLiRyZWZzLmZyaWVuZFZpZGVvLnNyY09iamVjdCA9IGUuc3RyZWFtc1swXTsKCQkJCX07CgkJCQl0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlID0gKGV2ZW50KSA9PiB7CgkJCQkJaWYgKGV2ZW50LmNhbmRpZGF0ZSkgewoJCQkJCQlpZiAodGhpcy5zdGF0ZSA9PSAnQ09OTkVDVEVEJykgewoJCQkJCQkJLy8g5bey6L+e5o6lLOebtOaOpeWPkemAgQoJCQkJCQkJdGhpcy5zZW5kQ2FuZGlkYXRlKGV2ZW50LmNhbmRpZGF0ZSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQkvLyDmnKrov57mjqUs57yT5a2Y6LW35p2l77yM6L+e5o6l5ZCO5YaN5Y+R6YCBCgkJCQkJCQl0aGlzLmNhbmRpZGF0ZXMucHVzaChldmVudC5jYW5kaWRhdGUpCgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQlpZiAoc3RyZWFtKSB7CgkJCQkJc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB7CgkJCQkJCXRoaXMucGVlckNvbm5lY3Rpb24uYWRkVHJhY2sodHJhY2ssIHN0cmVhbSk7CgkJCQkJfSk7CgkJCQl9CgkJCQl0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gKGV2ZW50KSA9PiB7CgkJCQkJbGV0IHN0YXRlID0gZXZlbnQudGFyZ2V0LmljZUNvbm5lY3Rpb25TdGF0ZTsKCQkJCQljb25zb2xlLmxvZygiSUNFIGNvbm5lY3Rpb24gc3RhdHVzIGNoYW5nZWQgOiAiICsgc3RhdGUpCgkJCQkJaWYgKHN0YXRlID09ICdjb25uZWN0ZWQnKSB7CgkJCQkJCXRoaXMucmVzZXRUaW1lKCk7CgkJCQkJfQoJCQkJfTsKCgkJCX0sCgkJCWhhbmRsZU1lc3NhZ2UobXNnKSB7CgkJCQlpZiAobXNnLnR5cGUgPT0gdGhpcy4kZW51bXMuTUVTU0FHRV9UWVBFLlJUQ19BQ0NFUFQpIHsKCQkJCQlpZiAobXNnLnNlbGZTZW5kKSB7CgkJCQkJCS8vIOaIkeWcqOWFtuS7lue7iOerr+aOpeWPl+S6huWvueaWueeahOmAmuivnQoJCQkJCQl0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuW3suWcqOWFtuS7luiuvuWkh+aOpeWQrCIpOwoJCQkJCQl0aGlzLmNsb3NlKCk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJLy8g5a+55pa55o6l5Y+X5LqG5oiR55qE6YCa6K+dCgkJCQkJCXRoaXMucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihKU09OLnBhcnNlKG1zZy5jb250ZW50KSkpOwoJCQkJCQkvLyDlhbPpl63nrYnlvoXmj5DnpLoKCQkJCQkJdGhpcy5sb2FkaW5nID0gZmFsc2U7CgkJCQkJCS8vIOeKtuaAgeS4uui/nuaOpeS4rQoJCQkJCQl0aGlzLnN0YXRlID0gJ0NPTk5FQ1RFRCc7CgkJCQkJCS8vIOWBnOatouaSreaUvuivremfswoJCQkJCQl0aGlzLmF1ZGlvLnBhdXNlKCk7CgkJCQkJCS8vIOWPkemAgWNhbmRpZGF0ZQoJCQkJCQl0aGlzLmNhbmRpZGF0ZXMuZm9yRWFjaCgoY2FuZGlkYXRlKSA9PiB7CgkJCQkJCQl0aGlzLnNlbmRDYW5kaWRhdGUoY2FuZGlkYXRlKTsKCQkJCQkJfSkKCQkJCQl9CgoJCQkJfSBlbHNlIGlmIChtc2cudHlwZSA9PSB0aGlzLiRlbnVtcy5NRVNTQUdFX1RZUEUuUlRDX1JFSkVDVCkgewoJCQkJCWlmIChtc2cuc2VsZlNlbmQpIHsKCQkJCQkJLy8g5oiR5Zyo5YW25LuW57uI56uv5ouS57ud5LqG5a+55pa555qE6YCa6K+dCgkJCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5bey5Zyo5YW25LuW6K6+5aSH5ouS57ud6YCa6K+dIik7CgkJCQkJCXRoaXMuY2xvc2UoKTsKCQkJCQl9IGVsc2UgewoJCQkJCQkvLyDlr7nmlrnmi5Lnu53kuobmiJHnmoTpgJror50KCQkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcigi5a+55pa55ouS57ud5LqG5oKo55qE6KeG6aKR6K+35rGCIik7CgkJCQkJCXRoaXMuY2xvc2UoKTsKCQkJCQl9CgkJCQl9IGVsc2UgaWYgKG1zZy50eXBlID09IHRoaXMuJGVudW1zLk1FU1NBR0VfVFlQRS5SVENfRkFJTEVEKSB7CgkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcihtc2cuY29udGVudCkKCQkJCQl0aGlzLmNsb3NlKCk7CgkJCQl9IGVsc2UgaWYgKG1zZy50eXBlID09IHRoaXMuJGVudW1zLk1FU1NBR0VfVFlQRS5SVENfQ0FORElEQVRFKSB7CgkJCQkJdGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRJY2VDYW5kaWRhdGUobmV3IFJUQ0ljZUNhbmRpZGF0ZShKU09OLnBhcnNlKG1zZy5jb250ZW50KSkpOwoJCQkJfSBlbHNlIGlmIChtc2cudHlwZSA9PSB0aGlzLiRlbnVtcy5NRVNTQUdFX1RZUEUuUlRDX0hBTkRVUCkgewoJCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5a+55pa55oyC5pat5LqG6KeG6aKR6YCa6K+dIik7CgkJCQkJdGhpcy5jbG9zZSgpOwoJCQkJfQoJCQl9LAoJCQljYWxsKCkgewoJCQkJdGhpcy5wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcigob2ZmZXIpID0+IHsKCQkJCQkJdGhpcy5wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKG9mZmVyKTsKCQkJCQkJdGhpcy4kaHR0cCh7CgkJCQkJCQl1cmw6IGAvd2VicnRjL3ByaXZhdGUvY2FsbD91aWQ9JHt0aGlzLmZyaWVuZC5pZH1gLAoJCQkJCQkJbWV0aG9kOiAncG9zdCcsCgkJCQkJCQlkYXRhOiBKU09OLnN0cmluZ2lmeShvZmZlcikKCQkJCQkJfSkudGhlbigoKSA9PiB7CgkJCQkJCQl0aGlzLmNhbGxJZCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJTdG9yZS51c2VySW5mby5pZDsKCQkJCQkJCXRoaXMubG9hZGluZyA9IHRydWU7CgkJCQkJCQl0aGlzLnN0YXRlID0gJ0NPTk5FQ1RJTkcnOwoJCQkJCQkJdGhpcy5hdWRpby5wbGF5KCk7CgkJCQkJCX0pCgkJCQkJfSwoZXJyb3IpID0+IHsKCQkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcihlcnJvcik7CgkJCQkJfSk7CgoJCQl9LAoJCQlhY2NlcHQob2ZmZXIpIHsKCQkJCXRoaXMucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihvZmZlcikpOwoJCQkJdGhpcy5wZWVyQ29ubmVjdGlvbi5jcmVhdGVBbnN3ZXIoKGFuc3dlcikgPT4gewoJCQkJCQl0aGlzLnBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oYW5zd2VyKTsKCQkJCQkJdGhpcy4kaHR0cCh7CgkJCQkJCQl1cmw6IGAvd2VicnRjL3ByaXZhdGUvYWNjZXB0P3VpZD0ke3RoaXMuZnJpZW5kLmlkfWAsCgkJCQkJCQltZXRob2Q6ICdwb3N0JywKCQkJCQkJCWRhdGE6IEpTT04uc3RyaW5naWZ5KGFuc3dlcikKCQkJCQkJfSkudGhlbigoKSA9PiB7CgkJCQkJCQl0aGlzLnN0YXRlID0gJ0NPTk5FQ1RFRCc7CgkJCQkJCQl0aGlzLmNhbGxlcklkID0gdGhpcy5mcmllbmQuaWQ7CgkJCQkJCX0pCgoJCQkJCX0sCgkJCQkJKGVycm9yKSA9PiB7CgkJCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyb3IpOwoJCQkJCX0pOwoKCQkJfSwKCQkJaGFuZHVwKCkgewoJCQkJdGhpcy4kaHR0cCh7CgkJCQkJdXJsOiBgL3dlYnJ0Yy9wcml2YXRlL2hhbmR1cD91aWQ9JHt0aGlzLmZyaWVuZC5pZH1gLAoJCQkJCW1ldGhvZDogJ3Bvc3QnCgkJCQl9KQoJCQkJdGhpcy5jbG9zZSgpOwoJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLlt7LmjILmlq3op4bpopHpgJror50iKQoJCQl9LAoJCQljYW5jZWwoKSB7CgkJCQl0aGlzLiRodHRwKHsKCQkJCQl1cmw6IGAvd2VicnRjL3ByaXZhdGUvY2FuY2VsP3VpZD0ke3RoaXMuZnJpZW5kLmlkfWAsCgkJCQkJbWV0aG9kOiAncG9zdCcKCQkJCX0pCgkJCQl0aGlzLmNsb3NlKCk7CgkJCQl0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuW3suWBnOatouWRvOWPq+inhumikemAmuivnSIpCgkJCX0sCgkJCXNlbmRGYWlsZWQocmVhc29uKSB7CgkJCQl0aGlzLiRodHRwKHsKCQkJCQl1cmw6IGAvd2VicnRjL3ByaXZhdGUvZmFpbGVkP3VpZD0ke3RoaXMuZnJpZW5kLmlkfSZyZWFzb249JHtyZWFzb259YCwKCQkJCQltZXRob2Q6ICdwb3N0JwoJCQkJfSkKCQkJfSwKCQkJc2VuZENhbmRpZGF0ZShjYW5kaWRhdGUpIHsKCQkJCXRoaXMuJGh0dHAoewoJCQkJCXVybDogYC93ZWJydGMvcHJpdmF0ZS9jYW5kaWRhdGU/dWlkPSR7dGhpcy5mcmllbmQuaWR9YCwKCQkJCQltZXRob2Q6ICdwb3N0JywKCQkJCQlkYXRhOiBKU09OLnN0cmluZ2lmeShjYW5kaWRhdGUpCgkJCQl9KQoJCQl9LAoJCQljbG9zZSgpIHsKCQkJCXRoaXMuJGVtaXQoImNsb3NlIik7CgkJCQl0aGlzLmNsb3NlQ2FtZXJhKCk7CgkJCQl0aGlzLmxvYWRpbmcgPSBmYWxzZTsKCQkJCXRoaXMuc3RhdGUgPSAnTk9UX0NPTk5FQ1RFRCc7CgkJCQl0aGlzLnZpZGVvVGltZSA9IDA7CgkJCQl0aGlzLnZpZGVvVGltZXIgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLnZpZGVvVGltZXIpOwoJCQkJdGhpcy5hdWRpby5wYXVzZSgpOwoJCQkJdGhpcy5jYW5kaWRhdGVzID0gW107CgkJCQl0aGlzLiRzdG9yZS5jb21taXQoInNldFVzZXJTdGF0ZSIsIHRoaXMuJGVudW1zLlVTRVJfU1RBVEUuRlJFRSk7CgkJCQlpZiAodGhpcy5wZWVyQ29ubmVjdGlvbikgewoJCQkJCXRoaXMucGVlckNvbm5lY3Rpb24uY2xvc2UoKTsKCQkJCQl0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlID0gbnVsbDsKCQkJCQl0aGlzLnBlZXJDb25uZWN0aW9uLm9uYWRkc3RyZWFtID0gbnVsbDsKCQkJCX0KCQkJCWlmICh0aGlzLiRyZWZzLmZyaWVuZFZpZGVvKSB7CgkJCQkJdGhpcy4kcmVmcy5mcmllbmRWaWRlby5zcmNPYmplY3QgPSBudWxsOwoJCQkJfQoKCQkJfSwKCQkJcmVzZXRUaW1lKCkgewoJCQkJdGhpcy52aWRlb1RpbWUgPSAwOwoJCQkJdGhpcy52aWRlb1RpbWVyICYmIGNsZWFySW50ZXJ2YWwodGhpcy52aWRlb1RpbWVyKTsKCQkJCXRoaXMudmlkZW9UaW1lciA9IHNldEludGVydmFsKCgpID0+IHsKCQkJCQl0aGlzLnZpZGVvVGltZSsrOwoJCQkJfSwgMTAwMCkKCQkJfSwKCQkJaGFuZGxlQ2xvc2UoKSB7CgkJCQlpZiAodGhpcy5zdGF0ZSA9PSAnQ09OTkVDVEVEJykgewoJCQkJCXRoaXMuaGFuZHVwKCkKCQkJCX0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PSAnQ09OTkVDVElORycpIHsKCQkJCQl0aGlzLmNhbmNlbCgpOwoJCQkJfSBlbHNlIHsKCQkJCQl0aGlzLmNsb3NlKCk7CgkJCQl9CgkJCX0sCgkJCWhhc1VzZXJNZWRpYSgpIHsKCQkJCW5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yCgkJCQkJLm1vekdldFVzZXJNZWRpYSB8fAoJCQkJCW5hdmlnYXRvci5tc0dldFVzZXJNZWRpYTsKCQkJCXJldHVybiAhIW5hdmlnYXRvci5nZXRVc2VyTWVkaWE7CgkJCX0sCgkJCWhhc1JUQ1BlZXJDb25uZWN0aW9uKCkgewoJCQkJd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uIHx8IHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbiB8fCB3aW5kb3cKCQkJCQkubW96UlRDUGVlckNvbm5lY3Rpb247CgkJCQl3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiB8fCB3aW5kb3cud2Via2l0UlRDU2Vzc2lvbkRlc2NyaXB0aW9uIHx8IHdpbmRvdwoJCQkJCS5tb3pSVENTZXNzaW9uRGVzY3JpcHRpb247CgkJCQl3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSB8fCB3aW5kb3cud2Via2l0UlRDSWNlQ2FuZGlkYXRlIHx8IHdpbmRvdwoJCQkJCS5tb3pSVENJY2VDYW5kaWRhdGU7CgkJCQlyZXR1cm4gISF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb247CgkJCX0sCgkJCWluaXRBdWRpbygpIHsKCQkJCWxldCB1cmwgPSByZXF1aXJlKGBAL2Fzc2V0cy9hdWRpby9jYWxsLndhdmApOwoJCQkJdGhpcy5hdWRpby5zcmMgPSB1cmw7CgkJCQl0aGlzLmF1ZGlvLmxvb3AgPSB0cnVlOwoJCQl9LAoJCQlpbml0SUNFU2VydmVycygpIHsKCQkJCXRoaXMuJGh0dHAoewoJCQkJCXVybDogJy93ZWJydGMvcHJpdmF0ZS9pY2VzZXJ2ZXJzJywKCQkJCQltZXRob2Q6ICdnZXQnCgkJCQl9KS50aGVuKChzZXJ2ZXJzKSA9PiB7CgkJCQkJdGhpcy5jb25maWd1cmF0aW9uLmljZVNlcnZlcnMgPSBzZXJ2ZXJzOwoJCQkJfSkKCQkJfQoKCQl9LAoJCXdhdGNoOiB7CgkJCXZpc2libGU6IHsKCQkJCWhhbmRsZXIobmV3VmFsdWUsIG9sZFZhbHVlKSB7CgkJCQkJaWYgKG5ld1ZhbHVlKSB7CgkJCQkJCXRoaXMuaW5pdCgpOwoJCQkJCQkvLyDnlKjmiLflv5nnirbmgIEKCQkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJzZXRVc2VyU3RhdGUiLCB0aGlzLiRlbnVtcy5VU0VSX1NUQVRFLkJVU1kpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0sCgkJY29tcHV0ZWQ6IHsKCQkJdGl0bGUoKSB7CgkJCQlsZXQgc3RyVGl0bGUgPSBg6KeG6aKR6IGK5aSpLSR7dGhpcy5mcmllbmQubmlja05hbWV9YDsKCQkJCWlmICh0aGlzLnN0YXRlID09ICdDT05ORUNURUQnKSB7CgkJCQkJc3RyVGl0bGUgKz0gYCgke3RoaXMuY3VycmVudFRpbWV9KWA7CgkJCQl9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT0gJ0NPTk5FQ1RJTkcnKSB7CgkJCQkJc3RyVGl0bGUgKz0gYCjlkbzlj6vkuK0pYDsKCQkJCX0KCQkJCXJldHVybiBzdHJUaXRsZTsKCQkJfSwKCQkJY3VycmVudFRpbWUoKSB7CgkJCQlsZXQgY3VycmVudFRpbWUgPSAwOwoJCQkJaWYgKHRoaXMuc3RhdGUgPT0gJ0NPTk5FQ1RFRCcgJiYgdGhpcy52aWRlb1RpbWUpIHsKCQkJCQljdXJyZW50VGltZSA9IE1hdGguZmxvb3IodGhpcy52aWRlb1RpbWUpOwoJCQkJfQoJCQkJbGV0IG1pbiA9IE1hdGguZmxvb3IoY3VycmVudFRpbWUgLyA2MCk7CgkJCQlsZXQgc2VjID0gY3VycmVudFRpbWUgJSA2MDsKCQkJCWxldCBzdHJUaW1lID0gbWluIDwgMTAgPyAiMCIgOiAiIjsKCQkJCXN0clRpbWUgKz0gbWluOwoJCQkJc3RyVGltZSArPSAiOiIKCQkJCXN0clRpbWUgKz0gc2VjIDwgMTAgPyAiMCIgOiAiIjsKCQkJCXN0clRpbWUgKz0gc2VjOwoJCQkJcmV0dXJuIHN0clRpbWU7CgkJCX0KCQl9LAoJCW1vdW50ZWQoKSB7CgkJCXRoaXMuaW5pdEF1ZGlvKCk7CgkJCXRoaXMuaW5pdElDRVNlcnZlcnMoKTsKCQl9Cgl9Cg=="},{"version":3,"sources":["ChatPrivateVideo.vue"],"names":[],"mappings":";AA6BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChatPrivateVideo.vue","sourceRoot":"src/components/chat","sourcesContent":["<template>\n\t<el-dialog v-dialogDrag :title=\"title\" top=\"5vh\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\"\n\t\t:visible.sync=\"visible\" width=\"50%\" height=\"70%\" :before-close=\"handleClose\">\n\t\t<div class=\"chat-video\">\n\t\t\t<div class=\"chat-video-box\">\n\t\t\t\t<div class=\"chat-video-friend\" v-loading=\"loading\" element-loading-text=\"等待对方接听...\"\n\t\t\t\t\telement-loading-spinner=\"el-icon-loading\" element-loading-background=\"rgba(0, 0, 0, 0.5)\">\n\t\t\t\t\t<head-image class=\"friend-head-image\" \n\t\t\t\t\t\t:id=\"friend.id\" :size=\"80\" :name=\"friend.nickName\"\n\t\t\t\t\t\t:url=\"friend.headImage\">\n\t\t\t\t\t</head-image>\n\t\t\t\t\t<video ref=\"friendVideo\" autoplay=\"\"></video>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"chat-video-mine\">\n\t\t\t\t\t<video ref=\"mineVideo\" autoplay=\"\"></video>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"chat-video-controllbar\">\n\t\t\t\t<div v-show=\"state=='CONNECTING'\" title=\"取消呼叫\" class=\"icon iconfont icon-phone-reject reject\"\n\t\t\t\t\tstyle=\"color: red;\" @click=\"cancel()\"></div>\n\t\t\t\t<div v-show=\"state=='CONNECTED'\" title=\"挂断\" class=\"icon iconfont icon-phone-reject reject\"\n\t\t\t\t\tstyle=\"color: red;\" @click=\"handup()\"></div>\n\t\t\t</div>\n\t\t</div>\n\t</el-dialog>\n\n</template>\n\n<script>\n\timport HeadImage from '../common/HeadImage.vue';\n\n\texport default {\n\t\tname: 'chatVideo',\n\t\tcomponents: {\n\t\t\tHeadImage\n\t\t},\n\t\tprops: {\n\t\t\tvisible: {\n\t\t\t\ttype: Boolean\n\t\t\t},\n\t\t\tfriend: {\n\t\t\t\ttype: Object\n\t\t\t},\n\t\t\tmaster: {\n\t\t\t\ttype: Boolean\n\t\t\t},\n\t\t\toffer: {\n\t\t\t\ttype: Object\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcallerId: null,\n\t\t\t\tstream: null,\n\t\t\t\taudio: new Audio(),\n\t\t\t\tloading: false,\n\t\t\t\tpeerConnection: null,\n\t\t\t\tvideoTime: 0,\n\t\t\t\tvideoTimer: null,\n\t\t\t\tstate: 'NOT_CONNECTED',\n\t\t\t\tcandidates: [],\n\t\t\t\tconfiguration: {\n\t\t\t\t\ticeServers: []\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tinit() {\n\t\t\t\tif (!this.hasUserMedia() || !this.hasRTCPeerConnection()) {\n\t\t\t\t\tthis.$message.error(\"初始化失败，原因可能是: 1.未部署ssl证书 2.您的浏览器不支持WebRTC\");\n\t\t\t\t\tif (!this.master) {\n\t\t\t\t\t\tthis.sendFailed(\"对方浏览器不支持WebRTC\")\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// 打开摄像头\n\t\t\t\tthis.openCamera((stream) => {\n\t\t\t\t\t// 初始化webrtc连接\n\t\t\t\t\tthis.setupPeerConnection(stream);\n\t\t\t\t\tif (this.master) {\n\t\t\t\t\t\t// 发起呼叫\n\t\t\t\t\t\tthis.call();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 接受呼叫\n\t\t\t\t\t\tthis.accept(this.offer);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\topenCamera(callback) {\n\t\t\t\tnavigator.getUserMedia({\n\t\t\t\t\t\tvideo: true,\n\t\t\t\t\t\taudio: true\n\t\t\t\t\t},\n\t\t\t\t\t(stream) => {\n\t\t\t\t\t\tthis.stream = stream;\n\t\t\t\t\t\tconsole.log(this.stream)\n\t\t\t\t\t\tthis.$refs.mineVideo.srcObject = stream;\n\t\t\t\t\t\tthis.$refs.mineVideo.muted = true;\n\t\t\t\t\t\tcallback(stream)\n\t\t\t\t\t},\n\t\t\t\t\t(error) => {\n\t\t\t\t\t\tthis.$message.error(\"打开摄像头失败:\" + error);\n\t\t\t\t\t\tcallback()\n\t\t\t\t\t});\n\t\t\t},\n\t\t\tcloseCamera() {\n\t\t\t\tif (this.stream) {\n\t\t\t\t\tthis.stream.getTracks().forEach((track) => {\n\t\t\t\t\t\ttrack.stop();\n\t\t\t\t\t});\n\t\t\t\t\tthis.$refs.mineVideo.srcObject = null;\n\t\t\t\t\tthis.stream = null;\n\t\t\t\t}\n\n\t\t\t},\n\t\t\tsetupPeerConnection(stream) {\n\t\t\t\tthis.peerConnection = new RTCPeerConnection(this.configuration);\n\t\t\t\tthis.peerConnection.ontrack = (e) => {\n\t\t\t\t\tthis.$refs.friendVideo.srcObject = e.streams[0];\n\t\t\t\t};\n\t\t\t\tthis.peerConnection.onicecandidate = (event) => {\n\t\t\t\t\tif (event.candidate) {\n\t\t\t\t\t\tif (this.state == 'CONNECTED') {\n\t\t\t\t\t\t\t// 已连接,直接发送\n\t\t\t\t\t\t\tthis.sendCandidate(event.candidate);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// 未连接,缓存起来，连接后再发送\n\t\t\t\t\t\t\tthis.candidates.push(event.candidate)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (stream) {\n\t\t\t\t\tstream.getTracks().forEach((track) => {\n\t\t\t\t\t\tthis.peerConnection.addTrack(track, stream);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.peerConnection.oniceconnectionstatechange = (event) => {\n\t\t\t\t\tlet state = event.target.iceConnectionState;\n\t\t\t\t\tconsole.log(\"ICE connection status changed : \" + state)\n\t\t\t\t\tif (state == 'connected') {\n\t\t\t\t\t\tthis.resetTime();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t},\n\t\t\thandleMessage(msg) {\n\t\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.RTC_ACCEPT) {\n\t\t\t\t\tif (msg.selfSend) {\n\t\t\t\t\t\t// 我在其他终端接受了对方的通话\n\t\t\t\t\t\tthis.$message.success(\"已在其他设备接听\");\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 对方接受了我的通话\n\t\t\t\t\t\tthis.peerConnection.setRemoteDescription(new RTCSessionDescription(JSON.parse(msg.content)));\n\t\t\t\t\t\t// 关闭等待提示\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\t// 状态为连接中\n\t\t\t\t\t\tthis.state = 'CONNECTED';\n\t\t\t\t\t\t// 停止播放语音\n\t\t\t\t\t\tthis.audio.pause();\n\t\t\t\t\t\t// 发送candidate\n\t\t\t\t\t\tthis.candidates.forEach((candidate) => {\n\t\t\t\t\t\t\tthis.sendCandidate(candidate);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t} else if (msg.type == this.$enums.MESSAGE_TYPE.RTC_REJECT) {\n\t\t\t\t\tif (msg.selfSend) {\n\t\t\t\t\t\t// 我在其他终端拒绝了对方的通话\n\t\t\t\t\t\tthis.$message.success(\"已在其他设备拒绝通话\");\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 对方拒绝了我的通话\n\t\t\t\t\t\tthis.$message.error(\"对方拒绝了您的视频请求\");\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}\n\t\t\t\t} else if (msg.type == this.$enums.MESSAGE_TYPE.RTC_FAILED) {\n\t\t\t\t\tthis.$message.error(msg.content)\n\t\t\t\t\tthis.close();\n\t\t\t\t} else if (msg.type == this.$enums.MESSAGE_TYPE.RTC_CANDIDATE) {\n\t\t\t\t\tthis.peerConnection.addIceCandidate(new RTCIceCandidate(JSON.parse(msg.content)));\n\t\t\t\t} else if (msg.type == this.$enums.MESSAGE_TYPE.RTC_HANDUP) {\n\t\t\t\t\tthis.$message.success(\"对方挂断了视频通话\");\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t},\n\t\t\tcall() {\n\t\t\t\tthis.peerConnection.createOffer((offer) => {\n\t\t\t\t\t\tthis.peerConnection.setLocalDescription(offer);\n\t\t\t\t\t\tthis.$http({\n\t\t\t\t\t\t\turl: `/webrtc/private/call?uid=${this.friend.id}`,\n\t\t\t\t\t\t\tmethod: 'post',\n\t\t\t\t\t\t\tdata: JSON.stringify(offer)\n\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\tthis.callId = this.$store.state.userStore.userInfo.id;\n\t\t\t\t\t\t\tthis.loading = true;\n\t\t\t\t\t\t\tthis.state = 'CONNECTING';\n\t\t\t\t\t\t\tthis.audio.play();\n\t\t\t\t\t\t})\n\t\t\t\t\t},(error) => {\n\t\t\t\t\t\tthis.$message.error(error);\n\t\t\t\t\t});\n\n\t\t\t},\n\t\t\taccept(offer) {\n\t\t\t\tthis.peerConnection.setRemoteDescription(new RTCSessionDescription(offer));\n\t\t\t\tthis.peerConnection.createAnswer((answer) => {\n\t\t\t\t\t\tthis.peerConnection.setLocalDescription(answer);\n\t\t\t\t\t\tthis.$http({\n\t\t\t\t\t\t\turl: `/webrtc/private/accept?uid=${this.friend.id}`,\n\t\t\t\t\t\t\tmethod: 'post',\n\t\t\t\t\t\t\tdata: JSON.stringify(answer)\n\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\tthis.state = 'CONNECTED';\n\t\t\t\t\t\t\tthis.callerId = this.friend.id;\n\t\t\t\t\t\t})\n\n\t\t\t\t\t},\n\t\t\t\t\t(error) => {\n\t\t\t\t\t\tthis.$message.error(error);\n\t\t\t\t\t});\n\n\t\t\t},\n\t\t\thandup() {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/webrtc/private/handup?uid=${this.friend.id}`,\n\t\t\t\t\tmethod: 'post'\n\t\t\t\t})\n\t\t\t\tthis.close();\n\t\t\t\tthis.$message.success(\"已挂断视频通话\")\n\t\t\t},\n\t\t\tcancel() {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/webrtc/private/cancel?uid=${this.friend.id}`,\n\t\t\t\t\tmethod: 'post'\n\t\t\t\t})\n\t\t\t\tthis.close();\n\t\t\t\tthis.$message.success(\"已停止呼叫视频通话\")\n\t\t\t},\n\t\t\tsendFailed(reason) {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/webrtc/private/failed?uid=${this.friend.id}&reason=${reason}`,\n\t\t\t\t\tmethod: 'post'\n\t\t\t\t})\n\t\t\t},\n\t\t\tsendCandidate(candidate) {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/webrtc/private/candidate?uid=${this.friend.id}`,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: JSON.stringify(candidate)\n\t\t\t\t})\n\t\t\t},\n\t\t\tclose() {\n\t\t\t\tthis.$emit(\"close\");\n\t\t\t\tthis.closeCamera();\n\t\t\t\tthis.loading = false;\n\t\t\t\tthis.state = 'NOT_CONNECTED';\n\t\t\t\tthis.videoTime = 0;\n\t\t\t\tthis.videoTimer && clearInterval(this.videoTimer);\n\t\t\t\tthis.audio.pause();\n\t\t\t\tthis.candidates = [];\n\t\t\t\tthis.$store.commit(\"setUserState\", this.$enums.USER_STATE.FREE);\n\t\t\t\tif (this.peerConnection) {\n\t\t\t\t\tthis.peerConnection.close();\n\t\t\t\t\tthis.peerConnection.onicecandidate = null;\n\t\t\t\t\tthis.peerConnection.onaddstream = null;\n\t\t\t\t}\n\t\t\t\tif (this.$refs.friendVideo) {\n\t\t\t\t\tthis.$refs.friendVideo.srcObject = null;\n\t\t\t\t}\n\n\t\t\t},\n\t\t\tresetTime() {\n\t\t\t\tthis.videoTime = 0;\n\t\t\t\tthis.videoTimer && clearInterval(this.videoTimer);\n\t\t\t\tthis.videoTimer = setInterval(() => {\n\t\t\t\t\tthis.videoTime++;\n\t\t\t\t}, 1000)\n\t\t\t},\n\t\t\thandleClose() {\n\t\t\t\tif (this.state == 'CONNECTED') {\n\t\t\t\t\tthis.handup()\n\t\t\t\t} else if (this.state == 'CONNECTING') {\n\t\t\t\t\tthis.cancel();\n\t\t\t\t} else {\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t},\n\t\t\thasUserMedia() {\n\t\t\t\tnavigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator\n\t\t\t\t\t.mozGetUserMedia ||\n\t\t\t\t\tnavigator.msGetUserMedia;\n\t\t\t\treturn !!navigator.getUserMedia;\n\t\t\t},\n\t\t\thasRTCPeerConnection() {\n\t\t\t\twindow.RTCPeerConnection = window.RTCPeerConnection || window.webkitRTCPeerConnection || window\n\t\t\t\t\t.mozRTCPeerConnection;\n\t\t\t\twindow.RTCSessionDescription = window.RTCSessionDescription || window.webkitRTCSessionDescription || window\n\t\t\t\t\t.mozRTCSessionDescription;\n\t\t\t\twindow.RTCIceCandidate = window.RTCIceCandidate || window.webkitRTCIceCandidate || window\n\t\t\t\t\t.mozRTCIceCandidate;\n\t\t\t\treturn !!window.RTCPeerConnection;\n\t\t\t},\n\t\t\tinitAudio() {\n\t\t\t\tlet url = require(`@/assets/audio/call.wav`);\n\t\t\t\tthis.audio.src = url;\n\t\t\t\tthis.audio.loop = true;\n\t\t\t},\n\t\t\tinitICEServers() {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: '/webrtc/private/iceservers',\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((servers) => {\n\t\t\t\t\tthis.configuration.iceServers = servers;\n\t\t\t\t})\n\t\t\t}\n\n\t\t},\n\t\twatch: {\n\t\t\tvisible: {\n\t\t\t\thandler(newValue, oldValue) {\n\t\t\t\t\tif (newValue) {\n\t\t\t\t\t\tthis.init();\n\t\t\t\t\t\t// 用户忙状态\n\t\t\t\t\t\tthis.$store.commit(\"setUserState\", this.$enums.USER_STATE.BUSY);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\ttitle() {\n\t\t\t\tlet strTitle = `视频聊天-${this.friend.nickName}`;\n\t\t\t\tif (this.state == 'CONNECTED') {\n\t\t\t\t\tstrTitle += `(${this.currentTime})`;\n\t\t\t\t} else if (this.state == 'CONNECTING') {\n\t\t\t\t\tstrTitle += `(呼叫中)`;\n\t\t\t\t}\n\t\t\t\treturn strTitle;\n\t\t\t},\n\t\t\tcurrentTime() {\n\t\t\t\tlet currentTime = 0;\n\t\t\t\tif (this.state == 'CONNECTED' && this.videoTime) {\n\t\t\t\t\tcurrentTime = Math.floor(this.videoTime);\n\t\t\t\t}\n\t\t\t\tlet min = Math.floor(currentTime / 60);\n\t\t\t\tlet sec = currentTime % 60;\n\t\t\t\tlet strTime = min < 10 ? \"0\" : \"\";\n\t\t\t\tstrTime += min;\n\t\t\t\tstrTime += \":\"\n\t\t\t\tstrTime += sec < 10 ? \"0\" : \"\";\n\t\t\t\tstrTime += sec;\n\t\t\t\treturn strTime;\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tthis.initAudio();\n\t\t\tthis.initICEServers();\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.chat-video {\n\t\tposition: relative;\n\n\t\t.chat-video-box {\n\t\t\tposition: relative;\n\t\t\tborder: #4880b9 solid 1px;\n\t\t\tbackground-color: #eeeeee;\n\n\t\t\t.chat-video-friend {\n\t\t\t\theight: 70vh;\n\n\t\t\t\t.friend-head-image {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t}\n\n\t\t\t\tvideo {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tobject-fit: fill;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.chat-video-mine {\n\t\t\t\tposition: absolute;\n\t\t\t\tz-index: 99999;\n\t\t\t\twidth: 25vh;\n\t\t\t\tright: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tbox-shadow: 0px 0px 5px #ccc;\n\t\t\t\tbackground-color: #cccccc;\n\n\t\t\t\tvideo {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.chat-video-controllbar {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-around;\n\t\t\tpadding: 10px;\n\n\t\t\t.icon {\n\t\t\t\tfont-size: 50px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t}\n\t}\n</style>"]}]}