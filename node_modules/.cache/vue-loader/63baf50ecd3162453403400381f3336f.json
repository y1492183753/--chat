{"remainingRequest":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\im-ui\\src\\view\\Group.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\im-ui\\src\\view\\Group.vue","mtime":1703809564000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1710142166000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1710142168000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglpbXBvcnQgR3JvdXBJdGVtIGZyb20gJy4uL2NvbXBvbmVudHMvZ3JvdXAvR3JvdXBJdGVtJzsKCWltcG9ydCBGaWxlVXBsb2FkIGZyb20gJy4uL2NvbXBvbmVudHMvY29tbW9uL0ZpbGVVcGxvYWQnOwoJaW1wb3J0IEdyb3VwTWVtYmVyIGZyb20gJy4uL2NvbXBvbmVudHMvZ3JvdXAvR3JvdXBNZW1iZXIudnVlJzsKCWltcG9ydCBBZGRHcm91cE1lbWJlciBmcm9tICcuLi9jb21wb25lbnRzL2dyb3VwL0FkZEdyb3VwTWVtYmVyLnZ1ZSc7CglpbXBvcnQgSGVhZEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvY29tbW9uL0hlYWRJbWFnZS52dWUnOwoJZXhwb3J0IGRlZmF1bHQgewoJCW5hbWU6ICJncm91cCIsCgkJY29tcG9uZW50czogewoJCQlHcm91cEl0ZW0sCgkJCUdyb3VwTWVtYmVyLAoJCQlGaWxlVXBsb2FkLAoJCQlBZGRHcm91cE1lbWJlciwKCQkJSGVhZEltYWdlCgkJfSwKCQlkYXRhKCkgewoJCQlyZXR1cm4gewoJCQkJc2VhcmNoVGV4dDogIiIsCgkJCQltYXhTaXplOiA1ICogMTAyNCAqIDEwMjQsCgkJCQlhY3RpdmVHcm91cDoge30sCgkJCQlncm91cE1lbWJlcnM6IFtdLAoJCQkJc2hvd0FkZEdyb3VwTWVtYmVyOiBmYWxzZSwKCQkJCXJ1bGVzOiB7CgkJCQkJbmFtZTogW3sKCQkJCQkJcmVxdWlyZWQ6IHRydWUsCgkJCQkJCW1lc3NhZ2U6ICfor7fovpPlhaXnvqTogYrlkI3np7AnLAoJCQkJCQl0cmlnZ2VyOiAnYmx1cicKCQkJCQl9XQoJCQkJfQoJCQl9OwoJCX0sCgkJbWV0aG9kczogewoJCQlvbkNyZWF0ZUdyb3VwKCkgewoJCQkJdGhpcy4kcHJvbXB0KCfor7fovpPlhaXnvqTogYrlkI3np7AnLCAn5Yib5bu6576k6IGKJywgewoJCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKCQkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKCQkJCQlpbnB1dFBhdHRlcm46IC9cUy8sCgkJCQkJaW5wdXRFcnJvck1lc3NhZ2U6ICfor7fovpPlhaXnvqTogYrlkI3np7AnCgkJCQl9KS50aGVuKChvKSA9PiB7CgkJCQkJbGV0IHVzZXJJbmZvID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlclN0b3JlLnVzZXJJbmZvOwoJCQkJCWxldCBkYXRhID0gewoJCQkJCQluYW1lOiBvLnZhbHVlLAoJCQkJCQlyZW1hcms6IG8udmFsdWUsCgkJCQkJCWFsaWFzTmFtZTogdXNlckluZm8ubmFtZSwKCQkJCQkJb3duZXJJZDogdXNlckluZm8uaWQKCQkJCQl9CgkJCQkJdGhpcy4kaHR0cCh7CgkJCQkJCXVybDogYC9ncm91cC9jcmVhdGU/Z3JvdXBOYW1lPSR7by52YWx1ZX1gLAoJCQkJCQltZXRob2Q6ICdwb3N0JywKCQkJCQkJZGF0YTogZGF0YQoJCQkJCX0pLnRoZW4oKGdyb3VwKSA9PiB7CgkJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgiYWRkR3JvdXAiLCBncm91cCk7CgkJCQkJfSkKCQkJCX0pCgkJCX0sCgkJCW9uQWN0aXZlSXRlbShncm91cCwgaW5kZXgpIHsKCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgiYWN0aXZlR3JvdXAiLCBpbmRleCk7CgkJCQkvLyBzdG9yZeaVsOaNruS4jeiDveebtOaOpeS/ruaUue+8jOaJgOS7pea3seaLt+i0neS4gOS7veWGheWtmAoJCQkJdGhpcy5hY3RpdmVHcm91cCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZ3JvdXApKTsKCQkJCS8vIOmHjeaWsOWKoOi9vee+pOaIkOWRmAoJCQkJdGhpcy5sb2FkR3JvdXBNZW1iZXJzKCk7CgkJCX0sCgkJCW9uSW52aXRlTWVtYmVyKCkgewoJCQkJdGhpcy5zaG93QWRkR3JvdXBNZW1iZXIgPSB0cnVlOwoJCQl9LAoJCQlvbkNsb3NlQWRkR3JvdXBNZW1iZXIoKSB7CgkJCQl0aGlzLnNob3dBZGRHcm91cE1lbWJlciA9IGZhbHNlOwoJCQl9LAoJCQlvblVwbG9hZFN1Y2Nlc3MoZGF0YSkgewoJCQkJdGhpcy5hY3RpdmVHcm91cC5oZWFkSW1hZ2UgPWRhdGEub3JpZ2luVXJsOwoJCQkJdGhpcy5hY3RpdmVHcm91cC5oZWFkSW1hZ2VUaHVtYiA9IGRhdGEudGh1bWJVcmw7CgkJCX0sCgkJCW9uU2F2ZUdyb3VwKCkgewoJCQkJdGhpcy4kcmVmc1snZ3JvdXBGb3JtJ10udmFsaWRhdGUoKHZhbGlkKSA9PiB7CgkJCQkJaWYgKHZhbGlkKSB7CgkJCQkJCWxldCB2byA9IHRoaXMuYWN0aXZlR3JvdXA7CgkJCQkJCXRoaXMuJGh0dHAoewoJCQkJCQkJdXJsOiAiL2dyb3VwL21vZGlmeSIsCgkJCQkJCQltZXRob2Q6ICJwdXQiLAoJCQkJCQkJZGF0YTogdm8KCQkJCQkJfSkudGhlbigoZ3JvdXApID0+IHsKCQkJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlR3JvdXAiLCBncm91cCk7CgkJCQkJCQl0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwoJCQkJCQl9KQoJCQkJCX0KCQkJCX0pOwoJCQl9LAoJCQlvbkRpc3NvbHZlKCkgewoJCQkJdGhpcy4kY29uZmlybSgn56Gu6K6k6KaB6Kej5pWj576k6IGK5ZCXPycsICfnoa7orqTop6PmlaM/JywgewoJCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKCQkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKCQkJCQl0eXBlOiAnd2FybmluZycKCQkJCX0pLnRoZW4oKCkgPT4gewoJCQkJCXRoaXMuJGh0dHAoewoJCQkJCQl1cmw6IGAvZ3JvdXAvZGVsZXRlLyR7dGhpcy5hY3RpdmVHcm91cC5pZH1gLAoJCQkJCQltZXRob2Q6ICdkZWxldGUnCgkJCQkJfSkudGhlbigoKSA9PiB7CgkJCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyhg576k6IGKJyR7dGhpcy5hY3RpdmVHcm91cC5uYW1lfSflt7Lop6PmlaNgKTsKCQkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJyZW1vdmVHcm91cCIsIHRoaXMuYWN0aXZlR3JvdXAuaWQpOwoJCQkJCQl0aGlzLiRzdG9yZS5jb21taXQoInJlbW92ZUdyb3VwQ2hhdCIsIHRoaXMuYWN0aXZlR3JvdXAuaWQpOwoJCQkJCQl0aGlzLnJlc2V0KCk7CgkJCQkJfSk7CgkJCQl9KQoKCQkJfSwKCQkJb25LaWNrKG1lbWJlcikgewoJCQkJdGhpcy4kY29uZmlybShg56Gu5a6a5bCG5oiQ5ZGYJyR7bWVtYmVyLmFsaWFzTmFtZX0n56e75Ye6576k6IGK5ZCX77yfYCwgJ+ehruiupOenu+WHuj8nLCB7CgkJCQkJY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAoJCQkJCWNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAoJCQkJCXR5cGU6ICd3YXJuaW5nJwoJCQkJfSkudGhlbigoKSA9PiB7CgkJCQkJdGhpcy4kaHR0cCh7CgkJCQkJCXVybDogYC9ncm91cC9raWNrLyR7dGhpcy5hY3RpdmVHcm91cC5pZH1gLAoJCQkJCQltZXRob2Q6ICdkZWxldGUnLAoJCQkJCQlwYXJhbXM6IHsKCQkJCQkJCXVzZXJJZDogbWVtYmVyLnVzZXJJZAoJCQkJCQl9CgkJCQkJfSkudGhlbigoKSA9PiB7CgkJCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyhg5bey5bCGJHttZW1iZXIuYWxpYXNOYW1lfeenu+WHuue+pOiBimApOwoJCQkJCQltZW1iZXIucXVpdCA9IHRydWU7CgkJCQkJfSk7CgkJCQl9KQoKCQkJfSwKCQkJb25RdWl0KCkgewoJCQkJdGhpcy4kY29uZmlybSgn6YCA5Ye6576k6IGK5ZCO5bCG5LiN5YaN5o6l5Y+X576k6YeM55qE5raI5oGv77yM56Gu6K6k6YCA5Ye65ZCX77yfJywgJ+ehruiupOmAgOWHuj8nLCB7CgkJCQkJY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAoJCQkJCWNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAoJCQkJCXR5cGU6ICd3YXJuaW5nJwoJCQkJfSkudGhlbigoKSA9PiB7CgkJCQkJdGhpcy4kaHR0cCh7CgkJCQkJCXVybDogYC9ncm91cC9xdWl0LyR7dGhpcy5hY3RpdmVHcm91cC5pZH1gLAoJCQkJCQltZXRob2Q6ICdkZWxldGUnCgkJCQkJfSkudGhlbigoKSA9PiB7CgkJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgicmVtb3ZlR3JvdXAiLCB0aGlzLmFjdGl2ZUdyb3VwLmlkKTsKCQkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJyZW1vdmVHcm91cENoYXQiLCB0aGlzLmFjdGl2ZUdyb3VwLmlkKTsKCQkJCQkJdGhpcy5yZXNldCgpOwoJCQkJCX0pOwoJCQkJfSkKCgkJCX0sCgkJCW9uU2VuZE1lc3NhZ2UoKSB7CgkJCQlsZXQgY2hhdCA9IHsKCQkJCQl0eXBlOiAnR1JPVVAnLAoJCQkJCXRhcmdldElkOiB0aGlzLmFjdGl2ZUdyb3VwLmlkLAoJCQkJCXNob3dOYW1lOiB0aGlzLmFjdGl2ZUdyb3VwLnJlbWFyaywKCQkJCQloZWFkSW1hZ2U6IHRoaXMuYWN0aXZlR3JvdXAuaGVhZEltYWdlLAoJCQkJfTsKCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgib3BlbkNoYXQiLCBjaGF0KTsKCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgiYWN0aXZlQ2hhdCIsIDApOwoJCQkJdGhpcy4kcm91dGVyLnB1c2goIi9ob21lL2NoYXQiKTsKCQkJfSwKCQkJbG9hZEdyb3VwTWVtYmVycygpIHsKCQkJCXRoaXMuJGh0dHAoewoJCQkJCXVybDogYC9ncm91cC9tZW1iZXJzLyR7dGhpcy5hY3RpdmVHcm91cC5pZH1gLAoJCQkJCW1ldGhvZDogImdldCIKCQkJCX0pLnRoZW4oKG1lbWJlcnMpID0+IHsKCQkJCQl0aGlzLmdyb3VwTWVtYmVycyA9IG1lbWJlcnM7CgkJCQl9KQoJCQl9LAoJCQlyZXNldCgpewoJCQkJdGhpcy5hY3RpdmVHcm91cD17fTsKCQkJCXRoaXMuZ3JvdXBNZW1iZXJzPVtdOwoJCQl9CgkJfSwKCQljb21wdXRlZDogewoJCQlncm91cFN0b3JlKCkgewoJCQkJcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmdyb3VwU3RvcmU7CgkJCX0sCgkJCW93bmVyTmFtZSgpIHsKCQkJCWxldCBtZW1iZXIgPSB0aGlzLmdyb3VwTWVtYmVycy5maW5kKChtKSA9PiBtLnVzZXJJZCA9PSB0aGlzLmFjdGl2ZUdyb3VwLm93bmVySWQpOwoJCQkJcmV0dXJuIG1lbWJlciAmJiBtZW1iZXIuYWxpYXNOYW1lOwoJCQl9LAoJCQlpc093bmVyKCkgewoJCQkJcmV0dXJuIHRoaXMuYWN0aXZlR3JvdXAub3duZXJJZCA9PSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyU3RvcmUudXNlckluZm8uaWQ7CgkJCX0sCgkJCWltYWdlQWN0aW9uKCkgewoJCQkJcmV0dXJuIGAvaW1hZ2UvdXBsb2FkYDsKCQkJfQoJCX0KCX0K"},{"version":3,"sources":["Group.vue"],"names":[],"mappings":";AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Group.vue","sourceRoot":"src/view","sourcesContent":["<template>\n\t<el-container class=\"group-page\">\n\t\t<el-aside width=\"260px\" class=\"group-list-box\">\n\t\t\t<div class=\"group-list-header\">\n\t\t\t\t<div class=\"group-list-search\">\n\t\t\t\t\t<el-input width=\"200px\" placeholder=\"搜索群聊\" v-model=\"searchText\">\n\t\t\t\t\t\t<el-button slot=\"append\" icon=\"el-icon-search\"></el-button>\n\t\t\t\t\t</el-input>\n\t\t\t\t</div>\n\t\t\t\t<el-button plain icon=\"el-icon-plus\" style=\"border: none; padding: 12px; font-size: 20px;color: black;\"\n\t\t\t\t\ttitle=\"创建群聊\" @click=\"onCreateGroup()\"></el-button>\n\t\t\t</div>\n\t\t\t<el-scrollbar class=\"group-list-items\">\n\t\t\t\t<div v-for=\"(group,index) in groupStore.groups\" :key=\"index\">\n\t\t\t\t\t<group-item v-show=\"group.remark.startsWith(searchText)\" :group=\"group\"\n\t\t\t\t\t\t:active=\"group === groupStore.activeGroup\" @click.native=\"onActiveItem(group,index)\">\n\t\t\t\t\t</group-item>\n\t\t\t\t</div>\n\t\t\t</el-scrollbar>\n\t\t</el-aside>\n\t\t<el-container class=\"group-box\">\n\t\t\t<div class=\"group-header\" v-show=\"activeGroup.id\">\n\t\t\t\t{{activeGroup.remark}}({{groupMembers.length}})\n\t\t\t</div>\n\t\t\t<el-scrollbar class=\"group-container\">\n\t\t\t\t<div v-show=\"activeGroup.id\">\n\t\t\t\t\t<div class=\"group-info\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<file-upload  v-show=\"isOwner\" class=\"avatar-uploader\" :action=\"imageAction\"\n\t\t\t\t\t\t\t\t:showLoading=\"true\" :maxSize=\"maxSize\" @success=\"onUploadSuccess\"\n\t\t\t\t\t\t\t\t:fileTypes=\"['image/jpeg', 'image/png', 'image/jpg','image/webp']\">\n\t\t\t\t\t\t\t\t<img v-if=\"activeGroup.headImage\" :src=\"activeGroup.headImage\" class=\"avatar\">\n\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t<head-image  v-show=\"!isOwner\" class=\"avatar\" :size=\"200\" \n\t\t\t\t\t\t\t\t:url=\"activeGroup.headImage\"\n\t\t\t\t\t\t\t\t:name=\"activeGroup.remark\">\n\t\t\t\t\t\t\t</head-image>\n\t\t\t\t\t\t\t<el-button class=\"send-btn\" icon=\"el-icon-chat-dot-round\" type=\"primary\" @click=\"onSendMessage()\">发送消息</el-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<el-form class=\"group-form\" label-width=\"130px\" :model=\"activeGroup\" :rules=\"rules\"\n\t\t\t\t\t\t\tref=\"groupForm\">\n\t\t\t\t\t\t\t<el-form-item label=\"群聊名称\" prop=\"name\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"activeGroup.name\" :disabled=\"!isOwner\" maxlength=\"20\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"群主\">\n\t\t\t\t\t\t\t\t<el-input :value=\"ownerName\" disabled></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"备注\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"activeGroup.remark\" placeholder=\"群聊的备注仅自己可见\"\n\t\t\t\t\t\t\t\t\tmaxlength=\"20\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"我在本群的昵称\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"activeGroup.aliasName\" placeholder=\"\" maxlength=\"20\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"群公告\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"activeGroup.notice\" :disabled=\"!isOwner\" type=\"textarea\"\n\t\t\t\t\t\t\t\t\tmaxlength=\"1024\" placeholder=\"群主未设置\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<el-button type=\"success\" @click=\"onSaveGroup()\">提交</el-button>\n\t\t\t\t\t\t\t\t<el-button type=\"danger\" v-show=\"!isOwner\" @click=\"onQuit()\">退出群聊</el-button>\n\t\t\t\t\t\t\t\t<el-button type=\"danger\" v-show=\"isOwner\" @click=\"onDissolve()\">解散群聊</el-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-form>\n\t\t\t\t\t</div>\n\t\t\t\t\t<el-divider content-position=\"center\"></el-divider>\n\t\t\t\t\t<el-scrollbar style=\"height:200px;\">\n\t\t\t\t\t\t<div class=\"group-member-list\">\n\t\t\t\t\t\t\t<div v-for=\"(member) in groupMembers\" :key=\"member.id\">\n\t\t\t\t\t\t\t\t<group-member v-show=\"!member.quit\" class=\"group-member\" :member=\"member\"\n\t\t\t\t\t\t\t\t\t:showDel=\"isOwner&&member.userId!=activeGroup.ownerId\"\n\t\t\t\t\t\t\t\t\t@del=\"onKick\"></group-member>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"group-invite\">\n\t\t\t\t\t\t\t\t<div class=\"invite-member-btn\" title=\"邀请好友进群聊\" @click=\"onInviteMember()\">\n\t\t\t\t\t\t\t\t\t<i class=\"el-icon-plus\"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"invite-member-text\">邀请</div>\n\t\t\t\t\t\t\t\t<add-group-member :visible=\"showAddGroupMember\" :groupId=\"activeGroup.id\"\n\t\t\t\t\t\t\t\t\t:members=\"groupMembers\" @reload=\"loadGroupMembers\"\n\t\t\t\t\t\t\t\t\t@close=\"onCloseAddGroupMember\"></add-group-member>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</el-scrollbar>\n\t\t\t\t</div>\n\t\t\t</el-scrollbar>\n\t\t</el-container>\n\t</el-container>\n</template>\n\n\n<script>\n\timport GroupItem from '../components/group/GroupItem';\n\timport FileUpload from '../components/common/FileUpload';\n\timport GroupMember from '../components/group/GroupMember.vue';\n\timport AddGroupMember from '../components/group/AddGroupMember.vue';\n\timport HeadImage from '../components/common/HeadImage.vue';\n\texport default {\n\t\tname: \"group\",\n\t\tcomponents: {\n\t\t\tGroupItem,\n\t\t\tGroupMember,\n\t\t\tFileUpload,\n\t\t\tAddGroupMember,\n\t\t\tHeadImage\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tsearchText: \"\",\n\t\t\t\tmaxSize: 5 * 1024 * 1024,\n\t\t\t\tactiveGroup: {},\n\t\t\t\tgroupMembers: [],\n\t\t\t\tshowAddGroupMember: false,\n\t\t\t\trules: {\n\t\t\t\t\tname: [{\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tmessage: '请输入群聊名称',\n\t\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\tonCreateGroup() {\n\t\t\t\tthis.$prompt('请输入群聊名称', '创建群聊', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\tinputPattern: /\\S/,\n\t\t\t\t\tinputErrorMessage: '请输入群聊名称'\n\t\t\t\t}).then((o) => {\n\t\t\t\t\tlet userInfo = this.$store.state.userStore.userInfo;\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\tname: o.value,\n\t\t\t\t\t\tremark: o.value,\n\t\t\t\t\t\taliasName: userInfo.name,\n\t\t\t\t\t\townerId: userInfo.id\n\t\t\t\t\t}\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: `/group/create?groupName=${o.value}`,\n\t\t\t\t\t\tmethod: 'post',\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}).then((group) => {\n\t\t\t\t\t\tthis.$store.commit(\"addGroup\", group);\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\tonActiveItem(group, index) {\n\t\t\t\tthis.$store.commit(\"activeGroup\", index);\n\t\t\t\t// store数据不能直接修改，所以深拷贝一份内存\n\t\t\t\tthis.activeGroup = JSON.parse(JSON.stringify(group));\n\t\t\t\t// 重新加载群成员\n\t\t\t\tthis.loadGroupMembers();\n\t\t\t},\n\t\t\tonInviteMember() {\n\t\t\t\tthis.showAddGroupMember = true;\n\t\t\t},\n\t\t\tonCloseAddGroupMember() {\n\t\t\t\tthis.showAddGroupMember = false;\n\t\t\t},\n\t\t\tonUploadSuccess(data) {\n\t\t\t\tthis.activeGroup.headImage =data.originUrl;\n\t\t\t\tthis.activeGroup.headImageThumb = data.thumbUrl;\n\t\t\t},\n\t\t\tonSaveGroup() {\n\t\t\t\tthis.$refs['groupForm'].validate((valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tlet vo = this.activeGroup;\n\t\t\t\t\t\tthis.$http({\n\t\t\t\t\t\t\turl: \"/group/modify\",\n\t\t\t\t\t\t\tmethod: \"put\",\n\t\t\t\t\t\t\tdata: vo\n\t\t\t\t\t\t}).then((group) => {\n\t\t\t\t\t\t\tthis.$store.commit(\"updateGroup\", group);\n\t\t\t\t\t\t\tthis.$message.success(\"修改成功\");\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tonDissolve() {\n\t\t\t\tthis.$confirm('确认要解散群聊吗?', '确认解散?', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: `/group/delete/${this.activeGroup.id}`,\n\t\t\t\t\t\tmethod: 'delete'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.$message.success(`群聊'${this.activeGroup.name}'已解散`);\n\t\t\t\t\t\tthis.$store.commit(\"removeGroup\", this.activeGroup.id);\n\t\t\t\t\t\tthis.$store.commit(\"removeGroupChat\", this.activeGroup.id);\n\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t});\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tonKick(member) {\n\t\t\t\tthis.$confirm(`确定将成员'${member.aliasName}'移出群聊吗？`, '确认移出?', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: `/group/kick/${this.activeGroup.id}`,\n\t\t\t\t\t\tmethod: 'delete',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tuserId: member.userId\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.$message.success(`已将${member.aliasName}移出群聊`);\n\t\t\t\t\t\tmember.quit = true;\n\t\t\t\t\t});\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tonQuit() {\n\t\t\t\tthis.$confirm('退出群聊后将不再接受群里的消息，确认退出吗？', '确认退出?', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: `/group/quit/${this.activeGroup.id}`,\n\t\t\t\t\t\tmethod: 'delete'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.$store.commit(\"removeGroup\", this.activeGroup.id);\n\t\t\t\t\t\tthis.$store.commit(\"removeGroupChat\", this.activeGroup.id);\n\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t});\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tonSendMessage() {\n\t\t\t\tlet chat = {\n\t\t\t\t\ttype: 'GROUP',\n\t\t\t\t\ttargetId: this.activeGroup.id,\n\t\t\t\t\tshowName: this.activeGroup.remark,\n\t\t\t\t\theadImage: this.activeGroup.headImage,\n\t\t\t\t};\n\t\t\t\tthis.$store.commit(\"openChat\", chat);\n\t\t\t\tthis.$store.commit(\"activeChat\", 0);\n\t\t\t\tthis.$router.push(\"/home/chat\");\n\t\t\t},\n\t\t\tloadGroupMembers() {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/members/${this.activeGroup.id}`,\n\t\t\t\t\tmethod: \"get\"\n\t\t\t\t}).then((members) => {\n\t\t\t\t\tthis.groupMembers = members;\n\t\t\t\t})\n\t\t\t},\n\t\t\treset(){\n\t\t\t\tthis.activeGroup={};\n\t\t\t\tthis.groupMembers=[];\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tgroupStore() {\n\t\t\t\treturn this.$store.state.groupStore;\n\t\t\t},\n\t\t\townerName() {\n\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == this.activeGroup.ownerId);\n\t\t\t\treturn member && member.aliasName;\n\t\t\t},\n\t\t\tisOwner() {\n\t\t\t\treturn this.activeGroup.ownerId == this.$store.state.userStore.userInfo.id;\n\t\t\t},\n\t\t\timageAction() {\n\t\t\t\treturn `/image/upload`;\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t.group-page {\n\t\t.group-list-box {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tborder: #dddddd solid 1px;\n\t\t\tbackground: white;\n\n\t\t\t.group-list-header {\n\t\t\t\theight: 50px;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 5px;\n\t\t\t\tbackground-color: white;\n\n\t\t\t\t.group-list-search {\n\t\t\t\t\tflex: 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.group-list-items {\n\t\t\t\tflex: 1;\n\t\t\t}\n\t\t}\n\n\t\t.group-box {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tborder: #dddddd solid 1px;\n\n\t\t\t.group-header {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 50px;\n\t\t\t\tpadding: 5px;\n\t\t\t\tline-height: 50px;\n\t\t\t\tfont-size: 20px;\n\t\t\t\tfont-weight: 600;\n\t\t\t\ttext-align: left;\n\t\t\t\ttext-indent: 10px;\n\t\t\t\tbackground-color: white;\n\t\t\t\tborder: #dddddd solid 1px;\n\t\t\t}\n\n\t\t\t.group-container {\n\t\t\t\tpadding: 20px;\n\t\t\t\t.group-info {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tpadding: 5px 20px;\n\n\t\t\t\t\t.group-form {\n\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\tpadding-left: 40px;\n\t\t\t\t\t\tmax-width: 700px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.avatar-uploader {\n\t\t\t\t\t\ttext-align: left;\n\n\t\t\t\t\t\t.el-upload {\n\t\t\t\t\t\t\tborder: 1px dashed #d9d9d9 !important;\n\t\t\t\t\t\t\tborder-radius: 6px;\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.el-upload:hover {\n\t\t\t\t\t\t\tborder-color: #409EFF;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.avatar-uploader-icon {\n\t\t\t\t\t\t\tfont-size: 28px;\n\t\t\t\t\t\t\tcolor: #8c939d;\n\t\t\t\t\t\t\twidth: 200px;\n\t\t\t\t\t\t\theight: 200px;\n\t\t\t\t\t\t\tline-height: 200px;\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.avatar {\n\t\t\t\t\t\t\twidth: 200px;\n\t\t\t\t\t\t\theight: 200px;\n\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t.send-btn {\n\t\t\t\t\t\tmargin-top: 20px;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.group-member-list {\n\t\t\t\t\tpadding: 5px 20px;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tflex-wrap: wrap;\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\ttext-align: center;\n\n\t\t\t\t\t.group-member {\n\t\t\t\t\t\tmargin-right: 15px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.group-invite {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\twidth: 60px;\n\n\t\t\t\t\t\t.invite-member-btn {\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\theight: 60px;\n\t\t\t\t\t\t\tline-height: 60px;\n\t\t\t\t\t\t\tborder: #cccccc solid 1px;\n\t\t\t\t\t\t\tfont-size: 25px;\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\tbox-sizing: border-box;\n\n\t\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\t\tborder: #aaaaaa solid 1px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.invite-member-text {\n\t\t\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\theight: 30px;\n\t\t\t\t\t\t\tline-height: 30px;\n\t\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\t\t\toverflow: hidden\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>"]}]}