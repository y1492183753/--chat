{"remainingRequest":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\im-ui\\src\\components\\friend\\AddFriend.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\im-ui\\src\\components\\friend\\AddFriend.vue","mtime":1703809564000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1710142166000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1710142168000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglpbXBvcnQgSGVhZEltYWdlIGZyb20gJy4uL2NvbW1vbi9IZWFkSW1hZ2UudnVlJwoJCgkKCWV4cG9ydCBkZWZhdWx0IHsKCQluYW1lOiAiYWRkRnJpZW5kIiwKCQljb21wb25lbnRzOntIZWFkSW1hZ2V9LAoJCWRhdGEoKSB7CgkJCXJldHVybiB7CgkJCQl1c2VyczogW10sCgkJCQlzZWFyY2hUZXh0OiAiIgoJCQl9CgkJfSwKCQlwcm9wczogewoJCQlkaWFsb2dWaXNpYmxlOiB7CgkJCQl0eXBlOiBCb29sZWFuCgkJCX0KCQl9LAoJCW1ldGhvZHM6IHsKCQkJb25DbG9zZSgpIHsKCQkJCXRoaXMuJGVtaXQoImNsb3NlIik7CgkJCX0sCgkJCW9uU2VhcmNoKCkgewoJCQkJdGhpcy4kaHR0cCh7CgkJCQkJdXJsOiAiL3VzZXIvZmluZEJ5TmFtZSIsCgkJCQkJbWV0aG9kOiAiZ2V0IiwKCQkJCQlwYXJhbXM6IHsKCQkJCQkJbmFtZTogdGhpcy5zZWFyY2hUZXh0CgkJCQkJfQoJCQkJfSkudGhlbigoZGF0YSkgPT4gewoJCQkJCXRoaXMudXNlcnMgPSBkYXRhOwoJCQkJfSkKCQkJfSwKCQkJb25BZGRGcmllbmQodXNlcil7CgkJCQl0aGlzLiRodHRwKHsKCQkJCQl1cmw6ICIvZnJpZW5kL2FkZCIsCgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJcGFyYW1zOiB7CgkJCQkJCWZyaWVuZElkOiB1c2VyLmlkCgkJCQkJfQoJCQkJfSkudGhlbigoZGF0YSkgPT4gewoJCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5re75Yqg5oiQ5Yqf77yM5a+55pa55bey5oiQ5Li65oKo55qE5aW95Y+LIik7CgkJCQkJbGV0IGZyaWVuZCA9IHsKCQkJCQkJaWQ6dXNlci5pZCwKCQkJCQkJbmlja05hbWU6IHVzZXIubmlja05hbWUsCgkJCQkJCWhlYWRJbWFnZTogdXNlci5oZWFkSW1hZ2UsCgkJCQkJCW9ubGluZTogdXNlci5vbmxpbmUKCQkJCQl9CgkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJhZGRGcmllbmQiLGZyaWVuZCk7CgkJCQl9KQoJCQl9LAoJCQlpc0ZyaWVuZCh1c2VySWQpewoJCQkJbGV0IGZyaWVuZHMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5mcmllbmRTdG9yZS5mcmllbmRzOwoJCQkJbGV0IGZyaWVuZCA9IGZyaWVuZHMuZmluZCgoZik9PiBmLmlkPT11c2VySWQpOwkJCQoJCQkJcmV0dXJuIGZyaWVuZCAhPSB1bmRlZmluZWQ7CgkJCX0KCQl9Cgl9Cg=="},{"version":3,"sources":["AddFriend.vue"],"names":[],"mappings":";AAgCA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddFriend.vue","sourceRoot":"src/components/friend","sourcesContent":["<template>\n\t<el-dialog title=\"添加好友\" :visible.sync=\"dialogVisible\" width=\"30%\" :before-close=\"onClose\">\n\t\t<el-input  placeholder=\"输入用户名或昵称,最多展示20条\" class=\"input-with-select\" v-model=\"searchText\" @keyup.enter.native=\"onSearch()\">\n\t\t\t<el-button slot=\"append\" icon=\"el-icon-search\" @click=\"onSearch()\"></el-button>\n\t\t</el-input>\n\t\t<el-scrollbar style=\"height:400px\">\n\t\t\t<div v-for=\"(user) in users\" :key=\"user.id\" v-show=\"user.id != $store.state.userStore.userInfo.id\">\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<div class=\"avatar\">\n\t\t\t\t\t\t<head-image :name=\"user.nickName\" \n\t\t\t\t\t\t:url=\"user.headImage\"\n\t\t\t\t\t\t:online=\"user.online\"\n\t\t\t\t\t\t></head-image>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"add-friend-text\">\n\t\t\t\t\t\t<div class=\"text-user-name\">\n\t\t\t\t\t\t\t<div>{{user.userName}}</div>\n\t\t\t\t\t\t\t<div :class=\"user.online ? 'online-status  online':'online-status'\">{{ user.online?\"[在线]\":\"[离线]\"}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"text-nick-name\">\n\t\t\t\t\t\t\t<div>昵称:{{user.nickName}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t <el-button type=\"success\" size=\"small\" v-show=\"!isFriend(user.id)\" plain @click=\"onAddFriend(user)\">添加</el-button>\n\t\t\t\t\t <el-button type=\"info\" size=\"small\" v-show=\"isFriend(user.id)\" plain disabled>已添加</el-button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-scrollbar>\n\t</el-dialog>\n</template>\n\n<script>\n\timport HeadImage from '../common/HeadImage.vue'\n\t\n\t\n\texport default {\n\t\tname: \"addFriend\",\n\t\tcomponents:{HeadImage},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tusers: [],\n\t\t\t\tsearchText: \"\"\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tdialogVisible: {\n\t\t\t\ttype: Boolean\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tonClose() {\n\t\t\t\tthis.$emit(\"close\");\n\t\t\t},\n\t\t\tonSearch() {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: \"/user/findByName\",\n\t\t\t\t\tmethod: \"get\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tname: this.searchText\n\t\t\t\t\t}\n\t\t\t\t}).then((data) => {\n\t\t\t\t\tthis.users = data;\n\t\t\t\t})\n\t\t\t},\n\t\t\tonAddFriend(user){\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: \"/friend/add\",\n\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tfriendId: user.id\n\t\t\t\t\t}\n\t\t\t\t}).then((data) => {\n\t\t\t\t\tthis.$message.success(\"添加成功，对方已成为您的好友\");\n\t\t\t\t\tlet friend = {\n\t\t\t\t\t\tid:user.id,\n\t\t\t\t\t\tnickName: user.nickName,\n\t\t\t\t\t\theadImage: user.headImage,\n\t\t\t\t\t\tonline: user.online\n\t\t\t\t\t}\n\t\t\t\t\tthis.$store.commit(\"addFriend\",friend);\n\t\t\t\t})\n\t\t\t},\n\t\t\tisFriend(userId){\n\t\t\t\tlet friends = this.$store.state.friendStore.friends;\n\t\t\t\tlet friend = friends.find((f)=> f.id==userId);\t\t\t\n\t\t\t\treturn friend != undefined;\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style  lang=\"scss\">\n\t.el-dialog {\n\t\tmin-width: 400px;\n\t}\n\t.item {\n\t\theight: 65px;\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\tpadding-left: 15px;\n\t\talign-items: center;\n\t\tpadding-right: 25px;\n\t\t\n\t\t.add-friend-text {\n\t\t\tmargin-left: 15px;\n\t\t\tflex: 3;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tflex-shrink: 0;\n\t\t\toverflow: hidden;\n\t\t\n\t\t\t.text-user-name{\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\tfont-weight: 600;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tline-height: 25px;\n\t\t\n\t\t\t\t.online-status{\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t&.online{\n\t\t\t\t\t\tcolor: #5fb878;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.text-nick-name{\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\tfont-size: 12px;\n\t\t\t\tline-height: 20px;\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n</style>\n"]}]}