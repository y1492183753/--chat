{"remainingRequest":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\im-ui\\src\\view\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\im-ui\\src\\view\\Login.vue","mtime":1711262437721},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1710142166000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1710142168000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgSWNwIGZyb20gJy4uL2NvbXBvbmVudHMvY29tbW9uL0ljcC52dWUnDQpleHBvcnQgZGVmYXVsdCB7DQoJbmFtZTogImxvZ2luIiwNCgljb21wb25lbnRzOiB7DQoJCUljcA0KCX0sDQoJZGF0YSgpIHsNCgkJdmFyIGNoZWNrVXNlcm5hbWUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQoJCQlpZiAoIXZhbHVlKSB7DQoJCQkJcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl55So5oi35ZCNJykpOw0KCQkJfQ0KCQkJY2FsbGJhY2soKTsNCgkJfTsNCgkJdmFyIGNoZWNrUGFzc3dvcmQgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQoJCQlpZiAodmFsdWUgPT09ICcnKSB7DQoJCQkJY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXlr4bnoIEnKSk7DQoJCQl9DQoJCQljYWxsYmFjaygpOw0KDQoJCX07DQoJCXJldHVybiB7DQoJCQlsb2dpbkZvcm06IHsNCgkJCQl0ZXJtaW5hbDogdGhpcy4kZW51bXMuVEVSTUlOQUxfVFlQRS5XRUIsDQoJCQkJdXNlck5hbWU6ICcnLA0KCQkJCXBhc3N3b3JkOiAnJw0KCQkJfSwNCgkJCXJ1bGVzOiB7DQoJCQkJdXNlck5hbWU6IFt7DQoJCQkJCXZhbGlkYXRvcjogY2hlY2tVc2VybmFtZSwNCgkJCQkJdHJpZ2dlcjogJ2JsdXInDQoJCQkJfV0sDQoJCQkJcGFzc3dvcmQ6IFt7DQoJCQkJCXZhbGlkYXRvcjogY2hlY2tQYXNzd29yZCwNCgkJCQkJdHJpZ2dlcjogJ2JsdXInDQoJCQkJfV0NCgkJCX0NCgkJfTsNCgl9LA0KCW1ldGhvZHM6IHsNCgkJc3VibWl0Rm9ybShmb3JtTmFtZSkgew0KCQkJdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQoJCQkJaWYgKHZhbGlkKSB7DQoJCQkJCXRoaXMuJGh0dHAoew0KCQkJCQkJdXJsOiAiL2xvZ2luIiwNCgkJCQkJCW1ldGhvZDogJ3Bvc3QnLA0KCQkJCQkJZGF0YTogdGhpcy5sb2dpbkZvcm0NCgkJCQkJfSkNCgkJCQkJCS50aGVuKChkYXRhKSA9PiB7DQoJCQkJCQkJLy8g5L+d5a2Y5a+G56CB5YiwY29va2llKOS4jeWuieWFqCkNCgkJCQkJCQl0aGlzLnNldENvb2tpZSgndXNlcm5hbWUnLCB0aGlzLmxvZ2luRm9ybS51c2VyTmFtZSk7DQoJCQkJCQkJdGhpcy5zZXRDb29raWUoJ3Bhc3N3b3JkJywgdGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQpOw0KCQkJCQkJCS8vIOS/neWtmHRva2VuDQoJCQkJCQkJc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYWNjZXNzVG9rZW4iLCBkYXRhLmFjY2Vzc1Rva2VuKTsNCgkJCQkJCQlzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJyZWZyZXNoVG9rZW4iLCBkYXRhLnJlZnJlc2hUb2tlbik7DQoJCQkJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLnmbvpmYbmiJDlip8iKTsNCgkJCQkJCQl0aGlzLiRyb3V0ZXIucHVzaCgiL2hvbWUvY2hhdCIpOw0KCQkJCQkJfSkNCg0KCQkJCX0NCgkJCX0pOw0KCQl9LA0KCQlyZXNldEZvcm0oZm9ybU5hbWUpIHsNCgkJCXRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7DQoJCX0sDQoJCS8vIOiOt+WPlmNvb2tpZeOAgQ0KCQlnZXRDb29raWUobmFtZSkgew0KCQkJbGV0IHJlZyA9IG5ldyBSZWdFeHAoIihefCApIiArIG5hbWUgKyAiPShbXjtdKikoO3wkKSIpOw0KCQkJbGV0IGFyciA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChyZWcpDQoJCQlpZiAoYXJyKSB7DQoJCQkJcmV0dXJuIHVuZXNjYXBlKGFyclsyXSk7DQoJCQl9DQoJCQlyZXR1cm4gJyc7DQoJCX0sDQoJCS8vIOiuvue9rmNvb2tpZSzlop7liqDliLB2dWXlrp7kvovmlrnkvr/lhajlsYDosIPnlKgNCgkJc2V0Q29va2llKG5hbWUsIHZhbHVlLCBleHBpcmVkYXlzKSB7DQoJCQl2YXIgZXhkYXRlID0gbmV3IERhdGUoKTsNCgkJCWV4ZGF0ZS5zZXREYXRlKGV4ZGF0ZS5nZXREYXRlKCkgKyBleHBpcmVkYXlzKTsNCgkJCWRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAiPSIgKyBlc2NhcGUodmFsdWUpICsgKChleHBpcmVkYXlzID09IG51bGwpID8gIiIgOiAiO2V4cGlyZXM9IiArIGV4ZGF0ZQ0KCQkJCS50b0dNVFN0cmluZygpKTsNCgkJfSwNCgkJLy8g5Yig6ZmkY29va2llDQoJCWRlbENvb2tpZShuYW1lKSB7DQoJCQl2YXIgZXhwID0gbmV3IERhdGUoKTsNCgkJCWV4cC5zZXRUaW1lKGV4cC5nZXRUaW1lKCkgLSAxKTsNCgkJCXZhciBjdmFsID0gdGhpcy5nZXRDb29raWUobmFtZSk7DQoJCQlpZiAoY3ZhbCAhPSBudWxsKSB7DQoJCQkJZG9jdW1lbnQuY29va2llID0gbmFtZSArICI9IiArIGN2YWwgKyAiO2V4cGlyZXM9IiArIGV4cC50b0dNVFN0cmluZygpOw0KCQkJfQ0KCQl9DQoJfSwNCgltb3VudGVkKCkgew0KCQl0aGlzLmxvZ2luRm9ybS51c2VyTmFtZSA9IHRoaXMuZ2V0Q29va2llKCJ1c2VybmFtZSIpOw0KCQkvLyBjb29raWXlrZjlr4bnoIHlubbkuI3lronlhajvvIzmmoLml7bmmK/kuLrkuobmlrnkvr8NCgkJdGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQgPSB0aGlzLmdldENvb2tpZSgicGFzc3dvcmQiKTsNCgl9DQp9DQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/view","sourcesContent":["<template>\r\n\t<div class=\"login-view\">\r\n\t\t<div class=\"login-content\">\r\n\r\n\t\t\t<div class=\"back-box\">\r\n\t\t\t\t<img class=\"image\" src=\"../assets/image/背景.jpg\" alt=\"backImage\">\r\n\t\t\t\t<img class=\"image2\" src=\"../assets/image/背景1.jpg\" alt=\"backImage\">\r\n\t\t\t\t<img class=\"image3\" src=\"../assets/image/背景2.jpg\" alt=\"backImage\">\r\n\t\t\t</div>\r\n\t\t\t<el-form class=\"login-form\" :model=\"loginForm\" status-icon :rules=\"rules\" ref=\"loginForm\" label-width=\"60px\"\r\n\t\t\t\t@keyup.enter.native=\"submitForm('loginForm')\">\r\n\t\t\t\t<div class=\"login-brand\">welcome to happyChatting</div>\r\n\t\t\t\t<el-form-item label=\"终端\" prop=\"userName\" v-show=\"false\">\r\n\t\t\t\t\t<el-input type=\"terminal\" v-model=\"loginForm.terminal\" autocomplete=\"off\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"用户名\" prop=\"userName\">\r\n\t\t\t\t\t<el-input type=\"userName\" v-model=\"loginForm.userName\" autocomplete=\"off\"\r\n\t\t\t\t\t\tplaceholder=\"用户名\"></el-input>\r\n\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"密码\" prop=\"password\">\r\n\t\t\t\t\t<el-input type=\"password\" v-model=\"loginForm.password\" autocomplete=\"off\"\r\n\t\t\t\t\t\tplaceholder=\"密码\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('loginForm')\">登陆</el-button>\r\n\t\t\t\t\t<el-button @click=\"resetForm('loginForm')\">清空</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<div class=\"register\">\r\n\t\t\t\t\t<router-link to=\"/register\">没有账号,前往注册</router-link>\r\n\t\t\t\t</div>\r\n\t\t\t</el-form>\r\n\t\t</div>\r\n\t\t<icp></icp>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport Icp from '../components/common/Icp.vue'\r\nexport default {\r\n\tname: \"login\",\r\n\tcomponents: {\r\n\t\tIcp\r\n\t},\r\n\tdata() {\r\n\t\tvar checkUsername = (rule, value, callback) => {\r\n\t\t\tif (!value) {\r\n\t\t\t\treturn callback(new Error('请输入用户名'));\r\n\t\t\t}\r\n\t\t\tcallback();\r\n\t\t};\r\n\t\tvar checkPassword = (rule, value, callback) => {\r\n\t\t\tif (value === '') {\r\n\t\t\t\tcallback(new Error('请输入密码'));\r\n\t\t\t}\r\n\t\t\tcallback();\r\n\r\n\t\t};\r\n\t\treturn {\r\n\t\t\tloginForm: {\r\n\t\t\t\tterminal: this.$enums.TERMINAL_TYPE.WEB,\r\n\t\t\t\tuserName: '',\r\n\t\t\t\tpassword: ''\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\tuserName: [{\r\n\t\t\t\t\tvalidator: checkUsername,\r\n\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t}],\r\n\t\t\t\tpassword: [{\r\n\t\t\t\t\tvalidator: checkPassword,\r\n\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tsubmitForm(formName) {\r\n\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.$http({\r\n\t\t\t\t\t\turl: \"/login\",\r\n\t\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\t\tdata: this.loginForm\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\t\t// 保存密码到cookie(不安全)\r\n\t\t\t\t\t\t\tthis.setCookie('username', this.loginForm.userName);\r\n\t\t\t\t\t\t\tthis.setCookie('password', this.loginForm.password);\r\n\t\t\t\t\t\t\t// 保存token\r\n\t\t\t\t\t\t\tsessionStorage.setItem(\"accessToken\", data.accessToken);\r\n\t\t\t\t\t\t\tsessionStorage.setItem(\"refreshToken\", data.refreshToken);\r\n\t\t\t\t\t\t\tthis.$message.success(\"登陆成功\");\r\n\t\t\t\t\t\t\tthis.$router.push(\"/home/chat\");\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tresetForm(formName) {\r\n\t\t\tthis.$refs[formName].resetFields();\r\n\t\t},\r\n\t\t// 获取cookie、\r\n\t\tgetCookie(name) {\r\n\t\t\tlet reg = new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\");\r\n\t\t\tlet arr = document.cookie.match(reg)\r\n\t\t\tif (arr) {\r\n\t\t\t\treturn unescape(arr[2]);\r\n\t\t\t}\r\n\t\t\treturn '';\r\n\t\t},\r\n\t\t// 设置cookie,增加到vue实例方便全局调用\r\n\t\tsetCookie(name, value, expiredays) {\r\n\t\t\tvar exdate = new Date();\r\n\t\t\texdate.setDate(exdate.getDate() + expiredays);\r\n\t\t\tdocument.cookie = name + \"=\" + escape(value) + ((expiredays == null) ? \"\" : \";expires=\" + exdate\r\n\t\t\t\t.toGMTString());\r\n\t\t},\r\n\t\t// 删除cookie\r\n\t\tdelCookie(name) {\r\n\t\t\tvar exp = new Date();\r\n\t\t\texp.setTime(exp.getTime() - 1);\r\n\t\t\tvar cval = this.getCookie(name);\r\n\t\t\tif (cval != null) {\r\n\t\t\t\tdocument.cookie = name + \"=\" + cval + \";expires=\" + exp.toGMTString();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.loginForm.userName = this.getCookie(\"username\");\r\n\t\t// cookie存密码并不安全，暂时是为了方便\r\n\t\tthis.loginForm.password = this.getCookie(\"password\");\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.login-view {\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\tbackground: rgb(255, 255, 255);\r\n\tbackground-image:url(../assets/image/白云.jpg);\r\n\tbackground-size: cover;\r\n\tbox-sizing: border-box;\r\n\r\n\r\n\t.login-content {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\t// padding: 10%;\r\n\r\n\r\n\r\n\t\t.login-form {\r\n\t\t\tmargin: 50px;\r\n\t\t\theight: 340px;\r\n\t\t\twidth: 400px;\r\n\t\t\tz-index: 2;\r\n\t\t\tpadding: 30px;\r\n\t\t\tbackground: rgb(255, 255, 255);\r\n\t\t\t// opacity: 0.8;\r\n\t\t\tbox-shadow: 0px 0px 1px #cccccc;\r\n\t\t\tborder-radius: 3%;\r\n\t\t\toverflow: hidden;\r\n\t\t\tborder: 1px solid #ccc;\r\n\r\n\t\t\t.login-brand {\r\n\t\t\t\tline-height: 50px;\r\n\t\t\t\tmargin: 30px 0 40px 0;\r\n\t\t\t\tfont-size: 22px;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\tletter-spacing: 2px;\r\n\t\t\t\ttext-transform: uppercase;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\r\n\t\t\t.register {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row-reverse;\r\n\t\t\t\tline-height: 40px;\r\n\t\t\t\ttext-align: left;\r\n\t\t\t\tpadding-left: 20px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.back-box {\r\n\tmargin-top: 10px;\r\n\t// background-color: aqua;\r\n\tflex: 1;\r\n\theight: 90vh;\r\n\twidth: 100vw;\r\n\tz-index: 2;\r\n\tborder-radius: 50%;\r\n\tposition: relative;\r\n}\r\n\r\n\r\n\r\n.image{\r\n\theight: 300px;\r\n\twidth: 300px;\r\n\tborder-radius: 50%;\r\n\toverflow: hidden;\r\n\tz-index: 1;\r\n\ttransform: rotateZ(15deg);\r\n\tposition: absolute;\r\n\tleft: 5%;\r\n\ttop: 30%;\r\n\topacity: 1;\r\n}\r\n.image2{\r\n\theight: 400px;\r\n\twidth: 400px;\r\n\tborder-radius: 50%;\r\n\toverflow: hidden;\r\n\tz-index: 1;\r\n\ttransform: rotateZ(15deg);\r\n\tposition: absolute;\r\n\tleft: 20%;\r\n\ttop: 2%;\r\n\topacity: 0.8;\r\n}\r\n.image3{\r\n\theight: 600px;\r\n\twidth: 600px;\r\n\tborder-radius: 50%;\r\n\toverflow: hidden;\r\n\tz-index: 1;\r\n\ttransform: rotateZ(-15deg);\r\n\tposition: absolute;\r\n\tleft: 40%;\r\n\ttop: 30%;\r\n\topacity: 0.8;\r\n}\r\n</style>"]}]}