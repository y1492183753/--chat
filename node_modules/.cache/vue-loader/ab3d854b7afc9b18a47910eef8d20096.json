{"remainingRequest":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\im-ui\\src\\components\\chat\\ChatBox.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\im-ui\\src\\components\\chat\\ChatBox.vue","mtime":1711256613938},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1710142166000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1710142168000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglpbXBvcnQgQ2hhdEdyb3VwU2lkZSBmcm9tICIuL0NoYXRHcm91cFNpZGUudnVlIjsKCWltcG9ydCBDaGF0TWVzc2FnZUl0ZW0gZnJvbSAiLi9DaGF0TWVzc2FnZUl0ZW0udnVlIjsKCWltcG9ydCBGaWxlVXBsb2FkIGZyb20gIi4uL2NvbW1vbi9GaWxlVXBsb2FkLnZ1ZSI7CglpbXBvcnQgRW1vdGlvbiBmcm9tICIuLi9jb21tb24vRW1vdGlvbi52dWUiOwoJaW1wb3J0IENoYXRWb2ljZSBmcm9tICIuL0NoYXRWb2ljZS52dWUiOwoJaW1wb3J0IENoYXRIaXN0b3J5IGZyb20gIi4vQ2hhdEhpc3RvcnkudnVlIjsKCWltcG9ydCBDaGF0QXRCb3ggZnJvbSAiLi9DaGF0QXRCb3gudnVlIgoKCWV4cG9ydCBkZWZhdWx0IHsKCQluYW1lOiAiY2hhdFByaXZhdGUiLAoJCWNvbXBvbmVudHM6IHsKCQkJQ2hhdE1lc3NhZ2VJdGVtLAoJCQlGaWxlVXBsb2FkLAoJCQlDaGF0R3JvdXBTaWRlLAoJCQlFbW90aW9uLAoJCQlDaGF0Vm9pY2UsCgkJCUNoYXRIaXN0b3J5LAoJCQlDaGF0QXRCb3gKCQl9LAoJCXByb3BzOiB7CgkJCWNoYXQ6IHsKCQkJCXR5cGU6IE9iamVjdAoJCQl9CgkJfSwKCQlkYXRhKCkgewoJCQlyZXR1cm4gewoJCQkJZnJpZW5kOiB7fSwKCQkJCWdyb3VwOiB7fSwKCQkJCWdyb3VwTWVtYmVyczogW10sCgkJCQlzZW5kSW1hZ2VVcmw6ICIiLAoJCQkJc2VuZEltYWdlRmlsZTogIiIsCgkJCQlzaG93Vm9pY2U6IGZhbHNlLCAvLyDmmK/lkKbmmL7npLror63pn7PlvZXliLblvLnnqpcKCQkJCXNob3dTaWRlOiBmYWxzZSwgLy8g5piv5ZCm5pi+56S6576k6IGK5L+h5oGv5qCPCgkJCQlzaG93SGlzdG9yeTogZmFsc2UsIC8vIOaYr+WQpuaYvuekuuWOhuWPsuiBiuWkqeiusOW9lQoJCQkJbG9ja01lc3NhZ2U6IGZhbHNlLCAvLyDmmK/lkKbplIHlrprlj5HpgIHvvIwKCQkJCXNob3dNaW5JZHg6IDAsIC8vIOS4i+agh+S9juS6jnNob3dNaW5JZHjnmoTmtojmga/kuI3mmL7npLrvvIzlkKbliJnpobXpnaLkvJrlvojljaEKCQkJCWF0U2VhcmNoVGV4dDogIiIsCgkJCQlmb2N1c05vZGU6IG51bGwsIC8vIOe8k+WtmOWFieagh+aJgOWcqOiKgueCuQoJCQkJZm9jdXNPZmZzZXQ6IG51bGwsIC8vIOe8k+WtmOWFieagh+aJgOWcqOiKgueCueS9jee9rgoJCQkJemhMb2NrOiBmYWxzZSAvLyDop6PlhrPkuK3mlofovpPlhaXms5Xop6blj5Hoi7HmlofnmoTmg4XlhrUKCQkJfQoJCX0sCgkJbWV0aG9kczogewoJCQljbG9zZVJlZkJveCgpIHsKCQkJCXRoaXMuJHJlZnMuZW1vQm94LmNsb3NlKCk7CgkJCQl0aGlzLiRyZWZzLmF0Qm94LmNsb3NlKCk7CgkJCX0sCgkJCW9uS2V5RG93bigpIHsKCQkJCWlmICh0aGlzLiRyZWZzLmF0Qm94LnNob3cpIHsKCQkJCQl0aGlzLiRyZWZzLmF0Qm94Lm1vdmVEb3duKCkKCQkJCX0KCQkJfSwKCQkJb25LZXlVcCgpIHsKCQkJCWlmICh0aGlzLiRyZWZzLmF0Qm94LnNob3cpIHsKCQkJCQl0aGlzLiRyZWZzLmF0Qm94Lm1vdmVVcCgpCgkJCQl9CgkJCX0sCgkJCW9uS2V5RW50ZXIoKSB7CgkJCQlpZiAodGhpcy4kcmVmcy5hdEJveC5zaG93KSB7CgkJCQkJLy8g6ZSu55uY5pON5L2c5LiN5Lya6Ieq5Yqo5L+u5q2j54Sm54K577yM6ZyA6KaB5omL5Yqo5L+u5q2jLOWOn+WboOS4jeivpgoJCQkJCXRoaXMuZm9jdXNPZmZzZXQgKz0gdGhpcy5hdFNlYXJjaFRleHQubGVuZ3RoOwoJCQkJCXRoaXMuJHJlZnMuYXRCb3guc2VsZWN0KCk7CgkJCQl9IGVsc2UgewoJCQkJCXRoaXMuc2VuZE1lc3NhZ2UoKTsKCQkJCX0KCQkJfSwKCQkJb25FZGl0Qm94Qmx1cigpIHsKCQkJCWxldCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkKCQkJCS8vIOiusOW9leWFieagh+S9jee9rijngrnlh7tlbW9qaeaXtikKCQkJCXRoaXMuZm9jdXNOb2RlID0gc2VsZWN0aW9uLmZvY3VzTm9kZTsKCQkJCXRoaXMuZm9jdXNPZmZzZXQgPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQ7CgkJCX0sCgkJCW9uRWRpdG9ySW5wdXQoZSkgewoJCQkJLy8g5aaC5p6c6Kem5Y+RIEAKCQkJCWlmICh0aGlzLmNoYXQudHlwZSA9PSAiR1JPVVAiICYmICF0aGlzLnpoTG9jaykgewoJCQkJCWlmIChlLmRhdGEgPT0gJ0AnKSB7CgkJCQkJCS8vIOaJk+W8gOmAieaLqeW8ueeqlwoJCQkJCQl0aGlzLnNob3dBdEJveChlKTsKCQkJCQl9IGVsc2UgewoJCQkJCQlsZXQgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpCgkJCQkJCWxldCByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApCgkJCQkJCXRoaXMuZm9jdXNOb2RlID0gc2VsZWN0aW9uLmZvY3VzTm9kZTsKCQkJCQkJLy8g5oiq5Y+WQOWQjumdoueahOWQjeensOS9nOS4uui/h+a7pOadoeS7tgoJCQkJCQlsZXQgc3RJZHggPSB0aGlzLmZvY3VzTm9kZS50ZXh0Q29udGVudC5sYXN0SW5kZXhPZignQCcpOwoJCQkJCQl0aGlzLmF0U2VhcmNoVGV4dCA9IHRoaXMuZm9jdXNOb2RlLnRleHRDb250ZW50LnN1YnN0cmluZyhzdElkeCArIDEpOwoJCQkJCX0KCQkJCX0KCgkJCX0sCgkJCW9uRWRpdG9yQ29tcG9zaXRpb25TdGFydCgpIHsKCQkJCXRoaXMuemhMb2NrID0gdHJ1ZTsKCQkJfSwKCQkJb25FZGl0b3JDb21wb3NpdGlvbkVuZChlKSB7CgkJCQl0aGlzLnpoTG9jayA9IGZhbHNlOwoJCQkJdGhpcy5vbkVkaXRvcklucHV0KGUpOwoJCQl9LAoJCQlzaG93QXRCb3goZSkgewoJCQkJdGhpcy5hdFNlYXJjaFRleHQgPSAiIjsKCQkJCWxldCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkKCQkJCWxldCByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApCgkJCQkvLyDorrDlvZXlhYnmoIfmiYDlnKjkvY3nva4KCQkJCXRoaXMuZm9jdXNOb2RlID0gc2VsZWN0aW9uLmZvY3VzTm9kZTsKCQkJCXRoaXMuZm9jdXNPZmZzZXQgPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQ7CgkJCQkvLyDlhYnmoIfmiYDlnKjlnZDmoIcKCQkJCWxldCBwb3MgPSByYW5nZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCQkJCXRoaXMuJHJlZnMuYXRCb3gub3Blbih7CgkJCQkJeDogcG9zLngsCgkJCQkJeTogcG9zLnkKCQkJCX0pCgkJCX0sCgkJCW9uQXRTZWxlY3QobWVtYmVyKSB7CgkJCQlsZXQgcmFuZ2UgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VBdCgwKQoJCQkJLy8g6YCJ5Lit6L6T5YWl55qEIEB4eCDnrKYKCQkJCXJhbmdlLnNldFN0YXJ0KHRoaXMuZm9jdXNOb2RlLCB0aGlzLmZvY3VzT2Zmc2V0IC0gMSAtIHRoaXMuYXRTZWFyY2hUZXh0Lmxlbmd0aCkKCQkJCXJhbmdlLnNldEVuZCh0aGlzLmZvY3VzTm9kZSwgdGhpcy5mb2N1c09mZnNldCkKCQkJCXJhbmdlLmRlbGV0ZUNvbnRlbnRzKCkKCQkJCS8vIOWIm+W7uuWFg+e0oOiKgueCuQoJCQkJbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdTUEFOJykKCQkJCWVsZW1lbnQuY2xhc3NOYW1lID0gImF0IgoJCQkJZWxlbWVudC5kYXRhc2V0LmlkID0gbWVtYmVyLnVzZXJJZDsKCQkJCWVsZW1lbnQuY29udGVudEVkaXRhYmxlID0gJ2ZhbHNlJwoJCQkJZWxlbWVudC5pbm5lclRleHQgPSBgQCR7bWVtYmVyLmFsaWFzTmFtZX1gCgkJCQlyYW5nZS5pbnNlcnROb2RlKGVsZW1lbnQpCgkJCQkvLyDlhYnmoIfnp7vliqjliLDmnKvlsL4KCQkJCXJhbmdlLmNvbGxhcHNlKCkKCQkJCS8vIOaPkuWFpeepuuagvAoJCQkJbGV0IHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1x1MDBBMCcpOwoJCQkJcmFuZ2UuaW5zZXJ0Tm9kZSh0ZXh0Tm9kZSkKCQkJCXJhbmdlLmNvbGxhcHNlKCkKCQkJCXRoaXMuYXRTZWFyY2hUZXh0ID0gIiI7CgkJCQl0aGlzLiRyZWZzLmVkaXRCb3guZm9jdXMoKQoJCQl9LAoJCQljcmVhdGVTZW5kVGV4dCgpIHsKCQkJCWxldCBzZW5kVGV4dCA9ICIiCgkJCQl0aGlzLiRyZWZzLmVkaXRCb3guY2hpbGROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7CgkJCQkJaWYgKG5vZGUubm9kZU5hbWUgPT0gIiN0ZXh0IikgewoJCQkJCQlzZW5kVGV4dCArPSB0aGlzLmh0bWwyRXNjYXBlKG5vZGUudGV4dENvbnRlbnQpOwoJCQkJCX0gZWxzZSBpZiAobm9kZS5ub2RlTmFtZSA9PSAiU1BBTiIpIHsKCQkJCQkJc2VuZFRleHQgKz0gbm9kZS5pbm5lclRleHQ7CgkJCQkJfSBlbHNlIGlmIChub2RlLm5vZGVOYW1lID09ICJJTUciKSB7CgkJCQkJCXNlbmRUZXh0ICs9IG5vZGUuZGF0YXNldC5jb2RlOwoJCQkJCX0KCQkJCX0pCgkJCQlyZXR1cm4gc2VuZFRleHQ7CgkJCX0sCgkJCWh0bWwyRXNjYXBlKHN0ckh0bWwpIHsKCQkJCXJldHVybiBzdHJIdG1sLnJlcGxhY2UoL1s8PiYiXS9nLCBmdW5jdGlvbihjKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJJzwnOiAnJmx0OycsCgkJCQkJCSc+JzogJyZndDsnLAoJCQkJCQknJic6ICcmYW1wOycsCgkJCQkJCSciJzogJyZxdW90OycKCQkJCQl9W2NdOwoJCQkJfSk7CgkJCX0sCgkJCWNyZWF0ZUF0VXNlcklkcygpIHsKCQkJCWxldCBpZHMgPSBbXTsKCQkJCXRoaXMuJHJlZnMuZWRpdEJveC5jaGlsZE5vZGVzLmZvckVhY2goKG5vZGUpID0+IHsKCQkJCQlpZiAobm9kZS5ub2RlTmFtZSA9PSAiU1BBTiIpIHsKCQkJCQkJaWRzLnB1c2gobm9kZS5kYXRhc2V0LmlkKTsKCQkJCQl9CgkJCQl9KQoJCQkJcmV0dXJuIGlkczsKCQkJfSwKCQkJb25FZGl0b3JQYXN0ZShlKSB7CgkJCQlsZXQgdHh0ID0gZXZlbnQuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCdUZXh0JykKCQkJCWlmICh0eXBlb2YodHh0KSA9PSAnc3RyaW5nJykgewoJCQkJCWxldCByYW5nZSA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApCgkJCQkJbGV0IHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodHh0KTsKCQkJCQlyYW5nZS5pbnNlcnROb2RlKHRleHROb2RlKQoJCQkJCXJhbmdlLmNvbGxhcHNlKCk7CgoJCQkJfQoJCQkJbGV0IGl0ZW1zID0gKGV2ZW50LmNsaXBib2FyZERhdGEgfHwgd2luZG93LmNsaXBib2FyZERhdGEpLml0ZW1zCgkJCQlpZiAoaXRlbXMubGVuZ3RoKSB7CgkJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykgewoJCQkJCQlpZiAoaXRlbXNbaV0udHlwZS5pbmRleE9mKCdpbWFnZScpICE9PSAtMSkgewoJCQkJCQkJbGV0IGZpbGUgPSBpdGVtc1tpXS5nZXRBc0ZpbGUoKTsKCQkJCQkJCXRoaXMuc2VuZEltYWdlRmlsZSA9IGZpbGU7CgkJCQkJCQl0aGlzLnNlbmRJbWFnZVVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0sCgkJCXJlbW92ZVNlbmRJbWFnZSgpIHsKCQkJCXRoaXMuc2VuZEltYWdlVXJsID0gIiI7CgkJCQl0aGlzLnNlbmRJbWFnZUZpbGUgPSBudWxsOwoJCQl9LAoJCQlvbkltYWdlU3VjY2VzcyhkYXRhLCBmaWxlKSB7CgkJCQlsZXQgbXNnSW5mbyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmlsZS5tc2dJbmZvKSk7CgkJCQltc2dJbmZvLmNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShkYXRhKTsKCQkJCXRoaXMuJGh0dHAoewoJCQkJCXVybDogdGhpcy5tZXNzYWdlQWN0aW9uLAoJCQkJCW1ldGhvZDogJ3Bvc3QnLAoJCQkJCWRhdGE6IG1zZ0luZm8KCQkJCX0pLnRoZW4oKGlkKSA9PiB7CgkJCQkJbXNnSW5mby5sb2FkU3RhdHVzID0gJ29rJzsKCQkJCQltc2dJbmZvLmlkID0gaWQ7CgkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJpbnNlcnRNZXNzYWdlIiwgbXNnSW5mbyk7CgkJCQl9KQoJCQl9LAoJCQlvbkltYWdlRmFpbChlLCBmaWxlKSB7CgkJCQlsZXQgbXNnSW5mbyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmlsZS5tc2dJbmZvKSk7CgkJCQltc2dJbmZvLmxvYWRTdGF0dXMgPSAnZmFpbCc7CgkJCQl0aGlzLiRzdG9yZS5jb21taXQoImluc2VydE1lc3NhZ2UiLCBtc2dJbmZvKTsKCQkJfSwKCQkJb25JbWFnZUJlZm9yZShmaWxlKSB7CgkJCQlsZXQgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTsKCQkJCWxldCBkYXRhID0gewoJCQkJCW9yaWdpblVybDogdXJsLAoJCQkJCXRodW1iVXJsOiB1cmwKCQkJCX0KCQkJCWxldCBtc2dJbmZvID0gewoJCQkJCWlkOiAwLAoJCQkJCWZpbGVJZDogZmlsZS51aWQsCgkJCQkJc2VuZElkOiB0aGlzLm1pbmUuaWQsCgkJCQkJY29udGVudDogSlNPTi5zdHJpbmdpZnkoZGF0YSksCgkJCQkJc2VuZFRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAoJCQkJCXNlbGZTZW5kOiB0cnVlLAoJCQkJCXR5cGU6IDEsCgkJCQkJbG9hZFN0YXR1czogImxvYWRpbmciLAoJCQkJCXN0YXR1czogdGhpcy4kZW51bXMuTUVTU0FHRV9TVEFUVVMuVU5TRU5ECgkJCQl9CgkJCQkvLyDloavlhYXlr7nmlrlpZAoJCQkJdGhpcy5maWxsVGFyZ2V0SWQobXNnSW5mbywgdGhpcy5jaGF0LnRhcmdldElkKTsKCQkJCS8vIOaPkuWFpea2iOaBrwoJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJpbnNlcnRNZXNzYWdlIiwgbXNnSW5mbyk7CgkJCQkvLyDmu5rliqjliLDlupXpg6gKCQkJCXRoaXMuc2Nyb2xsVG9Cb3R0b20oKTsKCQkJCS8vIOWAn+WKqWZpbGXlr7nosaHkv53lrZgKCQkJCWZpbGUubXNnSW5mbyA9IG1zZ0luZm87CgkJCX0sCgkJCW9uRmlsZVN1Y2Nlc3ModXJsLCBmaWxlKSB7CgkJCQlsZXQgZGF0YSA9IHsKCQkJCQluYW1lOiBmaWxlLm5hbWUsCgkJCQkJc2l6ZTogZmlsZS5zaXplLAoJCQkJCXVybDogdXJsCgkJCQl9CgkJCQlsZXQgbXNnSW5mbyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmlsZS5tc2dJbmZvKSk7CgkJCQltc2dJbmZvLmNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShkYXRhKTsKCQkJCXRoaXMuJGh0dHAoewoJCQkJCXVybDogdGhpcy5tZXNzYWdlQWN0aW9uLAoJCQkJCW1ldGhvZDogJ3Bvc3QnLAoJCQkJCWRhdGE6IG1zZ0luZm8KCQkJCX0pLnRoZW4oKGlkKSA9PiB7CgkJCQkJbXNnSW5mby5sb2FkU3RhdHVzID0gJ29rJzsKCQkJCQltc2dJbmZvLmlkID0gaWQ7CgkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJpbnNlcnRNZXNzYWdlIiwgbXNnSW5mbyk7CgkJCQl9KQoJCQl9LAoJCQlvbkZpbGVGYWlsKGUsIGZpbGUpIHsKCQkJCWxldCBtc2dJbmZvID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmaWxlLm1zZ0luZm8pKTsKCQkJCW1zZ0luZm8ubG9hZFN0YXR1cyA9ICdmYWlsJzsKCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgiaW5zZXJ0TWVzc2FnZSIsIG1zZ0luZm8pOwoJCQl9LAoJCQlvbkZpbGVCZWZvcmUoZmlsZSkgewoJCQkJbGV0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7CgkJCQlsZXQgZGF0YSA9IHsKCQkJCQluYW1lOiBmaWxlLm5hbWUsCgkJCQkJc2l6ZTogZmlsZS5zaXplLAoJCQkJCXVybDogdXJsCgkJCQl9CgkJCQlsZXQgbXNnSW5mbyA9IHsKCQkJCQlpZDogMCwKCQkJCQlzZW5kSWQ6IHRoaXMubWluZS5pZCwKCQkJCQljb250ZW50OiBKU09OLnN0cmluZ2lmeShkYXRhKSwKCQkJCQlzZW5kVGltZTogbmV3IERhdGUoKS5nZXRUaW1lKCksCgkJCQkJc2VsZlNlbmQ6IHRydWUsCgkJCQkJdHlwZTogMiwKCQkJCQlsb2FkU3RhdHVzOiAibG9hZGluZyIsCgkJCQkJc3RhdHVzOiB0aGlzLiRlbnVtcy5NRVNTQUdFX1NUQVRVUy5VTlNFTkQKCQkJCX0KCQkJCS8vIOWhq+WFheWvueaWuWlkCgkJCQl0aGlzLmZpbGxUYXJnZXRJZChtc2dJbmZvLCB0aGlzLmNoYXQudGFyZ2V0SWQpOwoJCQkJLy8g5o+S5YWl5raI5oGvCgkJCQl0aGlzLiRzdG9yZS5jb21taXQoImluc2VydE1lc3NhZ2UiLCBtc2dJbmZvKTsKCQkJCS8vIOa7muWKqOWIsOW6lemDqAoJCQkJdGhpcy5zY3JvbGxUb0JvdHRvbSgpOwoJCQkJLy8g5YCf5YqpZmlsZeWvueixoemAj+S8oAoJCQkJZmlsZS5tc2dJbmZvID0gbXNnSW5mbzsKCQkJfSwKCQkJb25DbG9zZVNpZGUoKSB7CgkJCQl0aGlzLnNob3dTaWRlID0gZmFsc2U7CgkJCX0sCgkJCW9uU2Nyb2xsVG9Ub3AoKSB7CgkJCQkvLyDlpJrlsZXnpLoxMOadoeS/oeaBrwoJCQkJdGhpcy5zaG93TWluSWR4ID0gdGhpcy5zaG93TWluSWR4ID4gMTAgPyB0aGlzLnNob3dNaW5JZHggLSAxMCA6IDA7CgkJCX0sCgkJCW9uU2Nyb2xsKGUpIHsKCQkJCWxldCBzY3JvbGxFbGVtZW50ID0gZS50YXJnZXQKCQkJCWxldCBzY3JvbGxUb3AgPSBzY3JvbGxFbGVtZW50LnNjcm9sbFRvcAoJCQkJaWYgKHNjcm9sbFRvcCA8IDMwKSB7IC8vIOWcqOmhtumDqCzkuI3mu5rliqjnmoTmg4XlhrUKCQkJCQkvLyDlpJrlsZXnpLoyMOadoeS/oeaBrwoJCQkJCXRoaXMuc2hvd01pbklkeCA9IHRoaXMuc2hvd01pbklkeCA+IDIwID8gdGhpcy5zaG93TWluSWR4IC0gMjAgOiAwOwoJCQkJfQoJCQl9LAoJCQlzaG93RW1vdGlvbkJveCgpIHsKCQkJCWxldCB3aWR0aCA9IHRoaXMuJHJlZnMuZW1vdGlvbi5vZmZzZXRXaWR0aDsKCQkJCWxldCBsZWZ0ID0gdGhpcy4kZWxtLmZpeExlZnQodGhpcy4kcmVmcy5lbW90aW9uKTsKCQkJCWxldCB0b3AgPSB0aGlzLiRlbG0uZml4VG9wKHRoaXMuJHJlZnMuZW1vdGlvbik7CgkJCQl0aGlzLiRyZWZzLmVtb0JveC5vcGVuKHsKCQkJCQl4OiBsZWZ0ICsgd2lkdGggLyAyLAoJCQkJCXk6IHRvcAoJCQkJfSkKCgkJCX0sCgkJCW9uRW1vdGlvbihlbW9UZXh0KSB7CgkJCQkvLyDkv53mjIHovpPlhaXmoYbnhKbngrkKCQkJCXRoaXMuJHJlZnMuZWRpdEJveC5mb2N1cygpOwoJCQkJbGV0IHJhbmdlID0gd2luZG93LmdldFNlbGVjdGlvbigpLmdldFJhbmdlQXQoMCk7CgkJCQkvLyDmj5LlhaXlhYnmoIfmiYDlnKjkvY3nva4KCQkJCXJhbmdlLnNldFN0YXJ0KHRoaXMuZm9jdXNOb2RlLCB0aGlzLmZvY3VzT2Zmc2V0KQoJCQkJbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdJTUcnKQoJCQkJZWxlbWVudC5jbGFzc05hbWUgPSAiZW1vIgoJCQkJZWxlbWVudC5kYXRhc2V0LmNvZGUgPSBlbW9UZXh0OwoJCQkJZWxlbWVudC5jb250ZW50RWRpdGFibGUgPSAndHJ1ZScKCQkJCWVsZW1lbnQuc2V0QXR0cmlidXRlKCJzcmMiLCB0aGlzLiRlbW8udGV4dFRvVXJsKGVtb1RleHQpKTsKCQkJCS8vIOmAieS4reWFg+e0oOiKgueCuQoJCQkJcmFuZ2UuaW5zZXJ0Tm9kZShlbGVtZW50KQoJCQkJLy8g5YWJ5qCH56e75Yqo5Yiw5pyr5bC+CgkJCQlyYW5nZS5jb2xsYXBzZSgpCgoJCQl9LAoJCQlzaG93Vm9pY2VCb3goKSB7CgkJCQl0aGlzLnNob3dWb2ljZSA9IHRydWU7CgkJCX0sCgkJCWNsb3NlVm9pY2VCb3goKSB7CgkJCQl0aGlzLnNob3dWb2ljZSA9IGZhbHNlOwoJCQl9LAoJCQlzaG93VmlkZW9Cb3goKSB7CgkJCQl0aGlzLiRzdG9yZS5jb21taXQoInNob3dDaGF0UHJpdmF0ZVZpZGVvQm94IiwgewoJCQkJCWZyaWVuZDogdGhpcy5mcmllbmQsCgkJCQkJbWFzdGVyOiB0cnVlCgkJCQl9KTsKCQkJfSwKCQkJc2hvd0hpc3RvcnlCb3goKSB7CgkJCQl0aGlzLnNob3dIaXN0b3J5ID0gdHJ1ZTsKCQkJfSwKCQkJY2xvc2VIaXN0b3J5Qm94KCkgewoJCQkJdGhpcy5zaG93SGlzdG9yeSA9IGZhbHNlOwoJCQl9LAoJCQlvblNlbmRWb2ljZShkYXRhKSB7CgkJCQlsZXQgbXNnSW5mbyA9IHsKCQkJCQljb250ZW50OiBKU09OLnN0cmluZ2lmeShkYXRhKSwKCQkJCQl0eXBlOiAzCgkJCQl9CgkJCQkvLyDloavlhYXlr7nmlrlpZAoJCQkJdGhpcy5maWxsVGFyZ2V0SWQobXNnSW5mbywgdGhpcy5jaGF0LnRhcmdldElkKTsKCQkJCXRoaXMuJGh0dHAoewoJCQkJCXVybDogdGhpcy5tZXNzYWdlQWN0aW9uLAoJCQkJCW1ldGhvZDogJ3Bvc3QnLAoJCQkJCWRhdGE6IG1zZ0luZm8KCQkJCX0pLnRoZW4oKGlkKSA9PiB7CgkJCQkJbXNnSW5mby5pZCA9IGlkOwoJCQkJCW1zZ0luZm8uc2VuZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCQkJCQltc2dJbmZvLnNlbmRJZCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJTdG9yZS51c2VySW5mby5pZDsKCQkJCQltc2dJbmZvLnNlbGZTZW5kID0gdHJ1ZTsKCQkJCQltc2dJbmZvLnN0YXR1cyA9IHRoaXMuJGVudW1zLk1FU1NBR0VfU1RBVFVTLlVOU0VORDsKCQkJCQl0aGlzLiRzdG9yZS5jb21taXQoImluc2VydE1lc3NhZ2UiLCBtc2dJbmZvKTsKCQkJCQkvLyDkv53mjIHovpPlhaXmoYbnhKbngrkKCQkJCQl0aGlzLiRyZWZzLmVkaXRCb3guZm9jdXMoKTsKCQkJCQkvLyDmu5rliqjliLDlupXpg6gKCQkJCQl0aGlzLnNjcm9sbFRvQm90dG9tKCk7CgkJCQkJLy8g5YWz6Zet5b2V6Z+z56qX5Y+jCgkJCQkJdGhpcy5zaG93Vm9pY2UgPSBmYWxzZTsKCQkJCX0pCgkJCX0sCgkJCWZpbGxUYXJnZXRJZChtc2dJbmZvLCB0YXJnZXRJZCkgewoJCQkJaWYgKHRoaXMuY2hhdC50eXBlID09ICJHUk9VUCIpIHsKCQkJCQltc2dJbmZvLmdyb3VwSWQgPSB0YXJnZXRJZDsKCQkJCX0gZWxzZSB7CgkJCQkJbXNnSW5mby5yZWN2SWQgPSB0YXJnZXRJZDsKCQkJCX0KCQkJfSwKCQkJc2VuZE1lc3NhZ2UoKSB7CgkJCQlpZiAodGhpcy5zZW5kSW1hZ2VGaWxlKSB7CgkJCQkJdGhpcy5zZW5kSW1hZ2VNZXNzYWdlKCk7CgkJCQl9IGVsc2UgewoJCQkJCXRoaXMuc2VuZFRleHRNZXNzYWdlKCk7CgkJCQl9CgkJCQkvLyDmtojmga/lt7Lor7sKCQkJCXRoaXMucmVhZGVkTWVzc2FnZSgpCgkJCX0sCgkJCXNlbmRJbWFnZU1lc3NhZ2UoKSB7CgkJCQlsZXQgZmlsZSA9IHRoaXMuc2VuZEltYWdlRmlsZTsKCQkJCXRoaXMub25JbWFnZUJlZm9yZSh0aGlzLnNlbmRJbWFnZUZpbGUpOwoJCQkJbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKCQkJCWZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpCgkJCQl0aGlzLiRodHRwLnBvc3QoIi9pbWFnZS91cGxvYWQiLCBmb3JtRGF0YSwgewoJCQkJCWhlYWRlcnM6IHsKCQkJCQkJJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwoJCQkJCX0KCQkJCX0pLnRoZW4oKGRhdGEpID0+IHsKCQkJCQl0aGlzLm9uSW1hZ2VTdWNjZXNzKGRhdGEsIGZpbGUpOwoJCQkJfSkuY2F0Y2goKHJlcykgPT4gewoJCQkJCXRoaXMub25JbWFnZVN1Y2Nlc3MocmVzLCBmaWxlKTsKCQkJCX0pCgkJCQl0aGlzLnNlbmRJbWFnZUZpbGUgPSBudWxsOwoJCQkJdGhpcy5zZW5kSW1hZ2VVcmwgPSAiIjsKCQkJCXRoaXMuJG5leHRUaWNrKCgpID0+IHRoaXMuJHJlZnMuZWRpdEJveC5mb2N1cygpKTsKCQkJCXRoaXMuc2Nyb2xsVG9Cb3R0b20oKTsKCQkJfSwKCQkJc2VuZFRleHRNZXNzYWdlKCkgewoJCQkJbGV0IHNlbmRUZXh0ID0gdGhpcy5jcmVhdGVTZW5kVGV4dCgpOwoJCQkJaWYgKCFzZW5kVGV4dC50cmltKCkpIHsKCQkJCQlyZXR1cm4KCQkJCX0KCQkJCXRoaXMuJHJlZnMuZWRpdEJveC5jbGUKCQkJCWxldCBtc2dJbmZvID0gewoJCQkJCWNvbnRlbnQ6IHNlbmRUZXh0LAoJCQkJCXR5cGU6IDAKCQkJCX0KCQkJCS8vIOWhq+WFheWvueaWuWlkCgkJCQl0aGlzLmZpbGxUYXJnZXRJZChtc2dJbmZvLCB0aGlzLmNoYXQudGFyZ2V0SWQpOwoJCQkJLy8g6KKrQOS6uuWRmOWIl+ihqAoJCQkJaWYgKHRoaXMuY2hhdC50eXBlID09ICJHUk9VUCIpIHsKCQkJCQltc2dJbmZvLmF0VXNlcklkcyA9IHRoaXMuY3JlYXRlQXRVc2VySWRzKCk7CgkJCQl9CgkJCQl0aGlzLmxvY2tNZXNzYWdlID0gdHJ1ZTsKCQkJCXRoaXMuJGh0dHAoewoJCQkJCXVybDogdGhpcy5tZXNzYWdlQWN0aW9uLAoJCQkJCW1ldGhvZDogJ3Bvc3QnLAoJCQkJCWRhdGE6IG1zZ0luZm8KCQkJCX0pLnRoZW4oKGlkKSA9PiB7CgkJCQkJbXNnSW5mby5pZCA9IGlkOwoJCQkJCW1zZ0luZm8uc2VuZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCQkJCQltc2dJbmZvLnNlbmRJZCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJTdG9yZS51c2VySW5mby5pZDsKCQkJCQltc2dJbmZvLnNlbGZTZW5kID0gdHJ1ZTsKCQkJCQltc2dJbmZvLnN0YXR1cyA9IHRoaXMuJGVudW1zLk1FU1NBR0VfU1RBVFVTLlVOU0VORDsKCQkJCQl0aGlzLiRzdG9yZS5jb21taXQoImluc2VydE1lc3NhZ2UiLCBtc2dJbmZvKTsKCQkJCX0pLmZpbmFsbHkoKCkgPT4gewoJCQkJCS8vIOino+mZpOmUgeWumgoJCQkJCXRoaXMubG9ja01lc3NhZ2UgPSBmYWxzZTsKCQkJCQl0aGlzLnNjcm9sbFRvQm90dG9tKCk7CgkJCQkJdGhpcy5yZXNldEVkaXRvcigpOwoJCQkJfSk7CgoJCQl9LAoJCQlkZWxldGVNZXNzYWdlKG1zZ0luZm8pIHsKCQkJCXRoaXMuJGNvbmZpcm0oJ+ehruiupOWIoOmZpOa2iOaBrz8nLCAn5Yig6Zmk5raI5oGvJywgewoJCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKCQkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKCQkJCQl0eXBlOiAnd2FybmluZycKCQkJCX0pLnRoZW4oKCkgPT4gewoJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgiZGVsZXRlTWVzc2FnZSIsIG1zZ0luZm8pOwoJCQkJfSk7CgkJCX0sCgkJCXJlY2FsbE1lc3NhZ2UobXNnSW5mbykgewoJCQkJdGhpcy4kY29uZmlybSgn56Gu6K6k5pKk5Zue5raI5oGvPycsICfmkqTlm57mtojmga8nLCB7CgkJCQkJY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAoJCQkJCWNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAoJCQkJCXR5cGU6ICd3YXJuaW5nJwoJCQkJfSkudGhlbigoKSA9PiB7CgkJCQkJbGV0IHVybCA9IGAvbWVzc2FnZS8ke3RoaXMuY2hhdC50eXBlLnRvTG93ZXJDYXNlKCl9L3JlY2FsbC8ke21zZ0luZm8uaWR9YAoJCQkJCXRoaXMuJGh0dHAoewoJCQkJCQl1cmw6IHVybCwKCQkJCQkJbWV0aG9kOiAnZGVsZXRlJwoJCQkJCX0pLnRoZW4oKCkgPT4gewoJCQkJCQl0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIua2iOaBr+W3suaSpOWbniIpOwoJCQkJCQltc2dJbmZvID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShtc2dJbmZvKSk7CgkJCQkJCW1zZ0luZm8udHlwZSA9IDEwOwoJCQkJCQltc2dJbmZvLmNvbnRlbnQgPSAn5L2g5pKk5Zue5LqG5LiA5p2h5raI5oGvJzsKCQkJCQkJbXNnSW5mby5zdGF0dXMgPSB0aGlzLiRlbnVtcy5NRVNTQUdFX1NUQVRVUy5SRUNBTEw7CgkJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgiaW5zZXJ0TWVzc2FnZSIsIG1zZ0luZm8pOwoJCQkJCX0pCgkJCQl9KTsKCQkJfSwKCQkJcmVhZGVkTWVzc2FnZSgpIHsKCQkJCWlmICh0aGlzLmNoYXQudW5yZWFkQ291bnQgPT0gMCkgewoJCQkJCXJldHVybjsKCQkJCX0KCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgicmVzZXRVbnJlYWRDb3VudCIsIHRoaXMuY2hhdCkKCQkJCWlmICh0aGlzLmNoYXQudHlwZSA9PSAiR1JPVVAiKSB7CgkJCQkJdmFyIHVybCA9IGAvbWVzc2FnZS9ncm91cC9yZWFkZWQ/Z3JvdXBJZD0ke3RoaXMuY2hhdC50YXJnZXRJZH1gCgkJCQl9IGVsc2UgewoJCQkJCXVybCA9IGAvbWVzc2FnZS9wcml2YXRlL3JlYWRlZD9mcmllbmRJZD0ke3RoaXMuY2hhdC50YXJnZXRJZH1gCgkJCQl9CgkJCQl0aGlzLiRodHRwKHsKCQkJCQl1cmw6IHVybCwKCQkJCQltZXRob2Q6ICdwdXQnCgkJCQl9KS50aGVuKCgpID0+IHt9KQoJCQl9LAoJCQlsb2FkUmVhZGVkKGZJZCkgewoJCQkJdGhpcy4kaHR0cCh7CgkJCQkJdXJsOiBgL21lc3NhZ2UvcHJpdmF0ZS9tYXhSZWFkZWRJZD9mcmllbmRJZD0ke2ZJZH1gLAoJCQkJCW1ldGhvZDogJ2dldCcKCQkJCX0pLnRoZW4oKGlkKSA9PiB7CgkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJyZWFkZWRNZXNzYWdlIiwgewoJCQkJCQlmcmllbmRJZDogZklkLAoJCQkJCQltYXhJZDogaWQKCQkJCQl9KTsKCQkJCX0pOwoJCQl9LAoJCQlsb2FkR3JvdXAoZ3JvdXBJZCkgewoJCQkJdGhpcy4kaHR0cCh7CgkJCQkJdXJsOiBgL2dyb3VwL2ZpbmQvJHtncm91cElkfWAsCgkJCQkJbWV0aG9kOiAnZ2V0JwoJCQkJfSkudGhlbigoZ3JvdXApID0+IHsKCQkJCQl0aGlzLmdyb3VwID0gZ3JvdXA7CgkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDaGF0RnJvbUdyb3VwIiwgZ3JvdXApOwoJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlR3JvdXAiLCBncm91cCk7CgoJCQkJfSk7CgoJCQkJdGhpcy4kaHR0cCh7CgkJCQkJdXJsOiBgL2dyb3VwL21lbWJlcnMvJHtncm91cElkfWAsCgkJCQkJbWV0aG9kOiAnZ2V0JwoJCQkJfSkudGhlbigoZ3JvdXBNZW1iZXJzKSA9PiB7CgkJCQkJdGhpcy5ncm91cE1lbWJlcnMgPSBncm91cE1lbWJlcnM7CgkJCQl9KTsKCQkJfSwKCQkJbG9hZEZyaWVuZChmcmllbmRJZCkgewoJCQkJLy8g6I635Y+W5a+55pa55pyA5paw5L+h5oGvCgkJCQl0aGlzLiRodHRwKHsKCQkJCQl1cmw6IGAvdXNlci9maW5kLyR7ZnJpZW5kSWR9YCwKCQkJCQltZXRob2Q6ICdnZXQnCgkJCQl9KS50aGVuKChmcmllbmQpID0+IHsKCQkJCQl0aGlzLmZyaWVuZCA9IGZyaWVuZDsKCQkJCQl0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUNoYXRGcm9tRnJpZW5kIiwgZnJpZW5kKTsKCQkJCQl0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUZyaWVuZCIsIGZyaWVuZCk7CgkJCQl9KQoJCQl9LAoJCQlzaG93TmFtZShtc2dJbmZvKSB7CgkJCQlpZiAodGhpcy5jaGF0LnR5cGUgPT0gJ0dST1VQJykgewoJCQkJCWxldCBtZW1iZXIgPSB0aGlzLmdyb3VwTWVtYmVycy5maW5kKChtKSA9PiBtLnVzZXJJZCA9PSBtc2dJbmZvLnNlbmRJZCk7CgkJCQkJcmV0dXJuIG1lbWJlciA/IG1lbWJlci5hbGlhc05hbWUgOiAiIjsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIG1zZ0luZm8uc2VuZElkID09IHRoaXMubWluZS5pZCA/IHRoaXMubWluZS5uaWNrTmFtZSA6IHRoaXMuY2hhdC5zaG93TmFtZQoJCQkJfQoKCQkJfSwKCQkJaGVhZEltYWdlKG1zZ0luZm8pIHsKCQkJCWlmICh0aGlzLmNoYXQudHlwZSA9PSAnR1JPVVAnKSB7CgkJCQkJbGV0IG1lbWJlciA9IHRoaXMuZ3JvdXBNZW1iZXJzLmZpbmQoKG0pID0+IG0udXNlcklkID09IG1zZ0luZm8uc2VuZElkKTsKCQkJCQlyZXR1cm4gbWVtYmVyID8gbWVtYmVyLmhlYWRJbWFnZSA6ICIiOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gbXNnSW5mby5zZW5kSWQgPT0gdGhpcy5taW5lLmlkID8gdGhpcy5taW5lLmhlYWRJbWFnZVRodW1iIDogdGhpcy5jaGF0LmhlYWRJbWFnZQoJCQkJfQoJCQl9LAoJCQlyZXNldEVkaXRvcigpIHsKCQkJCXRoaXMuc2VuZEltYWdlVXJsID0gIiI7CgkJCQl0aGlzLnNlbmRJbWFnZUZpbGUgPSBudWxsOwoJCQkJdGhpcy4kbmV4dFRpY2soKCkgPT4gewoJCQkJCXRoaXMuJHJlZnMuZWRpdEJveC5pbm5lckhUTUwgPSAiIjsKCQkJCQl0aGlzLiRyZWZzLmVkaXRCb3guZm9jdXMoKTsKCQkJCX0pOwoJCQl9LAoJCQlzY3JvbGxUb0JvdHRvbSgpIHsKCQkJCXRoaXMuJG5leHRUaWNrKCgpID0+IHsKCQkJCQlsZXQgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNoYXRTY3JvbGxCb3giKTsKCQkJCQlkaXYuc2Nyb2xsVG9wID0gZGl2LnNjcm9sbEhlaWdodDsKCQkJCX0pOwoJCQl9CgkJfSwKCQljb21wdXRlZDogewoJCQltaW5lKCkgewoJCQkJcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJTdG9yZS51c2VySW5mbzsKCQkJfSwKCQkJdGl0bGUoKSB7CgkJCQlsZXQgdGl0bGUgPSB0aGlzLmNoYXQuc2hvd05hbWU7CgkJCQlpZiAodGhpcy5jaGF0LnR5cGUgPT0gIkdST1VQIikgewoJCQkJCWxldCBzaXplID0gdGhpcy5ncm91cE1lbWJlcnMuZmlsdGVyKG0gPT4gIW0ucXVpdCkubGVuZ3RoOwoJCQkJCXRpdGxlICs9IGAoJHtzaXplfSlgOwoJCQkJfQoJCQkJcmV0dXJuIHRpdGxlOwoJCQl9LAoJCQltZXNzYWdlQWN0aW9uKCkgewoJCQkJcmV0dXJuIGAvbWVzc2FnZS8ke3RoaXMuY2hhdC50eXBlLnRvTG93ZXJDYXNlKCl9L3NlbmRgOwoJCQl9LAoJCQl1bnJlYWRDb3VudCgpIHsKCQkJCXJldHVybiB0aGlzLmNoYXQudW5yZWFkQ291bnQ7CgkJCX0KCQl9LAoJCXdhdGNoOiB7CgkJCWNoYXQ6IHsKCQkJCWhhbmRsZXIobmV3Q2hhdCwgb2xkQ2hhdCkgewoJCQkJCWlmIChuZXdDaGF0LnRhcmdldElkID4gMCAmJiAoIW9sZENoYXQgfHwgbmV3Q2hhdC50eXBlICE9IG9sZENoYXQudHlwZSB8fAoJCQkJCQkJbmV3Q2hhdC50YXJnZXRJZCAhPSBvbGRDaGF0LnRhcmdldElkKSkgewoJCQkJCQlpZiAodGhpcy5jaGF0LnR5cGUgPT0gIkdST1VQIikgewoJCQkJCQkJdGhpcy5sb2FkR3JvdXAodGhpcy5jaGF0LnRhcmdldElkKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCXRoaXMubG9hZEZyaWVuZCh0aGlzLmNoYXQudGFyZ2V0SWQpOwoJCQkJCQkJLy8g5Yqg6L295bey6K+754q25oCBCgkJCQkJCQl0aGlzLmxvYWRSZWFkZWQodGhpcy5jaGF0LnRhcmdldElkKQoJCQkJCQl9CgkJCQkJCS8vIOa7muWIsOW6lemDqAoJCQkJCQl0aGlzLnNjcm9sbFRvQm90dG9tKCk7CgkJCQkJCXRoaXMuc2hvd1NpZGUgPSBmYWxzZTsKCQkJCQkJLy8g5raI5oGv5bey6K+7CgkJCQkJCXRoaXMucmVhZGVkTWVzc2FnZSgpCgkJCQkJCS8vIOWIneWni+eKtuaAgeWPquaYvuekujMw5p2h5raI5oGvCgkJCQkJCWxldCBzaXplID0gdGhpcy5jaGF0Lm1lc3NhZ2VzLmxlbmd0aDsKCQkJCQkJdGhpcy5zaG93TWluSWR4ID0gc2l6ZSA+IDMwID8gc2l6ZSAtIDMwIDogMDsKCQkJCQkJLy8g6YeN572u6L6T5YWl5qGGCgkJCQkJCXRoaXMucmVzZXRFZGl0b3IoKTsKCQkJCQl9CgkJCQl9LAoJCQkJaW1tZWRpYXRlOiB0cnVlCgkJCX0sCgkJCXVucmVhZENvdW50OiB7CgkJCQloYW5kbGVyKG5ld0NvdW50LCBvbGRDb3VudCkgewoJCQkJCWlmIChuZXdDb3VudCA+IDApIHsKCQkJCQkJLy8g5ouJ6Iez5bqV6YOoCgkJCQkJCXRoaXMuc2Nyb2xsVG9Cb3R0b20oKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9LAoJCW1vdW50ZWQoKSB7CgkJCWxldCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2hhdFNjcm9sbEJveCIpOwoJCQlkaXYuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vblNjcm9sbCkKCQl9Cgl9Cg=="},{"version":3,"sources":["ChatBox.vue"],"names":[],"mappings":";AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChatBox.vue","sourceRoot":"src/components/chat","sourcesContent":["<template>\n\t<div class=\"chat-box\" @click=\"closeRefBox()\" @mousemove=\"readedMessage()\">\n\t\t<el-container>\n\t\t\t<el-header height=\"60px\" class=\"header\">\n\t\t\t\t<span>{{title}}</span>\n\t\t\t\t<span title=\"群聊信息\" v-show=\"this.chat.type=='GROUP'\" class=\"btn-side el-icon-more\"\n\t\t\t\t\t@click=\"showSide=!showSide\"></span>\n\t\t\t</el-header>\n\t\t\t<el-main style=\"padding: 0;\">\n\t\t\t\t<el-container>\n\t\t\t\t\t<el-container class=\"content-box\">\n\t\t\t\t\t\t<el-main class=\"im-chat-main\" id=\"chatScrollBox\" @scroll=\"onScroll\">\n\t\t\t\t\t\t\t<div class=\"im-chat-box\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li v-for=\"(msgInfo,idx) in chat.messages\" :key=\"idx\">\n\t\t\t\t\t\t\t\t\t\t<chat-message-item v-show=\"idx>=showMinIdx\" :mine=\"msgInfo.sendId == mine.id\"\n\t\t\t\t\t\t\t\t\t\t\t:headImage=\"headImage(msgInfo)\" :showName=\"showName(msgInfo)\"\n\t\t\t\t\t\t\t\t\t\t\t:msgInfo=\"msgInfo\" @delete=\"deleteMessage\" @recall=\"recallMessage\">\n\t\t\t\t\t\t\t\t\t\t</chat-message-item>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-main>\n\t\t\t\t\t\t<el-footer height=\"240px\" class=\"im-chat-footer\">\n\t\t\t\t\t\t\t<div class=\"chat-tool-bar\">\n\t\t\t\t\t\t\t\t<div title=\"表情\" class=\"icon iconfont icon-biaoqing\" ref=\"emotion\"\n\t\t\t\t\t\t\t\t\t@click.stop=\"showEmotionBox()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送图片\">\n\t\t\t\t\t\t\t\t\t<file-upload :action=\"'/image/upload'\" :maxSize=\"5*1024*1024\"\n\t\t\t\t\t\t\t\t\t\t:fileTypes=\"['image/jpeg', 'image/png', 'image/jpg', 'image/webp','image/gif']\"\n\t\t\t\t\t\t\t\t\t\t@before=\"onImageBefore\" @success=\"onImageSuccess\" @fail=\"onImageFail\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-picture-outline\"></i>\n\t\t\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送文件\">\n\t\t\t\t\t\t\t\t\t<file-upload :action=\"'/file/upload'\" :maxSize=\"10*1024*1024\" @before=\"onFileBefore\"\n\t\t\t\t\t\t\t\t\t\t@success=\"onFileSuccess\" @fail=\"onFileFail\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-wallet\"></i>\n\t\t\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送语音\" class=\"el-icon-microphone\" @click=\"showVoiceBox()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"视频聊天\" v-show=\"chat.type=='PRIVATE'\" class=\"el-icon-phone-outline\"\n\t\t\t\t\t\t\t\t\t@click=\"showVideoBox()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"聊天记录\" class=\"el-icon-chat-dot-round\" @click=\"showHistoryBox()\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"send-content-area\">\n\t\t\t\t\t\t\t\t<div contenteditable=\"true\" v-show=\"!sendImageUrl\" ref=\"editBox\" class=\"send-text-area\"\n\t\t\t\t\t\t\t\t\t:disabled=\"lockMessage\" @paste.prevent=\"onEditorPaste\"\n\t\t\t\t\t\t\t\t\t@compositionstart=\"onEditorCompositionStart\"\n\t\t\t\t\t\t\t\t\t@compositionend=\"onEditorCompositionEnd\" @input=\"onEditorInput\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"温馨提示:可以粘贴截图到这里了哦~\" @blur=\"onEditBoxBlur()\" @keydown.down=\"onKeyDown\"\n\t\t\t\t\t\t\t\t\t@keydown.up=\"onKeyUp\" @keydown.enter.prevent=\"onKeyEnter\">\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div v-show=\"sendImageUrl\" class=\"send-image-area\">\n\t\t\t\t\t\t\t\t\t<div class=\"send-image-box\">\n\t\t\t\t\t\t\t\t\t\t<img class=\"send-image\" :src=\"sendImageUrl\" />\n\t\t\t\t\t\t\t\t\t\t<span class=\"send-image-close el-icon-close\" title=\"删除\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"removeSendImage()\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"send-btn-area\">\n\t\t\t\t\t\t\t\t\t<el-button type=\"primary\" style=\"background-color:569CD6\" size=\"large\" @click=\"sendMessage()\">发送</el-button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-footer>\n\t\t\t\t\t</el-container>\n\t\t\t\t\t<el-aside class=\"chat-group-side-box\" width=\"300px\" v-show=\"showSide\">\n\t\t\t\t\t\t<chat-group-side :group=\"group\" :groupMembers=\"groupMembers\" @reload=\"loadGroup(group.id)\">\n\t\t\t\t\t\t</chat-group-side>\n\t\t\t\t\t</el-aside>\n\t\t\t\t</el-container>\n\t\t\t</el-main>\n\t\t\t<emotion ref=\"emoBox\" @emotion=\"onEmotion\"></Emotion>\n\t\t\t<chat-at-box ref=\"atBox\" :ownerId=\"group.ownerId\" :members=\"groupMembers\" :search-text=\"atSearchText\"\n\t\t\t\t@select=\"onAtSelect\"></chat-at-box>\n\t\t\t<chat-voice :visible=\"showVoice\" @close=\"closeVoiceBox\" @send=\"onSendVoice\"></chat-voice>\n\t\t\t<chat-history :visible=\"showHistory\" :chat=\"chat\" :friend=\"friend\" :group=\"group\"\n\t\t\t\t:groupMembers=\"groupMembers\" @close=\"closeHistoryBox\"></chat-history>\n\t\t</el-container>\n\t</div>\n</template>\n\n<script>\n\timport ChatGroupSide from \"./ChatGroupSide.vue\";\n\timport ChatMessageItem from \"./ChatMessageItem.vue\";\n\timport FileUpload from \"../common/FileUpload.vue\";\n\timport Emotion from \"../common/Emotion.vue\";\n\timport ChatVoice from \"./ChatVoice.vue\";\n\timport ChatHistory from \"./ChatHistory.vue\";\n\timport ChatAtBox from \"./ChatAtBox.vue\"\n\n\texport default {\n\t\tname: \"chatPrivate\",\n\t\tcomponents: {\n\t\t\tChatMessageItem,\n\t\t\tFileUpload,\n\t\t\tChatGroupSide,\n\t\t\tEmotion,\n\t\t\tChatVoice,\n\t\t\tChatHistory,\n\t\t\tChatAtBox\n\t\t},\n\t\tprops: {\n\t\t\tchat: {\n\t\t\t\ttype: Object\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tfriend: {},\n\t\t\t\tgroup: {},\n\t\t\t\tgroupMembers: [],\n\t\t\t\tsendImageUrl: \"\",\n\t\t\t\tsendImageFile: \"\",\n\t\t\t\tshowVoice: false, // 是否显示语音录制弹窗\n\t\t\t\tshowSide: false, // 是否显示群聊信息栏\n\t\t\t\tshowHistory: false, // 是否显示历史聊天记录\n\t\t\t\tlockMessage: false, // 是否锁定发送，\n\t\t\t\tshowMinIdx: 0, // 下标低于showMinIdx的消息不显示，否则页面会很卡\n\t\t\t\tatSearchText: \"\",\n\t\t\t\tfocusNode: null, // 缓存光标所在节点\n\t\t\t\tfocusOffset: null, // 缓存光标所在节点位置\n\t\t\t\tzhLock: false // 解决中文输入法触发英文的情况\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tcloseRefBox() {\n\t\t\t\tthis.$refs.emoBox.close();\n\t\t\t\tthis.$refs.atBox.close();\n\t\t\t},\n\t\t\tonKeyDown() {\n\t\t\t\tif (this.$refs.atBox.show) {\n\t\t\t\t\tthis.$refs.atBox.moveDown()\n\t\t\t\t}\n\t\t\t},\n\t\t\tonKeyUp() {\n\t\t\t\tif (this.$refs.atBox.show) {\n\t\t\t\t\tthis.$refs.atBox.moveUp()\n\t\t\t\t}\n\t\t\t},\n\t\t\tonKeyEnter() {\n\t\t\t\tif (this.$refs.atBox.show) {\n\t\t\t\t\t// 键盘操作不会自动修正焦点，需要手动修正,原因不详\n\t\t\t\t\tthis.focusOffset += this.atSearchText.length;\n\t\t\t\t\tthis.$refs.atBox.select();\n\t\t\t\t} else {\n\t\t\t\t\tthis.sendMessage();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonEditBoxBlur() {\n\t\t\t\tlet selection = window.getSelection()\n\t\t\t\t// 记录光标位置(点击emoji时)\n\t\t\t\tthis.focusNode = selection.focusNode;\n\t\t\t\tthis.focusOffset = selection.focusOffset;\n\t\t\t},\n\t\t\tonEditorInput(e) {\n\t\t\t\t// 如果触发 @\n\t\t\t\tif (this.chat.type == \"GROUP\" && !this.zhLock) {\n\t\t\t\t\tif (e.data == '@') {\n\t\t\t\t\t\t// 打开选择弹窗\n\t\t\t\t\t\tthis.showAtBox(e);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet selection = window.getSelection()\n\t\t\t\t\t\tlet range = selection.getRangeAt(0)\n\t\t\t\t\t\tthis.focusNode = selection.focusNode;\n\t\t\t\t\t\t// 截取@后面的名称作为过滤条件\n\t\t\t\t\t\tlet stIdx = this.focusNode.textContent.lastIndexOf('@');\n\t\t\t\t\t\tthis.atSearchText = this.focusNode.textContent.substring(stIdx + 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t},\n\t\t\tonEditorCompositionStart() {\n\t\t\t\tthis.zhLock = true;\n\t\t\t},\n\t\t\tonEditorCompositionEnd(e) {\n\t\t\t\tthis.zhLock = false;\n\t\t\t\tthis.onEditorInput(e);\n\t\t\t},\n\t\t\tshowAtBox(e) {\n\t\t\t\tthis.atSearchText = \"\";\n\t\t\t\tlet selection = window.getSelection()\n\t\t\t\tlet range = selection.getRangeAt(0)\n\t\t\t\t// 记录光标所在位置\n\t\t\t\tthis.focusNode = selection.focusNode;\n\t\t\t\tthis.focusOffset = selection.focusOffset;\n\t\t\t\t// 光标所在坐标\n\t\t\t\tlet pos = range.getBoundingClientRect();\n\t\t\t\tthis.$refs.atBox.open({\n\t\t\t\t\tx: pos.x,\n\t\t\t\t\ty: pos.y\n\t\t\t\t})\n\t\t\t},\n\t\t\tonAtSelect(member) {\n\t\t\t\tlet range = window.getSelection().getRangeAt(0)\n\t\t\t\t// 选中输入的 @xx 符\n\t\t\t\trange.setStart(this.focusNode, this.focusOffset - 1 - this.atSearchText.length)\n\t\t\t\trange.setEnd(this.focusNode, this.focusOffset)\n\t\t\t\trange.deleteContents()\n\t\t\t\t// 创建元素节点\n\t\t\t\tlet element = document.createElement('SPAN')\n\t\t\t\telement.className = \"at\"\n\t\t\t\telement.dataset.id = member.userId;\n\t\t\t\telement.contentEditable = 'false'\n\t\t\t\telement.innerText = `@${member.aliasName}`\n\t\t\t\trange.insertNode(element)\n\t\t\t\t// 光标移动到末尾\n\t\t\t\trange.collapse()\n\t\t\t\t// 插入空格\n\t\t\t\tlet textNode = document.createTextNode('\\u00A0');\n\t\t\t\trange.insertNode(textNode)\n\t\t\t\trange.collapse()\n\t\t\t\tthis.atSearchText = \"\";\n\t\t\t\tthis.$refs.editBox.focus()\n\t\t\t},\n\t\t\tcreateSendText() {\n\t\t\t\tlet sendText = \"\"\n\t\t\t\tthis.$refs.editBox.childNodes.forEach((node) => {\n\t\t\t\t\tif (node.nodeName == \"#text\") {\n\t\t\t\t\t\tsendText += this.html2Escape(node.textContent);\n\t\t\t\t\t} else if (node.nodeName == \"SPAN\") {\n\t\t\t\t\t\tsendText += node.innerText;\n\t\t\t\t\t} else if (node.nodeName == \"IMG\") {\n\t\t\t\t\t\tsendText += node.dataset.code;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn sendText;\n\t\t\t},\n\t\t\thtml2Escape(strHtml) {\n\t\t\t\treturn strHtml.replace(/[<>&\"]/g, function(c) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t'<': '&lt;',\n\t\t\t\t\t\t'>': '&gt;',\n\t\t\t\t\t\t'&': '&amp;',\n\t\t\t\t\t\t'\"': '&quot;'\n\t\t\t\t\t}[c];\n\t\t\t\t});\n\t\t\t},\n\t\t\tcreateAtUserIds() {\n\t\t\t\tlet ids = [];\n\t\t\t\tthis.$refs.editBox.childNodes.forEach((node) => {\n\t\t\t\t\tif (node.nodeName == \"SPAN\") {\n\t\t\t\t\t\tids.push(node.dataset.id);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn ids;\n\t\t\t},\n\t\t\tonEditorPaste(e) {\n\t\t\t\tlet txt = event.clipboardData.getData('Text')\n\t\t\t\tif (typeof(txt) == 'string') {\n\t\t\t\t\tlet range = window.getSelection().getRangeAt(0)\n\t\t\t\t\tlet textNode = document.createTextNode(txt);\n\t\t\t\t\trange.insertNode(textNode)\n\t\t\t\t\trange.collapse();\n\n\t\t\t\t}\n\t\t\t\tlet items = (event.clipboardData || window.clipboardData).items\n\t\t\t\tif (items.length) {\n\t\t\t\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\t\t\t\tif (items[i].type.indexOf('image') !== -1) {\n\t\t\t\t\t\t\tlet file = items[i].getAsFile();\n\t\t\t\t\t\t\tthis.sendImageFile = file;\n\t\t\t\t\t\t\tthis.sendImageUrl = URL.createObjectURL(file);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tremoveSendImage() {\n\t\t\t\tthis.sendImageUrl = \"\";\n\t\t\t\tthis.sendImageFile = null;\n\t\t\t},\n\t\t\tonImageSuccess(data, file) {\n\t\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\t\tmsgInfo.content = JSON.stringify(data);\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: this.messageAction,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: msgInfo\n\t\t\t\t}).then((id) => {\n\t\t\t\t\tmsgInfo.loadStatus = 'ok';\n\t\t\t\t\tmsgInfo.id = id;\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t})\n\t\t\t},\n\t\t\tonImageFail(e, file) {\n\t\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\t\tmsgInfo.loadStatus = 'fail';\n\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t},\n\t\t\tonImageBefore(file) {\n\t\t\t\tlet url = URL.createObjectURL(file);\n\t\t\t\tlet data = {\n\t\t\t\t\toriginUrl: url,\n\t\t\t\t\tthumbUrl: url\n\t\t\t\t}\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tfileId: file.uid,\n\t\t\t\t\tsendId: this.mine.id,\n\t\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\t\tselfSend: true,\n\t\t\t\t\ttype: 1,\n\t\t\t\t\tloadStatus: \"loading\",\n\t\t\t\t\tstatus: this.$enums.MESSAGE_STATUS.UNSEND\n\t\t\t\t}\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\t// 插入消息\n\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t// 滚动到底部\n\t\t\t\tthis.scrollToBottom();\n\t\t\t\t// 借助file对象保存\n\t\t\t\tfile.msgInfo = msgInfo;\n\t\t\t},\n\t\t\tonFileSuccess(url, file) {\n\t\t\t\tlet data = {\n\t\t\t\t\tname: file.name,\n\t\t\t\t\tsize: file.size,\n\t\t\t\t\turl: url\n\t\t\t\t}\n\t\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\t\tmsgInfo.content = JSON.stringify(data);\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: this.messageAction,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: msgInfo\n\t\t\t\t}).then((id) => {\n\t\t\t\t\tmsgInfo.loadStatus = 'ok';\n\t\t\t\t\tmsgInfo.id = id;\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t})\n\t\t\t},\n\t\t\tonFileFail(e, file) {\n\t\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\t\tmsgInfo.loadStatus = 'fail';\n\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t},\n\t\t\tonFileBefore(file) {\n\t\t\t\tlet url = URL.createObjectURL(file);\n\t\t\t\tlet data = {\n\t\t\t\t\tname: file.name,\n\t\t\t\t\tsize: file.size,\n\t\t\t\t\turl: url\n\t\t\t\t}\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tsendId: this.mine.id,\n\t\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\t\tselfSend: true,\n\t\t\t\t\ttype: 2,\n\t\t\t\t\tloadStatus: \"loading\",\n\t\t\t\t\tstatus: this.$enums.MESSAGE_STATUS.UNSEND\n\t\t\t\t}\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\t// 插入消息\n\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t// 滚动到底部\n\t\t\t\tthis.scrollToBottom();\n\t\t\t\t// 借助file对象透传\n\t\t\t\tfile.msgInfo = msgInfo;\n\t\t\t},\n\t\t\tonCloseSide() {\n\t\t\t\tthis.showSide = false;\n\t\t\t},\n\t\t\tonScrollToTop() {\n\t\t\t\t// 多展示10条信息\n\t\t\t\tthis.showMinIdx = this.showMinIdx > 10 ? this.showMinIdx - 10 : 0;\n\t\t\t},\n\t\t\tonScroll(e) {\n\t\t\t\tlet scrollElement = e.target\n\t\t\t\tlet scrollTop = scrollElement.scrollTop\n\t\t\t\tif (scrollTop < 30) { // 在顶部,不滚动的情况\n\t\t\t\t\t// 多展示20条信息\n\t\t\t\t\tthis.showMinIdx = this.showMinIdx > 20 ? this.showMinIdx - 20 : 0;\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowEmotionBox() {\n\t\t\t\tlet width = this.$refs.emotion.offsetWidth;\n\t\t\t\tlet left = this.$elm.fixLeft(this.$refs.emotion);\n\t\t\t\tlet top = this.$elm.fixTop(this.$refs.emotion);\n\t\t\t\tthis.$refs.emoBox.open({\n\t\t\t\t\tx: left + width / 2,\n\t\t\t\t\ty: top\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tonEmotion(emoText) {\n\t\t\t\t// 保持输入框焦点\n\t\t\t\tthis.$refs.editBox.focus();\n\t\t\t\tlet range = window.getSelection().getRangeAt(0);\n\t\t\t\t// 插入光标所在位置\n\t\t\t\trange.setStart(this.focusNode, this.focusOffset)\n\t\t\t\tlet element = document.createElement('IMG')\n\t\t\t\telement.className = \"emo\"\n\t\t\t\telement.dataset.code = emoText;\n\t\t\t\telement.contentEditable = 'true'\n\t\t\t\telement.setAttribute(\"src\", this.$emo.textToUrl(emoText));\n\t\t\t\t// 选中元素节点\n\t\t\t\trange.insertNode(element)\n\t\t\t\t// 光标移动到末尾\n\t\t\t\trange.collapse()\n\n\t\t\t},\n\t\t\tshowVoiceBox() {\n\t\t\t\tthis.showVoice = true;\n\t\t\t},\n\t\t\tcloseVoiceBox() {\n\t\t\t\tthis.showVoice = false;\n\t\t\t},\n\t\t\tshowVideoBox() {\n\t\t\t\tthis.$store.commit(\"showChatPrivateVideoBox\", {\n\t\t\t\t\tfriend: this.friend,\n\t\t\t\t\tmaster: true\n\t\t\t\t});\n\t\t\t},\n\t\t\tshowHistoryBox() {\n\t\t\t\tthis.showHistory = true;\n\t\t\t},\n\t\t\tcloseHistoryBox() {\n\t\t\t\tthis.showHistory = false;\n\t\t\t},\n\t\t\tonSendVoice(data) {\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\t\ttype: 3\n\t\t\t\t}\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: this.messageAction,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: msgInfo\n\t\t\t\t}).then((id) => {\n\t\t\t\t\tmsgInfo.id = id;\n\t\t\t\t\tmsgInfo.sendTime = new Date().getTime();\n\t\t\t\t\tmsgInfo.sendId = this.$store.state.userStore.userInfo.id;\n\t\t\t\t\tmsgInfo.selfSend = true;\n\t\t\t\t\tmsgInfo.status = this.$enums.MESSAGE_STATUS.UNSEND;\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t\t// 保持输入框焦点\n\t\t\t\t\tthis.$refs.editBox.focus();\n\t\t\t\t\t// 滚动到底部\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t// 关闭录音窗口\n\t\t\t\t\tthis.showVoice = false;\n\t\t\t\t})\n\t\t\t},\n\t\t\tfillTargetId(msgInfo, targetId) {\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tmsgInfo.groupId = targetId;\n\t\t\t\t} else {\n\t\t\t\t\tmsgInfo.recvId = targetId;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsendMessage() {\n\t\t\t\tif (this.sendImageFile) {\n\t\t\t\t\tthis.sendImageMessage();\n\t\t\t\t} else {\n\t\t\t\t\tthis.sendTextMessage();\n\t\t\t\t}\n\t\t\t\t// 消息已读\n\t\t\t\tthis.readedMessage()\n\t\t\t},\n\t\t\tsendImageMessage() {\n\t\t\t\tlet file = this.sendImageFile;\n\t\t\t\tthis.onImageBefore(this.sendImageFile);\n\t\t\t\tlet formData = new FormData()\n\t\t\t\tformData.append('file', file)\n\t\t\t\tthis.$http.post(\"/image/upload\", formData, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t\t}\n\t\t\t\t}).then((data) => {\n\t\t\t\t\tthis.onImageSuccess(data, file);\n\t\t\t\t}).catch((res) => {\n\t\t\t\t\tthis.onImageSuccess(res, file);\n\t\t\t\t})\n\t\t\t\tthis.sendImageFile = null;\n\t\t\t\tthis.sendImageUrl = \"\";\n\t\t\t\tthis.$nextTick(() => this.$refs.editBox.focus());\n\t\t\t\tthis.scrollToBottom();\n\t\t\t},\n\t\t\tsendTextMessage() {\n\t\t\t\tlet sendText = this.createSendText();\n\t\t\t\tif (!sendText.trim()) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.$refs.editBox.cle\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tcontent: sendText,\n\t\t\t\t\ttype: 0\n\t\t\t\t}\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\t// 被@人员列表\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tmsgInfo.atUserIds = this.createAtUserIds();\n\t\t\t\t}\n\t\t\t\tthis.lockMessage = true;\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: this.messageAction,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: msgInfo\n\t\t\t\t}).then((id) => {\n\t\t\t\t\tmsgInfo.id = id;\n\t\t\t\t\tmsgInfo.sendTime = new Date().getTime();\n\t\t\t\t\tmsgInfo.sendId = this.$store.state.userStore.userInfo.id;\n\t\t\t\t\tmsgInfo.selfSend = true;\n\t\t\t\t\tmsgInfo.status = this.$enums.MESSAGE_STATUS.UNSEND;\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t}).finally(() => {\n\t\t\t\t\t// 解除锁定\n\t\t\t\t\tthis.lockMessage = false;\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\tthis.resetEditor();\n\t\t\t\t});\n\n\t\t\t},\n\t\t\tdeleteMessage(msgInfo) {\n\t\t\t\tthis.$confirm('确认删除消息?', '删除消息', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$store.commit(\"deleteMessage\", msgInfo);\n\t\t\t\t});\n\t\t\t},\n\t\t\trecallMessage(msgInfo) {\n\t\t\t\tthis.$confirm('确认撤回消息?', '撤回消息', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tlet url = `/message/${this.chat.type.toLowerCase()}/recall/${msgInfo.id}`\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: url,\n\t\t\t\t\t\tmethod: 'delete'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.$message.success(\"消息已撤回\");\n\t\t\t\t\t\tmsgInfo = JSON.parse(JSON.stringify(msgInfo));\n\t\t\t\t\t\tmsgInfo.type = 10;\n\t\t\t\t\t\tmsgInfo.content = '你撤回了一条消息';\n\t\t\t\t\t\tmsgInfo.status = this.$enums.MESSAGE_STATUS.RECALL;\n\t\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t},\n\t\t\treadedMessage() {\n\t\t\t\tif (this.chat.unreadCount == 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.$store.commit(\"resetUnreadCount\", this.chat)\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tvar url = `/message/group/readed?groupId=${this.chat.targetId}`\n\t\t\t\t} else {\n\t\t\t\t\turl = `/message/private/readed?friendId=${this.chat.targetId}`\n\t\t\t\t}\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: url,\n\t\t\t\t\tmethod: 'put'\n\t\t\t\t}).then(() => {})\n\t\t\t},\n\t\t\tloadReaded(fId) {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/message/private/maxReadedId?friendId=${fId}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((id) => {\n\t\t\t\t\tthis.$store.commit(\"readedMessage\", {\n\t\t\t\t\t\tfriendId: fId,\n\t\t\t\t\t\tmaxId: id\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tloadGroup(groupId) {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/find/${groupId}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((group) => {\n\t\t\t\t\tthis.group = group;\n\t\t\t\t\tthis.$store.commit(\"updateChatFromGroup\", group);\n\t\t\t\t\tthis.$store.commit(\"updateGroup\", group);\n\n\t\t\t\t});\n\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/members/${groupId}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((groupMembers) => {\n\t\t\t\t\tthis.groupMembers = groupMembers;\n\t\t\t\t});\n\t\t\t},\n\t\t\tloadFriend(friendId) {\n\t\t\t\t// 获取对方最新信息\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/user/find/${friendId}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((friend) => {\n\t\t\t\t\tthis.friend = friend;\n\t\t\t\t\tthis.$store.commit(\"updateChatFromFriend\", friend);\n\t\t\t\t\tthis.$store.commit(\"updateFriend\", friend);\n\t\t\t\t})\n\t\t\t},\n\t\t\tshowName(msgInfo) {\n\t\t\t\tif (this.chat.type == 'GROUP') {\n\t\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == msgInfo.sendId);\n\t\t\t\t\treturn member ? member.aliasName : \"\";\n\t\t\t\t} else {\n\t\t\t\t\treturn msgInfo.sendId == this.mine.id ? this.mine.nickName : this.chat.showName\n\t\t\t\t}\n\n\t\t\t},\n\t\t\theadImage(msgInfo) {\n\t\t\t\tif (this.chat.type == 'GROUP') {\n\t\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == msgInfo.sendId);\n\t\t\t\t\treturn member ? member.headImage : \"\";\n\t\t\t\t} else {\n\t\t\t\t\treturn msgInfo.sendId == this.mine.id ? this.mine.headImageThumb : this.chat.headImage\n\t\t\t\t}\n\t\t\t},\n\t\t\tresetEditor() {\n\t\t\t\tthis.sendImageUrl = \"\";\n\t\t\t\tthis.sendImageFile = null;\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.$refs.editBox.innerHTML = \"\";\n\t\t\t\t\tthis.$refs.editBox.focus();\n\t\t\t\t});\n\t\t\t},\n\t\t\tscrollToBottom() {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tlet div = document.getElementById(\"chatScrollBox\");\n\t\t\t\t\tdiv.scrollTop = div.scrollHeight;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tmine() {\n\t\t\t\treturn this.$store.state.userStore.userInfo;\n\t\t\t},\n\t\t\ttitle() {\n\t\t\t\tlet title = this.chat.showName;\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tlet size = this.groupMembers.filter(m => !m.quit).length;\n\t\t\t\t\ttitle += `(${size})`;\n\t\t\t\t}\n\t\t\t\treturn title;\n\t\t\t},\n\t\t\tmessageAction() {\n\t\t\t\treturn `/message/${this.chat.type.toLowerCase()}/send`;\n\t\t\t},\n\t\t\tunreadCount() {\n\t\t\t\treturn this.chat.unreadCount;\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tchat: {\n\t\t\t\thandler(newChat, oldChat) {\n\t\t\t\t\tif (newChat.targetId > 0 && (!oldChat || newChat.type != oldChat.type ||\n\t\t\t\t\t\t\tnewChat.targetId != oldChat.targetId)) {\n\t\t\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\t\t\tthis.loadGroup(this.chat.targetId);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.loadFriend(this.chat.targetId);\n\t\t\t\t\t\t\t// 加载已读状态\n\t\t\t\t\t\t\tthis.loadReaded(this.chat.targetId)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 滚到底部\n\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\tthis.showSide = false;\n\t\t\t\t\t\t// 消息已读\n\t\t\t\t\t\tthis.readedMessage()\n\t\t\t\t\t\t// 初始状态只显示30条消息\n\t\t\t\t\t\tlet size = this.chat.messages.length;\n\t\t\t\t\t\tthis.showMinIdx = size > 30 ? size - 30 : 0;\n\t\t\t\t\t\t// 重置输入框\n\t\t\t\t\t\tthis.resetEditor();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t},\n\t\t\tunreadCount: {\n\t\t\t\thandler(newCount, oldCount) {\n\t\t\t\t\tif (newCount > 0) {\n\t\t\t\t\t\t// 拉至底部\n\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tlet div = document.getElementById(\"chatScrollBox\");\n\t\t\tdiv.addEventListener('scroll', this.onScroll)\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n.header{\n\tcolor: rgb(152, 152, 152);\n\tletter-spacing: 1px;\n\n\nbackground-image: linear-gradient(0deg, rgb(253, 250, 250), #e2e9f7);\n}\n\t.chat-box {\n\t\tfont-family: Calibri, sans-serif;\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tbackground-image: url(\"../../assets/image/输入框背景.jpg\");\n\t\tbackground-size: cover;\n\t\tbackground-position: center;\n\n\t\t.el-header {\n\t\t\tpadding: 5px;\n\t\t\tbackground-color: white;\n\t\t\tline-height: 50px;\n\t\t\tfont-size: 20px;\n\t\t\tfont-weight: 600;\n\t\t\t// border: #dddddd solid 1px;\n\t\t\t// box-shadow: 3px 1px 3px #222222b0;\n\n\t\t\t.btn-side {\n\t\t\t\tposition: absolute;\n\t\t\t\tright: 20px;\n\t\t\t\tline-height: 60px;\n\t\t\t\tfont-size: 22px;\n\t\t\t\tcursor: pointer;\n\n\t\t\t\t&:hover {\n\t\t\t\t\tfont-size: 30px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t.im-chat-main {\n\t\t\tpadding: 0;\n\t\t\t// border: #dddddd solid 1px;\n\n\t\t\t.im-chat-box {\n\t\t\t\t>ul {\n\t\t\t\t\tpadding: 0 20px;\n\n\t\t\t\t\tli {\n\t\t\t\t\t\tlist-style-type: none;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.im-chat-footer {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tpadding: 0;\n\t\t\t// border: #dddddd solid 1px;\n\n\t\t\t.chat-tool-bar {\n\n\t\t\t\tdisplay: flex;\n\t\t\t\tposition: relative;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 50px;\n\t\t\t\ttext-align: left;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tborder-top: 1px solid #ddd;\n\t\t\t\tpadding: 5px;\n\n\t\t\t\t>div {\n\t\t\t\t\tmargin-left: 20px;\n\t\t\t\t\tfont-size: 35px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tcolor: #8b8b8b;\n\t\t\t\t\tline-height: 40px;\n\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\tcolor: black;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.send-content-area {\n\t\t\t\tposition: relative;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\theight: 100%;\n\t\t\t\tbackground-color: white !important;\n\n\n\t\t\t\t.send-text-area {\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\tpadding: 5px;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tresize: none;\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\tcolor: black;\n\t\t\t\t\toutline-color: rgba(219, 235, 249, 0.61);\n\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\tline-height: 30 px;\n\n\t\t\t\t\t.at {\n\t\t\t\t\t\tcolor: blue;\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t}\n\n\t\t\t\t\t.emo {\n\t\t\t\t\t\twidth: 30px;\n\t\t\t\t\t\theight: 30px;\n\t\t\t\t\t\tvertical-align: bottom;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.send-image-area {\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\tborder: #53a0e7 solid 1px;\n\n\t\t\t\t\t.send-image-box {\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\tdisplay: inline-block;\n\n\t\t\t\t\t\t.send-image {\n\t\t\t\t\t\t\tmax-height: 180px;\n\t\t\t\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\t\t\t\tborder-radius: 2%;\n\t\t\t\t\t\t\tmargin: 2px;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.send-image-close {\n\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\tpadding: 3px;\n\t\t\t\t\t\t\tright: 7px;\n\t\t\t\t\t\t\ttop: 7px;\n\t\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\tfont-size: 15px;\n\t\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\t\tbackground-color: #aaa;\n\t\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t.send-btn-area {\n\t\t\t\t\tpadding: 10px;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\t.chat-group-side-box {\n\t\t\tborder: #dddddd solid 1px;\n\t\t\tanimation: rtl-drawer-in .3s 1ms;\n\t\t}\n\t}\n</style>"]}]}