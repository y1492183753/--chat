{"remainingRequest":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\im-ui\\src\\components\\group\\AddGroupMember.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\im-ui\\src\\components\\group\\AddGroupMember.vue","mtime":1703809564000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1710142166000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1710142168000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglpbXBvcnQgRnJpZW5kSXRlbSBmcm9tICcuLi9mcmllbmQvRnJpZW5kSXRlbS52dWUnOwoKCWV4cG9ydCBkZWZhdWx0IHsKCQluYW1lOiAiYWRkR3JvdXBNZW1iZXIiLAoJCWNvbXBvbmVudHM6IHsKCQkJRnJpZW5kSXRlbQoJCX0sCgkJZGF0YSgpIHsKCQkJcmV0dXJuIHsKCQkJCXNlYXJjaFRleHQ6ICIiLAoJCQkJZnJpZW5kczogW10KCQkJfQoJCX0sCgkJbWV0aG9kczogewoJCQlvbkNsb3NlKCkgewoJCQkJdGhpcy4kZW1pdCgiY2xvc2UiKTsKCQkJfSwKCQkJb25PaygpIHsKCgkJCQlsZXQgaW52aXRlVk8gPSB7CgkJCQkJZ3JvdXBJZDogdGhpcy5ncm91cElkLAoJCQkJCWZyaWVuZElkczogW10KCQkJCX0KCQkJCXRoaXMuZnJpZW5kcy5mb3JFYWNoKChmKSA9PiB7CgkJCQkJaWYgKGYuaXNDaGVjayAmJiAhZi5kaXNhYmxlZCkgewoJCQkJCQlpbnZpdGVWTy5mcmllbmRJZHMucHVzaChmLmlkKTsKCQkJCQl9CgkJCQl9KQoJCQkJaWYgKGludml0ZVZPLmZyaWVuZElkcy5sZW5ndGggPiAwKSB7CgkJCQkJdGhpcy4kaHR0cCh7CgkJCQkJCXVybDogIi9ncm91cC9pbnZpdGUiLAoJCQkJCQltZXRob2Q6ICdwb3N0JywKCQkJCQkJZGF0YTogaW52aXRlVk8KCQkJCQl9KS50aGVuKCgpID0+IHsKCQkJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLpgoDor7fmiJDlip8iKTsKCQkJCQkJdGhpcy4kZW1pdCgicmVsb2FkIik7CgkJCQkJCXRoaXMuJGVtaXQoImNsb3NlIik7CgkJCQkJfSkKCQkJCX0KCQkJfSwKCQkJb25SZW1vdmVGcmllbmQoZnJpZW5kLCBpbmRleCkgewoJCQkJZnJpZW5kLmlzQ2hlY2sgPSBmYWxzZTsKCQkJfSwKCQkJb25Td2l0Y2hDaGVjayhmcmllbmQpIHsKCQkJCWlmICghZnJpZW5kLmRpc2FibGVkKSB7CgkJCQkJZnJpZW5kLmlzQ2hlY2sgPSAhZnJpZW5kLmlzQ2hlY2sKCQkJCX0KCQkJfQoJCX0sCgkJcHJvcHM6IHsKCQkJdmlzaWJsZTogewoJCQkJdHlwZTogQm9vbGVhbgoJCQl9LAoJCQlncm91cElkOiB7CgkJCQl0eXBlOiBOdW1iZXIKCQkJfSwKCQkJbWVtYmVyczogewoJCQkJdHlwZTogQXJyYXkKCQkJfQoJCX0sCgkJY29tcHV0ZWQ6IHsKCQkJY2hlY2tDb3VudCgpIHsKCQkJCXJldHVybiB0aGlzLmZyaWVuZHMuZmlsdGVyKChmKSA9PiBmLmlzQ2hlY2sgJiYgIWYuZGlzYWJsZWQpLmxlbmd0aDsKCQkJfQoJCX0sCgkJd2F0Y2g6IHsKCQkJdmlzaWJsZTogZnVuY3Rpb24obmV3RGF0YSwgb2xkRGF0YSkgewoJCQkJaWYgKG5ld0RhdGEpIHsKCQkJCQl0aGlzLmZyaWVuZHMgPSBbXTsKCQkJCQl0aGlzLiRzdG9yZS5zdGF0ZS5mcmllbmRTdG9yZS5mcmllbmRzLmZvckVhY2goKGYpID0+IHsKCQkJCQkJbGV0IGZyaWVuZCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZikpCgkJCQkJCWxldCBtID0gdGhpcy5tZW1iZXJzLmZpbHRlcigobSkgPT4gIW0ucXVpdCkKCQkJCQkJCS5maW5kKChtKSA9PiBtLnVzZXJJZCA9PSBmLmlkKTsKCQkJCQkJY29uc29sZS5sb2cobSk7CgkJCQkJCWlmIChtKSB7CgkJCQkJCQkvLyDlpb3lj4vlt7Lnu4/lnKjnvqTph4wKCQkJCQkJCWZyaWVuZC5kaXNhYmxlZCA9IHRydWU7CgkJCQkJCQlmcmllbmQuaXNDaGVjayA9IHRydWUKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWZyaWVuZC5kaXNhYmxlZCA9IGZhbHNlOwoJCQkJCQkJZnJpZW5kLmlzQ2hlY2sgPSBmYWxzZTsKCQkJCQkJfQoJCQkJCQl0aGlzLmZyaWVuZHMucHVzaChmcmllbmQpOwoJCQkJCX0pCgkJCQl9CgkJCX0KCQl9CgoJfQo="},{"version":3,"sources":["AddGroupMember.vue"],"names":[],"mappings":";AAuCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"AddGroupMember.vue","sourceRoot":"src/components/group","sourcesContent":["<template>\n\t<el-dialog title=\"邀请好友\" :visible.sync=\"visible\" width=\"50%\" :before-close=\"onClose\">\n\t\t<div class=\"agm-container\">\n\t\t\t<div class=\"agm-l-box\">\n\t\t\t\t<el-input width=\"200px\" placeholder=\"搜索好友\" class=\"input-with-select\" v-model=\"searchText\"\n\t\t\t\t\t@keyup.enter.native=\"onSearch()\">\n\t\t\t\t\t<el-button slot=\"append\" icon=\"el-icon-search\" @click=\"onSearch()\"></el-button>\n\t\t\t\t</el-input>\n\t\t\t\t<el-scrollbar style=\"height:400px;\">\n\t\t\t\t\t<div v-for=\"(friend,index) in friends\" :key=\"friend.id\">\n\t\t\t\t\t\t<friend-item v-show=\"friend.nickName.startsWith(searchText)\" :showDelete=\"false\"\n\t\t\t\t\t\t\t@click.native=\"onSwitchCheck(friend)\" :menu=\"false\" :friend=\"friend\" :index=\"index\"\n\t\t\t\t\t\t\t:active=\"false\">\n\t\t\t\t\t\t\t<el-checkbox :disabled=\"friend.disabled\" @click.native.stop=\"\" class=\"agm-friend-checkbox\"\n\t\t\t\t\t\t\t\tv-model=\"friend.isCheck\" size=\"medium\"></el-checkbox>\n\t\t\t\t\t\t</friend-item>\n\t\t\t\t\t</div>\n\t\t\t\t</el-scrollbar>\n\t\t\t</div>\n\t\t\t<div class=\"agm-arrow el-icon-d-arrow-right\"></div>\n\t\t\t<div class=\"agm-r-box\">\n\t\t\t\t<div class=\"agm-select-tip\"> 已勾选{{checkCount}}位好友</div>\n\t\t\t\t<el-scrollbar style=\"height:400px;\">\n\t\t\t\t\t<div v-for=\"(friend,index) in friends\" :key=\"friend.id\">\n\t\t\t\t\t\t<friend-item v-if=\"friend.isCheck && !friend.disabled\" :friend=\"friend\" :index=\"index\"\n\t\t\t\t\t\t\t:active=\"false\" @del=\"onRemoveFriend(friend,index)\" :menu=\"false\">\n\t\t\t\t\t\t</friend-item>\n\t\t\t\t\t</div>\n\t\t\t\t</el-scrollbar>\n\t\t\t</div>\n\t\t</div>\n\t\t<span slot=\"footer\" class=\"dialog-footer\">\n\t\t\t<el-button @click=\"onClose()\">取 消</el-button>\n\t\t\t<el-button type=\"primary\" @click=\"onOk()\">确 定</el-button>\n\t\t</span>\n\t</el-dialog>\n</template>\n\n<script>\n\timport FriendItem from '../friend/FriendItem.vue';\n\n\texport default {\n\t\tname: \"addGroupMember\",\n\t\tcomponents: {\n\t\t\tFriendItem\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tsearchText: \"\",\n\t\t\t\tfriends: []\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tonClose() {\n\t\t\t\tthis.$emit(\"close\");\n\t\t\t},\n\t\t\tonOk() {\n\n\t\t\t\tlet inviteVO = {\n\t\t\t\t\tgroupId: this.groupId,\n\t\t\t\t\tfriendIds: []\n\t\t\t\t}\n\t\t\t\tthis.friends.forEach((f) => {\n\t\t\t\t\tif (f.isCheck && !f.disabled) {\n\t\t\t\t\t\tinviteVO.friendIds.push(f.id);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tif (inviteVO.friendIds.length > 0) {\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: \"/group/invite\",\n\t\t\t\t\t\tmethod: 'post',\n\t\t\t\t\t\tdata: inviteVO\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.$message.success(\"邀请成功\");\n\t\t\t\t\t\tthis.$emit(\"reload\");\n\t\t\t\t\t\tthis.$emit(\"close\");\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\tonRemoveFriend(friend, index) {\n\t\t\t\tfriend.isCheck = false;\n\t\t\t},\n\t\t\tonSwitchCheck(friend) {\n\t\t\t\tif (!friend.disabled) {\n\t\t\t\t\tfriend.isCheck = !friend.isCheck\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tvisible: {\n\t\t\t\ttype: Boolean\n\t\t\t},\n\t\t\tgroupId: {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\tmembers: {\n\t\t\t\ttype: Array\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tcheckCount() {\n\t\t\t\treturn this.friends.filter((f) => f.isCheck && !f.disabled).length;\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tvisible: function(newData, oldData) {\n\t\t\t\tif (newData) {\n\t\t\t\t\tthis.friends = [];\n\t\t\t\t\tthis.$store.state.friendStore.friends.forEach((f) => {\n\t\t\t\t\t\tlet friend = JSON.parse(JSON.stringify(f))\n\t\t\t\t\t\tlet m = this.members.filter((m) => !m.quit)\n\t\t\t\t\t\t\t.find((m) => m.userId == f.id);\n\t\t\t\t\t\tconsole.log(m);\n\t\t\t\t\t\tif (m) {\n\t\t\t\t\t\t\t// 好友已经在群里\n\t\t\t\t\t\t\tfriend.disabled = true;\n\t\t\t\t\t\t\tfriend.isCheck = true\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfriend.disabled = false;\n\t\t\t\t\t\t\tfriend.isCheck = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.friends.push(friend);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n</script>\n\n<style lang=\"scss\">\n\t.agm-container {\n\t\tdisplay: flex;\n\t\t.agm-l-box {\n\t\t\tflex: 1;\n\t\t\tborder: #53a0e79c solid 1px;\n\t\t\tborder-radius: 5px;\n\t\t\toverflow: hidden;\n\t\t\t.el-checkbox {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\n\t\t\t\t//修改选中框的大小\n\t\t\t\t.el-checkbox__inner {\n\t\t\t\t\twidth: 20px;\n\t\t\t\t\theight: 20px;\n\n\t\t\t\t\t//修改选中框中的对勾的大小和位置\n\t\t\t\t\t&::after {\n\t\t\t\t\t\theight: 12px;\n\t\t\t\t\t\tleft: 7px;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//修改点击文字颜色不变\n\t\t\t\t.el-checkbox__input.is-checked+.el-checkbox__label {\n\t\t\t\t\tcolor: #333333;\n\t\t\t\t}\n\n\t\t\t\t.el-checkbox__label {\n\t\t\t\t\tline-height: 20px;\n\t\t\t\t\tpadding-left: 8px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.agm-friend-checkbox {\n\t\t\t\tmargin-right: 20px;\n\t\t\t}\n\t\t}\n\n\t\t.agm-arrow {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tfont-size: 20px;\n\t\t\tpadding: 5px;\n\t\t\tfont-weight: 600;\n\t\t\tcolor: #53a0e7cc;\n\t\t}\n\n\t\t.agm-r-box {\n\t\t\tflex: 1;\n\t\t\tborder: #53a0e79c solid 1px;\n\t\t\tborder-radius: 5px;\n\n\t\t\t.agm-select-tip {\n\t\t\t\ttext-align: left;\n\t\t\t\theight: 40px;\n\t\t\t\tline-height: 40px;\n\t\t\t\ttext-indent: 5px;\n\t\t\t}\n\t\t}\n\t}\n</style>"]}]}