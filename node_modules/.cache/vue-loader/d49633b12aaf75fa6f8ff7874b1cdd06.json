{"remainingRequest":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\im-ui\\src\\components\\chat\\ChatAtBox.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\im-ui\\src\\components\\chat\\ChatAtBox.vue","mtime":1703809562000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1710142166000},{"path":"D:\\im-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1710142170000},{"path":"D:\\im-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1710142168000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglpbXBvcnQgSGVhZEltYWdlIGZyb20gJy4uL2NvbW1vbi9IZWFkSW1hZ2UudnVlJzsKCglleHBvcnQgZGVmYXVsdCB7CgkJbmFtZTogImNoYXRBdEJveCIsCgkJY29tcG9uZW50czogewoJCQlIZWFkSW1hZ2UKCQl9LAoJCXByb3BzOiB7CgkJCXNlYXJjaFRleHQ6IHsKCQkJCXR5cGU6IFN0cmluZywKCQkJCWRlZmF1bHQ6ICIiCgkJCX0sCgkJCW93bmVySWQ6IHsKCQkJCXR5cGU6IE51bWJlciwKCQkJfSwKCQkJbWVtYmVyczogewoJCQkJdHlwZTogQXJyYXkKCQkJfQoJCX0sCgkJZGF0YSgpIHsKCQkJcmV0dXJuIHsKCQkJCXNob3c6IGZhbHNlLAoJCQkJcG9zOiB7CgkJCQkJeDogMCwKCQkJCQl5OiAwCgkJCQl9LAoJCQkJYWN0aXZlSWR4OiAwLAoJCQkJc2hvd01lbWJlcnM6IFtdCgkJCX07CgkJfSwKCQltZXRob2RzOiB7CgkJCWluaXQoKSB7CgkJCQl0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLnNjcm9sbFRvcCA9IDA7CgkJCQl0aGlzLnNob3dNZW1iZXJzID0gW107CgkJCQlsZXQgdXNlcklkID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlclN0b3JlLnVzZXJJbmZvLmlkOwoJCQkJbGV0IG5hbWUgPSAi5YWo5L2T5oiQ5ZGYIjsKCQkJCWlmICh0aGlzLm93bmVySWQgPT0gdXNlcklkICYmIG5hbWUuc3RhcnRzV2l0aCh0aGlzLnNlYXJjaFRleHQpKSB7CgkJCQkJdGhpcy5zaG93TWVtYmVycy5wdXNoKHsKCQkJCQkJdXNlcklkOiAtMSwKCQkJCQkJYWxpYXNOYW1lOiBuYW1lCgkJCQkJfSkKCQkJCX0KCQkJCXRoaXMubWVtYmVycy5mb3JFYWNoKChtKSA9PiB7CgkJCQkJaWYgKG0udXNlcklkICE9IHVzZXJJZCAmJiBtLmFsaWFzTmFtZS5zdGFydHNXaXRoKHRoaXMuc2VhcmNoVGV4dCkpIHsKCQkJCQkJdGhpcy5zaG93TWVtYmVycy5wdXNoKG0pOwoJCQkJCX0KCQkJCX0pCgkJCQl0aGlzLmFjdGl2ZUlkeCA9IHRoaXMuc2hvd01lbWJlcnMubGVuZ3RoID4gMCA/IDA6IC0xOwoJCQl9LAoJCQlvcGVuKHBvcykgewoJCQkJdGhpcy5zaG93ID0gdHJ1ZTsKCQkJCXRoaXMucG9zID0gcG9zOwoJCQkJdGhpcy5pbml0KCk7CgkJCX0sCgkJCWNsb3NlKCkgewoJCQkJdGhpcy5zaG93ID0gZmFsc2U7CgkJCX0sCgkJCW1vdmVVcCgpIHsKCQkJCWlmICh0aGlzLmFjdGl2ZUlkeCA+IDApIHsKCQkJCQl0aGlzLmFjdGl2ZUlkeC0tOwoJCQkJCXRoaXMuc2Nyb2xsVG9BY3RpdmUoKQoJCQkJfQoJCQl9LAoJCQltb3ZlRG93bigpIHsKCQkJCWlmICh0aGlzLmFjdGl2ZUlkeCA8IHRoaXMuc2hvd01lbWJlcnMubGVuZ3RoIC0gMSkgewoJCQkJCXRoaXMuYWN0aXZlSWR4Kys7CgkJCQkJdGhpcy5zY3JvbGxUb0FjdGl2ZSgpCgkJCQl9CgkJCX0sCgkJCXNlbGVjdCgpIHsKCQkJCWlmICh0aGlzLmFjdGl2ZUlkeCA+PSAwKSB7CgkJCQkJdGhpcy5vblNlbGVjdE1lbWJlcih0aGlzLnNob3dNZW1iZXJzW3RoaXMuYWN0aXZlSWR4XSkKCQkJCX0KCQkJCXRoaXMuY2xvc2UoKTsKCQkJfSwKCQkJc2Nyb2xsVG9BY3RpdmUoKSB7CgkJCQlpZiAodGhpcy5hY3RpdmVJZHggKiAzNSAtIHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuY2xpZW50SGVpZ2h0ID4gdGhpcy4kcmVmcy5zY3JvbGxCb3gud3JhcC5zY3JvbGxUb3ApIHsKCQkJCQl0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLnNjcm9sbFRvcCArPSAxNDA7CgkJCQkJaWYgKHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsVG9wID4gdGhpcy4kcmVmcy5zY3JvbGxCb3gud3JhcC5zY3JvbGxIZWlnaHQpIHsKCQkJCQkJdGhpcy4kcmVmcy5zY3JvbGxCb3gud3JhcC5zY3JvbGxUb3AgPSB0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLnNjcm9sbEhlaWdodAoJCQkJCX0KCQkJCX0KCQkJCWlmICh0aGlzLmFjdGl2ZUlkeCAqIDM1IDwgdGhpcy4kcmVmcy5zY3JvbGxCb3gud3JhcC5zY3JvbGxUb3ApIHsKCQkJCQl0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLnNjcm9sbFRvcCAtPSAxNDA7CgkJCQkJaWYgKHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsVG9wIDwgMCkgewoJCQkJCQl0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLnNjcm9sbFRvcCA9IDA7CgkJCQkJfQoJCQkJfQoJCQl9LAoJCQlvblNlbGVjdE1lbWJlcihtZW1iZXIpIHsKCQkJCXRoaXMuJGVtaXQoInNlbGVjdCIsIG1lbWJlcik7CgkJCQl0aGlzLnNob3cgPSBmYWxzZTsKCQkJfQoJCX0sCgkJY29tcHV0ZWQ6IHsKCQkJaXNPd25lcigpIHsKCQkJCXJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyU3RvcmUudXNlckluZm8uaWQgPT0gdGhpcy5vd25lcklkOwoJCQl9CgkJfSwKCQl3YXRjaDogewoJCQlzZWFyY2hUZXh0OiB7CgkJCQloYW5kbGVyKG5ld1RleHQsIG9sZFRleHQpIHsKCQkJCQl0aGlzLmluaXQoKTsKCQkJCX0KCQkJfQoJCX0KCgl9Cg=="},{"version":3,"sources":["ChatAtBox.vue"],"names":[],"mappings":";AAiBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"ChatAtBox.vue","sourceRoot":"src/components/chat","sourcesContent":["<template>\n\t<el-scrollbar v-show=\"show\" ref=\"scrollBox\" class=\"group-member-choose\"\n\t\t:style=\"{'left':pos.x+'px','top':pos.y-300+'px'}\">\n\t\t<div v-for=\"(member,idx) in showMembers\" :key=\"member.id\">\n\t\t\t<div class=\"member-item\" :class=\"idx==activeIdx?'active':''\" @click=\"onSelectMember(member)\">\n\t\t\t\t<div class=\"member-avatar\">\n\t\t\t\t\t<head-image :size=\"25\" :name=\"member.aliasName\" :url=\"member.headImage\"> </head-image>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"member-name\">\n\t\t\t\t\t<div>{{member.aliasName}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</el-scrollbar>\n</template>\n\n<script>\n\timport HeadImage from '../common/HeadImage.vue';\n\n\texport default {\n\t\tname: \"chatAtBox\",\n\t\tcomponents: {\n\t\t\tHeadImage\n\t\t},\n\t\tprops: {\n\t\t\tsearchText: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"\"\n\t\t\t},\n\t\t\townerId: {\n\t\t\t\ttype: Number,\n\t\t\t},\n\t\t\tmembers: {\n\t\t\t\ttype: Array\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tshow: false,\n\t\t\t\tpos: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0\n\t\t\t\t},\n\t\t\t\tactiveIdx: 0,\n\t\t\t\tshowMembers: []\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\tinit() {\n\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = 0;\n\t\t\t\tthis.showMembers = [];\n\t\t\t\tlet userId = this.$store.state.userStore.userInfo.id;\n\t\t\t\tlet name = \"全体成员\";\n\t\t\t\tif (this.ownerId == userId && name.startsWith(this.searchText)) {\n\t\t\t\t\tthis.showMembers.push({\n\t\t\t\t\t\tuserId: -1,\n\t\t\t\t\t\taliasName: name\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.members.forEach((m) => {\n\t\t\t\t\tif (m.userId != userId && m.aliasName.startsWith(this.searchText)) {\n\t\t\t\t\t\tthis.showMembers.push(m);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tthis.activeIdx = this.showMembers.length > 0 ? 0: -1;\n\t\t\t},\n\t\t\topen(pos) {\n\t\t\t\tthis.show = true;\n\t\t\t\tthis.pos = pos;\n\t\t\t\tthis.init();\n\t\t\t},\n\t\t\tclose() {\n\t\t\t\tthis.show = false;\n\t\t\t},\n\t\t\tmoveUp() {\n\t\t\t\tif (this.activeIdx > 0) {\n\t\t\t\t\tthis.activeIdx--;\n\t\t\t\t\tthis.scrollToActive()\n\t\t\t\t}\n\t\t\t},\n\t\t\tmoveDown() {\n\t\t\t\tif (this.activeIdx < this.showMembers.length - 1) {\n\t\t\t\t\tthis.activeIdx++;\n\t\t\t\t\tthis.scrollToActive()\n\t\t\t\t}\n\t\t\t},\n\t\t\tselect() {\n\t\t\t\tif (this.activeIdx >= 0) {\n\t\t\t\t\tthis.onSelectMember(this.showMembers[this.activeIdx])\n\t\t\t\t}\n\t\t\t\tthis.close();\n\t\t\t},\n\t\t\tscrollToActive() {\n\t\t\t\tif (this.activeIdx * 35 - this.$refs.scrollBox.wrap.clientHeight > this.$refs.scrollBox.wrap.scrollTop) {\n\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop += 140;\n\t\t\t\t\tif (this.$refs.scrollBox.wrap.scrollTop > this.$refs.scrollBox.wrap.scrollHeight) {\n\t\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = this.$refs.scrollBox.wrap.scrollHeight\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.activeIdx * 35 < this.$refs.scrollBox.wrap.scrollTop) {\n\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop -= 140;\n\t\t\t\t\tif (this.$refs.scrollBox.wrap.scrollTop < 0) {\n\t\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSelectMember(member) {\n\t\t\t\tthis.$emit(\"select\", member);\n\t\t\t\tthis.show = false;\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tisOwner() {\n\t\t\t\treturn this.$store.state.userStore.userInfo.id == this.ownerId;\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tsearchText: {\n\t\t\t\thandler(newText, oldText) {\n\t\t\t\t\tthis.init();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n</script>\n\n<style scoped lang=\"scss\">\n\t.group-member-choose {\n\t\tposition: fixed;\n\t\twidth: 200px;\n\t\theight: 300px;\n\t\tborder: 1px solid #b4b4b4;\n\t\tborder-radius: 5px;\n\t\tbackground-color: #f5f5f5;\n\t\tbox-shadow: 0px 0px 10px #ccc;\n\n\t\t.member-item {\n\t\t\tdisplay: flex;\n\t\t\theight: 35px;\n\t\t\tmargin-bottom: 1px;\n\t\t\tposition: relative;\n\t\t\tpadding: 0 5px;\n\t\t\talign-items: center;\n\t\t\tbackground-color: #fafafa;\n\t\t\twhite-space: nowrap;\n\t\t\tbox-sizing: border-box;\n\n\t\t\t&:hover {\n\t\t\t\tbackground-color: #eeeeee;\n\t\t\t}\n\n\t\t\t&.active {\n\t\t\t\tbackground-color: #eeeeee;\n\t\t\t}\n\n\n\t\t\t.member-avatar {\n\t\t\t\twidth: 25px;\n\t\t\t\theight: 25px;\n\t\t\t}\n\n\t\t\t.member-name {\n\t\t\t\tpadding-left: 10px;\n\t\t\t\theight: 100%;\n\t\t\t\ttext-align: left;\n\t\t\t\tline-height: 40px;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\t\t\t\tfont-size: 14px;\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\t\t}\n\t}\n</style>"]}]}